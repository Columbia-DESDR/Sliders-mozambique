import{w as ih,b as Hv}from"./paths.c46c409c.js";import{D as Gv}from"./index.ff7e3b01.js";function Tt(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function $t(e){return function t(n){return arguments.length===0||Tt(n)?t:e.apply(this,arguments)}}function Mt(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return Tt(n)?t:$t(function(r){return e(n,r)});default:return Tt(n)&&Tt(i)?t:Tt(n)?$t(function(r){return e(r,i)}):Tt(i)?$t(function(r){return e(n,r)}):e(n,i)}}}function Kv(e,t){e=e||[],t=t||[];var n,i=e.length,r=t.length,s=[];for(n=0;n<i;)s[s.length]=e[n],n+=1;for(n=0;n<r;)s[s.length]=t[n],n+=1;return s}function rh(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,i){return t.apply(this,arguments)};case 3:return function(n,i,r){return t.apply(this,arguments)};case 4:return function(n,i,r,s){return t.apply(this,arguments)};case 5:return function(n,i,r,s,a){return t.apply(this,arguments)};case 6:return function(n,i,r,s,a,o){return t.apply(this,arguments)};case 7:return function(n,i,r,s,a,o,c){return t.apply(this,arguments)};case 8:return function(n,i,r,s,a,o,c,u){return t.apply(this,arguments)};case 9:return function(n,i,r,s,a,o,c,u,l){return t.apply(this,arguments)};case 10:return function(n,i,r,s,a,o,c,u,l,h){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Zc(e){return function t(n,i,r){switch(arguments.length){case 0:return t;case 1:return Tt(n)?t:Mt(function(s,a){return e(n,s,a)});case 2:return Tt(n)&&Tt(i)?t:Tt(n)?Mt(function(s,a){return e(s,i,a)}):Tt(i)?Mt(function(s,a){return e(n,s,a)}):$t(function(s){return e(n,i,s)});default:return Tt(n)&&Tt(i)&&Tt(r)?t:Tt(n)&&Tt(i)?Mt(function(s,a){return e(s,a,r)}):Tt(n)&&Tt(r)?Mt(function(s,a){return e(s,i,a)}):Tt(i)&&Tt(r)?Mt(function(s,a){return e(n,s,a)}):Tt(n)?$t(function(s){return e(s,i,r)}):Tt(i)?$t(function(s){return e(n,s,r)}):Tt(r)?$t(function(s){return e(n,i,s)}):e(n,i,r)}}}const tu=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Jv(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function Qv(e,t,n){return function(){if(arguments.length===0)return n();var i=arguments[arguments.length-1];if(!tu(i)){for(var r=0;r<e.length;){if(typeof i[e[r]]=="function")return i[e[r]].apply(i,Array.prototype.slice.call(arguments,0,-1));r+=1}if(Jv(i)){var s=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(i)}}return n.apply(this,arguments)}}const fd={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function gy(e){return Object.prototype.toString.call(e)==="[object String]"}var _y=$t(function(t){return tu(t)?!0:!t||typeof t!="object"||gy(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),Xv=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},e}();function Zv(e){return new Xv(e)}var t1=Mt(function(t,n){return rh(t.length,function(){return t.apply(n,arguments)})});function e1(e,t,n){for(var i=0,r=n.length;i<r;){if(t=e["@@transducer/step"](t,n[i]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i+=1}return e["@@transducer/result"](t)}function dd(e,t,n){for(var i=n.next();!i.done;){if(t=e["@@transducer/step"](t,i.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}i=n.next()}return e["@@transducer/result"](t)}function pd(e,t,n,i){return e["@@transducer/result"](n[i](t1(e["@@transducer/step"],e),t))}var yd=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function by(e,t,n){if(typeof e=="function"&&(e=Zv(e)),_y(n))return e1(e,t,n);if(typeof n["fantasy-land/reduce"]=="function")return pd(e,t,n,"fantasy-land/reduce");if(n[yd]!=null)return dd(e,t,n[yd]());if(typeof n.next=="function")return dd(e,t,n);if(typeof n.reduce=="function")return pd(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function si(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var md=Object.prototype.toString,vy=function(){return md.call(arguments)==="[object Arguments]"?function(t){return md.call(t)==="[object Arguments]"}:function(t){return si("callee",t)}}(),n1=!{toString:null}.propertyIsEnumerable("toString"),gd=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_d=function(){return arguments.propertyIsEnumerable("length")}(),i1=function(t,n){for(var i=0;i<t.length;){if(t[i]===n)return!0;i+=1}return!1},r1=$t(typeof Object.keys=="function"&&!_d?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,i,r=[],s=_d&&vy(t);for(n in t)si(n,t)&&(!s||n!=="length")&&(r[r.length]=n);if(n1)for(i=gd.length-1;i>=0;)n=gd[i],si(n,t)&&!i1(r,n)&&(r[r.length]=n),i-=1;return r});const _a=r1;var s1=Zc(by);const a1=s1;var o1=$t(function(t){for(var n=_a(t),i=n.length,r=[],s=0;s<i;)r[s]=t[n[s]],s+=1;return r});const wy=o1;var c1=$t(function(t){return t==null});const qo=c1;function u1(e){return function t(n){for(var i,r,s,a=[],o=0,c=n.length;o<c;){if(_y(n[o]))for(i=e?t(n[o]):n[o],s=0,r=i.length;s<r;)a[a.length]=i[s],s+=1;else a[a.length]=n[o];o+=1}return a}}function l1(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var cl=$t(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function Sy(e,t,n,i){var r=function(a){for(var o=t.length,c=0;c<o;){if(e===t[c])return n[c];c+=1}t[c]=e,n[c]=a;for(var u in e)e.hasOwnProperty(u)&&(a[u]=i?Sy(e[u],t,n,!0):e[u]);return a};switch(cl(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return l1(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var h1=$t(function(t){return t!=null&&typeof t.clone=="function"?t.clone():Sy(t,[],[],!0)});const Yo=h1;function f1(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Iy(e,t){return function(){var n=arguments.length;if(n===0)return t();var i=arguments[n-1];return tu(i)||typeof i[e]!="function"?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var d1=Zc(Iy("slice",function(t,n,i){return Array.prototype.slice.call(i,t,n)})),p1=$t(Iy("tail",d1(1,1/0)));const y1=p1;function m1(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return rh(arguments[0].length,a1(f1,arguments[0],y1(arguments)))}function g1(e){return e}var _1=$t(g1);const b1=_1;function bd(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function vd(e,t,n){for(var i=0,r=n.length;i<r;){if(e(t,n[i]))return!0;i+=1}return!1}function v1(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function w1(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const Ou=typeof Object.is=="function"?Object.is:w1;function wd(e,t,n,i){var r=bd(e),s=bd(t);function a(o,c){return sh(o,c,n.slice(),i.slice())}return!vd(function(o,c){return!vd(a,c,o)},s,r)}function sh(e,t,n,i){if(Ou(e,t))return!0;var r=cl(e);if(r!==cl(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(r){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&v1(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Ou(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Ou(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var s=n.length-1;s>=0;){if(n[s]===e)return i[s]===t;s-=1}switch(r){case"Map":return e.size!==t.size?!1:wd(e.entries(),t.entries(),n.concat([e]),i.concat([t]));case"Set":return e.size!==t.size?!1:wd(e.values(),t.values(),n.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=_a(e);if(a.length!==_a(t).length)return!1;var o=n.concat([e]),c=i.concat([t]);for(s=a.length-1;s>=0;){var u=a[s];if(!(si(u,t)&&sh(t[u],e[u],o,c)))return!1;s-=1}return!0}var xy=Mt(function(t,n){return sh(t,n,[],[])});function S1(e,t,n){var i,r;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(i=1/t;n<e.length;){if(r=e[n],r===0&&1/r===i)return n;n+=1}return-1}else if(t!==t){for(;n<e.length;){if(r=e[n],typeof r=="number"&&r!==r)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(t===null)return e.indexOf(t,n)}for(;n<e.length;){if(xy(e[n],t))return n;n+=1}return-1}function ul(e,t){return S1(t,e,0)>=0}function I1(e,t){for(var n=0,i=t.length,r=[];n<i;)e(t[n])&&(r[r.length]=t[n]),n+=1;return r}function Ho(e){return Object.prototype.toString.call(e)==="[object Object]"}var x1=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=fd.init,e.prototype["@@transducer/result"]=fd.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},e}(),A1=Mt(function(t,n){return new x1(t,n)}),E1=Mt(Qv(["fantasy-land/filter","filter"],A1,function(e,t){return Ho(t)?by(function(n,i){return e(t[i])&&(n[i]=t[i]),n},{},_a(t)):I1(e,t)}));const B1=E1;var T1=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!Sd(t,!0,this)},e.prototype.has=function(t){return Sd(t,!1,this)},e}();function Sd(e,t,n){var i=typeof e,r,s;switch(i){case"string":case"number":return e===0&&1/e===-1/0?n._items["-0"]?!0:(t&&(n._items["-0"]=!0),!1):n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?e in n._items[i]?!0:(t&&(n._items[i][e]=!0),!1):(t&&(n._items[i]={},n._items[i][e]=!0),!1);case"boolean":if(i in n._items){var a=e?1:0;return n._items[i][a]?!0:(t&&(n._items[i][a]=!0),!1)}else return t&&(n._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?t?(r=n._nativeSet.size,n._nativeSet.add(e),s=n._nativeSet.size,s===r):n._nativeSet.has(e):i in n._items?ul(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1);case"undefined":return n._items[i]?!0:(t&&(n._items[i]=!0),!1);case"object":if(e===null)return n._items.null?!0:(t&&(n._items.null=!0),!1);default:return i=Object.prototype.toString.call(e),i in n._items?ul(e,n._items[i])?!0:(t&&n._items[i].push(e),!1):(t&&(n._items[i]=[e]),!1)}}var O1=Mt(function(t,n){for(var i=[],r=0,s=t.length,a=n.length,o=new T1,c=0;c<a;c+=1)o.add(n[c]);for(;r<s;)o.add(t[r])&&(i[i.length]=t[r]),r+=1;return i});const N1=O1;function F1(e){var t=Object.prototype.toString.call(e);return t==="[object Uint8ClampedArray]"||t==="[object Int8Array]"||t==="[object Uint8Array]"||t==="[object Int16Array]"||t==="[object Uint16Array]"||t==="[object Int32Array]"||t==="[object Uint32Array]"||t==="[object Float32Array]"||t==="[object Float64Array]"||t==="[object BigInt64Array]"||t==="[object BigUint64Array]"}var D1=$t(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():tu(t)?[]:gy(t)?"":Ho(t)?{}:vy(t)?function(){return arguments}():F1(t)?t.constructor.from(""):void 0}),k1=$t(u1(!0));const C1=k1;var R1=Mt(function(t,n){for(var i=_a(n),r=0;r<i.length;){var s=i[r];t(n[s],s,n),r+=1}return n});const Ay=R1;var L1=$t(function(t){for(var n={},i=0;i<t.length;)n[t[i][0]]=t[i][1],i+=1;return n});const M1=L1;var U1=Mt(function(t,n){return qo(n)?!1:t in n});const P1=U1;var $1=Mt(ul);const V1=$1;function j1(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,i=arguments.length;n<i;){var r=arguments[n];if(r!=null)for(var s in r)si(s,r)&&(t[s]=r[s]);n+=1}return t}const Ey=typeof Object.assign=="function"?Object.assign:j1;var z1=Mt(function(t,n){return n instanceof t||n!=null&&(n.constructor===t||t.name==="Object"&&typeof n=="object")});const ah=z1;var W1=$t(function(t){return t!=null&&xy(t,D1(t))});const q1=W1;var Y1=Zc(function(t,n,i){var r={},s;for(s in n)si(s,n)&&(r[s]=si(s,i)?t(s,n[s],i[s]):n[s]);for(s in i)si(s,i)&&!si(s,r)&&(r[s]=i[s]);return r}),H1=Zc(function e(t,n,i){return Y1(function(r,s,a){return Ho(s)&&Ho(a)?e(t,s,a):t(r,s,a)},n,i)}),G1=Mt(function(t,n){return H1(function(i,r,s){return s},t,n)});const K1=G1;var J1=Mt(function(t,n){return Ey({},n,t)});const Q1=J1;var X1=Mt(function(t,n){return Ey({},t,n)});const oh=X1;function Z1(e){return Mt(function(t,n){return rh(Math.max(0,t.length-n.length),function(){return t.apply(this,e(n,arguments))})})}var tw=Z1(Kv);const ew=tw;var nw=Mt(function(t,n){var i=Number(n),r=0,s;if(i<0||isNaN(i))throw new RangeError("n must be a non-negative number");for(s=new Array(i);r<i;)s[r]=t(r),r+=1;return s});const iw=nw;var rw=Mt(function(t,n){for(var i=0,r=t.length,s,a=n.length,o=[];i<r;){for(s=0;s<a;)o[o.length]=[t[i],n[s]],s+=1;i+=1}return o});const sw=rw;var aw={value:()=>{}};function By(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new vo(n)}function vo(e){this._=e}function ow(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}vo.prototype=By.prototype={constructor:vo,on:function(e,t){var n=this._,i=ow(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=cw(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=Id(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Id(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vo(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function cw(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Id(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=aw,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ll="http://www.w3.org/1999/xhtml";const xd={svg:"http://www.w3.org/2000/svg",xhtml:ll,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xd.hasOwnProperty(t)?{space:xd[t],local:e}:e}function uw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ll&&t.documentElement.namespaceURI===ll?t.createElement(e):t.createElementNS(n,e)}}function lw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ty(e){var t=eu(e);return(t.local?lw:uw)(t)}function hw(){}function ch(e){return e==null?hw:function(){return this.querySelector(e)}}function fw(e){typeof e!="function"&&(e=ch(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),c,u,l=0;l<a;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),o[l]=u);return new un(i,this._parents)}function dw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pw(){return[]}function Oy(e){return e==null?pw:function(){return this.querySelectorAll(e)}}function yw(e){return function(){return dw(e.apply(this,arguments))}}function mw(e){typeof e=="function"?e=yw(e):e=Oy(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var a=t[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&(i.push(e.call(c,c.__data__,u,a)),r.push(c));return new un(i,r)}function Ny(e){return function(){return this.matches(e)}}function Fy(e){return function(t){return t.matches(e)}}var gw=Array.prototype.find;function _w(e){return function(){return gw.call(this.children,e)}}function bw(){return this.firstElementChild}function vw(e){return this.select(e==null?bw:_w(typeof e=="function"?e:Fy(e)))}var ww=Array.prototype.filter;function Sw(){return Array.from(this.children)}function Iw(e){return function(){return ww.call(this.children,e)}}function xw(e){return this.selectAll(e==null?Sw:Iw(typeof e=="function"?e:Fy(e)))}function Aw(e){typeof e!="function"&&(e=Ny(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new un(i,this._parents)}function Dy(e){return new Array(e.length)}function Ew(){return new un(this._enter||this._groups.map(Dy),this._parents)}function Go(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Go.prototype={constructor:Go,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bw(e){return function(){return e}}function Tw(e,t,n,i,r,s){for(var a=0,o,c=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new Go(e,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function Ow(e,t,n,i,r,s,a){var o,c,u=new Map,l=t.length,h=s.length,d=new Array(l),y;for(o=0;o<l;++o)(c=t[o])&&(d[o]=y=a.call(c,c.__data__,o,t)+"",u.has(y)?r[o]=c:u.set(y,c));for(o=0;o<h;++o)y=a.call(e,s[o],o,s)+"",(c=u.get(y))?(i[o]=c,c.__data__=s[o],u.delete(y)):n[o]=new Go(e,s[o]);for(o=0;o<l;++o)(c=t[o])&&u.get(d[o])===c&&(r[o]=c)}function Nw(e){return e.__data__}function Fw(e,t){if(!arguments.length)return Array.from(this,Nw);var n=t?Ow:Tw,i=this._parents,r=this._groups;typeof e!="function"&&(e=Bw(e));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var l=i[u],h=r[u],d=h.length,y=Dw(e.call(l,l&&l.__data__,u,i)),g=y.length,_=o[u]=new Array(g),b=a[u]=new Array(g),w=c[u]=new Array(d);n(l,h,_,b,w,y,t);for(var U=0,ht=0,F,It;U<g;++U)if(F=_[U]){for(U>=ht&&(ht=U+1);!(It=b[ht])&&++ht<g;);F._next=It||null}}return a=new un(a,i),a._enter=o,a._exit=c,a}function Dw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kw(){return new un(this._exit||this._groups.map(Dy),this._parents)}function Cw(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Rw(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var u=n[c],l=i[c],h=u.length,d=o[c]=new Array(h),y,g=0;g<h;++g)(y=u[g]||l[g])&&(d[g]=y);for(;c<r;++c)o[c]=n[c];return new un(o,this._parents)}function Lw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Mw(e){e||(e=Uw);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,c=r[s]=new Array(o),u,l=0;l<o;++l)(u=a[l])&&(c[l]=u);c.sort(t)}return new un(r,this._parents).order()}function Uw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $w(){return Array.from(this)}function Vw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function jw(){let e=0;for(const t of this)++e;return e}function zw(){return!this.node()}function Ww(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&e.call(o,o.__data__,s,r);return this}function qw(e){return function(){this.removeAttribute(e)}}function Yw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hw(e,t){return function(){this.setAttribute(e,t)}}function Gw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Kw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qw(e,t){var n=eu(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Yw:qw:typeof t=="function"?n.local?Jw:Kw:n.local?Gw:Hw)(n,t))}function ky(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xw(e){return function(){this.style.removeProperty(e)}}function Zw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tS(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function eS(e,t,n){return arguments.length>1?this.each((t==null?Xw:typeof t=="function"?tS:Zw)(e,t,n??"")):cs(this.node(),e)}function cs(e,t){return e.style.getPropertyValue(t)||ky(e).getComputedStyle(e,null).getPropertyValue(t)}function nS(e){return function(){delete this[e]}}function iS(e,t){return function(){this[e]=t}}function rS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sS(e,t){return arguments.length>1?this.each((t==null?nS:typeof t=="function"?rS:iS)(e,t)):this.node()[e]}function Cy(e){return e.trim().split(/^|\s+/)}function uh(e){return e.classList||new Ry(e)}function Ry(e){this._node=e,this._names=Cy(e.getAttribute("class")||"")}Ry.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ly(e,t){for(var n=uh(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function My(e,t){for(var n=uh(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function aS(e){return function(){Ly(this,e)}}function oS(e){return function(){My(this,e)}}function cS(e,t){return function(){(t.apply(this,arguments)?Ly:My)(this,e)}}function uS(e,t){var n=Cy(e+"");if(arguments.length<2){for(var i=uh(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?cS:t?aS:oS)(n,t))}function lS(){this.textContent=""}function hS(e){return function(){this.textContent=e}}function fS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dS(e){return arguments.length?this.each(e==null?lS:(typeof e=="function"?fS:hS)(e)):this.node().textContent}function pS(){this.innerHTML=""}function yS(e){return function(){this.innerHTML=e}}function mS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gS(e){return arguments.length?this.each(e==null?pS:(typeof e=="function"?mS:yS)(e)):this.node().innerHTML}function _S(){this.nextSibling&&this.parentNode.appendChild(this)}function bS(){return this.each(_S)}function vS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wS(){return this.each(vS)}function SS(e){var t=typeof e=="function"?e:Ty(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function IS(){return null}function xS(e,t){var n=typeof e=="function"?e:Ty(e),i=t==null?IS:typeof t=="function"?t:ch(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function AS(){var e=this.parentNode;e&&e.removeChild(this)}function ES(){return this.each(AS)}function BS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function OS(e){return this.select(e?TS:BS)}function NS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FS(e){return function(t){e.call(this,t,this.__data__)}}function DS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function kS(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function CS(e,t,n){return function(){var i=this.__on,r,s=FS(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function RS(e,t,n){var i=DS(e+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,l;c<u;++c)for(r=0,l=o[c];r<s;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}return}for(o=t?CS:kS,r=0;r<s;++r)this.each(o(i[r],t,n));return this}function Uy(e,t,n){var i=ky(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function LS(e,t){return function(){return Uy(this,e,t)}}function MS(e,t){return function(){return Uy(this,e,t.apply(this,arguments))}}function US(e,t){return this.each((typeof t=="function"?MS:LS)(e,t))}function*PS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var $S=[null];function un(e,t){this._groups=e,this._parents=t}function ja(){return new un([[document.documentElement]],$S)}function VS(){return this}un.prototype=ja.prototype={constructor:un,select:fw,selectAll:mw,selectChild:vw,selectChildren:xw,filter:Aw,data:Fw,enter:Ew,exit:kw,join:Cw,merge:Rw,selection:VS,order:Lw,sort:Mw,call:Pw,nodes:$w,node:Vw,size:jw,empty:zw,each:Ww,attr:Qw,style:eS,property:sS,classed:uS,text:dS,html:gS,raise:bS,lower:wS,append:SS,insert:xS,remove:ES,clone:OS,datum:NS,on:RS,dispatch:US,[Symbol.iterator]:PS};function lh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Py(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function za(){}var ba=.7,Ko=1/ba,Xr="\\s*([+-]?\\d+)\\s*",va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jS=/^#([0-9a-f]{3,8})$/,zS=new RegExp(`^rgb\\(${Xr},${Xr},${Xr}\\)$`),WS=new RegExp(`^rgb\\(${Cn},${Cn},${Cn}\\)$`),qS=new RegExp(`^rgba\\(${Xr},${Xr},${Xr},${va}\\)$`),YS=new RegExp(`^rgba\\(${Cn},${Cn},${Cn},${va}\\)$`),HS=new RegExp(`^hsl\\(${va},${Cn},${Cn}\\)$`),GS=new RegExp(`^hsla\\(${va},${Cn},${Cn},${va}\\)$`),Ad={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lh(za,wa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ed,formatHex:Ed,formatHex8:KS,formatHsl:JS,formatRgb:Bd,toString:Bd});function Ed(){return this.rgb().formatHex()}function KS(){return this.rgb().formatHex8()}function JS(){return $y(this).formatHsl()}function Bd(){return this.rgb().formatRgb()}function wa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Td(t):n===3?new me(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zS.exec(e))?new me(t[1],t[2],t[3],1):(t=WS.exec(e))?new me(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qS.exec(e))?oo(t[1],t[2],t[3],t[4]):(t=YS.exec(e))?oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HS.exec(e))?Fd(t[1],t[2]/100,t[3]/100,1):(t=GS.exec(e))?Fd(t[1],t[2]/100,t[3]/100,t[4]):Ad.hasOwnProperty(e)?Td(Ad[e]):e==="transparent"?new me(NaN,NaN,NaN,0):null}function Td(e){return new me(e>>16&255,e>>8&255,e&255,1)}function oo(e,t,n,i){return i<=0&&(e=t=n=NaN),new me(e,t,n,i)}function QS(e){return e instanceof za||(e=wa(e)),e?(e=e.rgb(),new me(e.r,e.g,e.b,e.opacity)):new me}function Jo(e,t,n,i){return arguments.length===1?QS(e):new me(e,t,n,i??1)}function me(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}lh(me,Jo,Py(za,{brighter(e){return e=e==null?Ko:Math.pow(Ko,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new me(gr(this.r),gr(this.g),gr(this.b),Qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Od,formatHex:Od,formatHex8:XS,formatRgb:Nd,toString:Nd}));function Od(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}`}function XS(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}${pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nd(){const e=Qo(this.opacity);return`${e===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${e===1?")":`, ${e})`}`}function Qo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pr(e){return e=gr(e),(e<16?"0":"")+e.toString(16)}function Fd(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rn(e,t,n,i)}function $y(e){if(e instanceof rn)return new rn(e.h,e.s,e.l,e.opacity);if(e instanceof za||(e=wa(e)),!e)return new rn;if(e instanceof rn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new rn(a,o,c,e.opacity)}function ZS(e,t,n,i){return arguments.length===1?$y(e):new rn(e,t,n,i??1)}function rn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}lh(rn,ZS,Py(za,{brighter(e){return e=e==null?Ko:Math.pow(Ko,e),new rn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new rn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new me(Nu(e>=240?e-240:e+120,r,i),Nu(e,r,i),Nu(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new rn(Dd(this.h),co(this.s),co(this.l),Qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qo(this.opacity);return`${e===1?"hsl(":"hsla("}${Dd(this.h)}, ${co(this.s)*100}%, ${co(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dd(e){return e=(e||0)%360,e<0?e+360:e}function co(e){return Math.max(0,Math.min(1,e||0))}function Nu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tI(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function eI(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return tI((n-i/t)*t,a,r,s,o)}}const hh=e=>()=>e;function Vy(e,t){return function(n){return e+n*t}}function nI(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function bR(e,t){var n=t-e;return n?Vy(e,n>180||n<-180?n-360*Math.round(n/360):n):hh(isNaN(e)?t:e)}function iI(e){return(e=+e)==1?jy:function(t,n){return n-t?nI(t,n,e):hh(isNaN(t)?n:t)}}function jy(e,t){var n=t-e;return n?Vy(e,n):hh(isNaN(e)?t:e)}const kd=function e(t){var n=iI(t);function i(r,s){var a=n((r=Jo(r)).r,(s=Jo(s)).r),o=n(r.g,s.g),c=n(r.b,s.b),u=jy(r.opacity,s.opacity);return function(l){return r.r=a(l),r.g=o(l),r.b=c(l),r.opacity=u(l),r+""}}return i.gamma=e,i}(1);function rI(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=Jo(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(c){return o.r=i(c),o.g=r(c),o.b=s(c),o+""}}}var vR=rI(eI);function Oi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fu=new RegExp(hl.source,"g");function sI(e){return function(){return e}}function aI(e){return function(t){return e(t)+""}}function oI(e,t){var n=hl.lastIndex=Fu.lastIndex=0,i,r,s,a=-1,o=[],c=[];for(e=e+"",t=t+"";(i=hl.exec(e))&&(r=Fu.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,c.push({i:a,x:Oi(i,r)})),n=Fu.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?aI(c[0].x):sI(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)o[(h=c[l]).i]=h.x(u);return o.join("")})}var Cd=180/Math.PI,fl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zy(e,t,n,i,r,s){var a,o,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,c/=o),e*i<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Cd,skewX:Math.atan(c)*Cd,scaleX:a,scaleY:o}}var uo;function cI(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fl:zy(t.a,t.b,t.c,t.d,t.e,t.f)}function uI(e){return e==null||(uo||(uo=document.createElementNS("http://www.w3.org/2000/svg","g")),uo.setAttribute("transform",e),!(e=uo.transform.baseVal.consolidate()))?fl:(e=e.matrix,zy(e.a,e.b,e.c,e.d,e.e,e.f))}function Wy(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,l,h,d,y,g){if(u!==h||l!==d){var _=y.push("translate(",null,t,null,n);g.push({i:_-4,x:Oi(u,h)},{i:_-2,x:Oi(l,d)})}else(h||d)&&y.push("translate("+h+t+d+n)}function a(u,l,h,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Oi(u,l)})):l&&h.push(r(h)+"rotate("+l+i)}function o(u,l,h,d){u!==l?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Oi(u,l)}):l&&h.push(r(h)+"skewX("+l+i)}function c(u,l,h,d,y,g){if(u!==h||l!==d){var _=y.push(r(y)+"scale(",null,",",null,")");g.push({i:_-4,x:Oi(u,h)},{i:_-2,x:Oi(l,d)})}else(h!==1||d!==1)&&y.push(r(y)+"scale("+h+","+d+")")}return function(u,l){var h=[],d=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,h,d),a(u.rotate,l.rotate,h,d),o(u.skewX,l.skewX,h,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,d),u=l=null,function(y){for(var g=-1,_=d.length,b;++g<_;)h[(b=d[g]).i]=b.x(y);return h.join("")}}}var lI=Wy(cI,"px, ","px)","deg)"),hI=Wy(uI,", ",")",")"),us=0,Gs=0,Vs=0,qy=1e3,Xo,Ks,Zo=0,br=0,nu=0,Sa=typeof performance=="object"&&performance.now?performance:Date,Yy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fh(){return br||(Yy(fI),br=Sa.now()+nu)}function fI(){br=0}function tc(){this._call=this._time=this._next=null}tc.prototype=Hy.prototype={constructor:tc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fh():+n)+(t==null?0:+t),!this._next&&Ks!==this&&(Ks?Ks._next=this:Xo=this,Ks=this),this._call=e,this._time=n,dl()},stop:function(){this._call&&(this._call=null,this._time=1/0,dl())}};function Hy(e,t,n){var i=new tc;return i.restart(e,t,n),i}function dI(){fh(),++us;for(var e=Xo,t;e;)(t=br-e._time)>=0&&e._call.call(void 0,t),e=e._next;--us}function Rd(){br=(Zo=Sa.now())+nu,us=Gs=0;try{dI()}finally{us=0,yI(),br=0}}function pI(){var e=Sa.now(),t=e-Zo;t>qy&&(nu-=t,Zo=e)}function yI(){for(var e,t=Xo,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xo=n);Ks=e,dl(i)}function dl(e){if(!us){Gs&&(Gs=clearTimeout(Gs));var t=e-br;t>24?(e<1/0&&(Gs=setTimeout(Rd,e-Sa.now()-nu)),Vs&&(Vs=clearInterval(Vs))):(Vs||(Zo=Sa.now(),Vs=setInterval(pI,qy)),us=1,Yy(Rd))}}function Ld(e,t,n){var i=new tc;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var mI=By("start","end","cancel","interrupt"),gI=[],Gy=0,Md=1,pl=2,wo=3,Ud=4,yl=5,So=6;function iu(e,t,n,i,r,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;_I(e,n,{name:t,index:i,group:r,on:mI,tween:gI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Gy})}function dh(e,t){var n=dn(e,t);if(n.state>Gy)throw new Error("too late; already scheduled");return n}function Vn(e,t){var n=dn(e,t);if(n.state>wo)throw new Error("too late; already running");return n}function dn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _I(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Hy(s,0,n.time);function s(u){n.state=Md,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,h,d,y;if(n.state!==Md)return c();for(l in i)if(y=i[l],y.name===n.name){if(y.state===wo)return Ld(a);y.state===Ud?(y.state=So,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete i[l]):+l<t&&(y.state=So,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete i[l])}if(Ld(function(){n.state===wo&&(n.state=Ud,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=pl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pl){for(n.state=wo,r=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(y=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=y);r.length=h+1}}function o(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=yl,1),h=-1,d=r.length;++h<d;)r[h].call(e,l);n.state===yl&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=So,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function bI(e,t){var n=e.__transition,i,r,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}r=i.state>pl&&i.state<yl,i.state=So,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function vI(e){return this.each(function(){bI(this,e)})}function wI(e,t){var n,i;return function(){var r=Vn(this,e),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function SI(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=Vn(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=o;break}c===u&&r.push(o)}s.tween=r}}function II(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=dn(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?wI:SI)(n,e,t))}function ph(e,t,n){var i=e._id;return e.each(function(){var r=Vn(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return dn(r,i).value[t]}}function Ky(e,t){var n;return(typeof t=="number"?Oi:t instanceof wa?kd:(n=wa(t))?(t=n,kd):oI)(e,t)}function xI(e){return function(){this.removeAttribute(e)}}function AI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EI(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttribute(e);return a===r?null:a===i?s:s=t(i=a,n)}}function BI(e,t,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?s:s=t(i=a,n)}}function TI(e,t,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function OI(e,t,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function NI(e,t){var n=eu(e),i=n==="transform"?hI:Ky;return this.attrTween(e,typeof t=="function"?(n.local?OI:TI)(n,i,ph(this,"attr."+e,t)):t==null?(n.local?AI:xI)(n):(n.local?BI:EI)(n,i,t))}function FI(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function DI(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kI(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&DI(e,s)),n}return r._value=t,r}function CI(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&FI(e,s)),n}return r._value=t,r}function RI(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=eu(e);return this.tween(n,(i.local?kI:CI)(i,t))}function LI(e,t){return function(){dh(this,e).delay=+t.apply(this,arguments)}}function MI(e,t){return t=+t,function(){dh(this,e).delay=t}}function UI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?LI:MI)(t,e)):dn(this.node(),t).delay}function PI(e,t){return function(){Vn(this,e).duration=+t.apply(this,arguments)}}function $I(e,t){return t=+t,function(){Vn(this,e).duration=t}}function VI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PI:$I)(t,e)):dn(this.node(),t).duration}function jI(e,t){if(typeof t!="function")throw new Error;return function(){Vn(this,e).ease=t}}function zI(e){var t=this._id;return arguments.length?this.each(jI(t,e)):dn(this.node(),t).ease}function WI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vn(this,e).ease=n}}function qI(e){if(typeof e!="function")throw new Error;return this.each(WI(this._id,e))}function YI(e){typeof e!="function"&&(e=Ny(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new oi(i,this._parents,this._name,this._id)}function HI(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var c=t[o],u=n[o],l=c.length,h=a[o]=new Array(l),d,y=0;y<l;++y)(d=c[y]||u[y])&&(h[y]=d);for(;o<i;++o)a[o]=t[o];return new oi(a,this._parents,this._name,this._id)}function GI(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function KI(e,t,n){var i,r,s=GI(t)?dh:Vn;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}function JI(e,t){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(e):this.each(KI(n,e,t))}function QI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XI(){return this.on("end.remove",QI(this._id))}function ZI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ch(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],c=o.length,u=s[a]=new Array(c),l,h,d=0;d<c;++d)(l=o[d])&&(h=e.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),u[d]=h,iu(u[d],t,n,d,u,dn(l,n)));return new oi(s,this._parents,t,n)}function tx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Oy(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var c=i[o],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var d=e.call(l,l.__data__,h,c),y,g=dn(l,n),_=0,b=d.length;_<b;++_)(y=d[_])&&iu(y,t,n,_,d,g);s.push(d),a.push(l)}return new oi(s,a,t,n)}var ex=ja.prototype.constructor;function nx(){return new ex(this._groups,this._parents)}function ix(e,t){var n,i,r;return function(){var s=cs(this,e),a=(this.style.removeProperty(e),cs(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function Jy(e){return function(){this.style.removeProperty(e)}}function rx(e,t,n){var i,r=n+"",s;return function(){var a=cs(this,e);return a===r?null:a===i?s:s=t(i=a,n)}}function sx(e,t,n){var i,r,s;return function(){var a=cs(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),cs(this,e))),a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o))}}function ax(e,t){var n,i,r,s="style."+t,a="end."+s,o;return function(){var c=Vn(this,e),u=c.on,l=c.value[s]==null?o||(o=Jy(t)):void 0;(u!==n||r!==l)&&(i=(n=u).copy()).on(a,r=l),c.on=i}}function ox(e,t,n){var i=(e+="")=="transform"?lI:Ky;return t==null?this.styleTween(e,ix(e,i)).on("end.style."+e,Jy(e)):typeof t=="function"?this.styleTween(e,sx(e,i,ph(this,"style."+e,t))).each(ax(this._id,e)):this.styleTween(e,rx(e,i,t),n).on("end.style."+e,null)}function cx(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function ux(e,t,n){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&cx(e,a,n)),i}return s._value=t,s}function lx(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ux(e,t,n??""))}function hx(e){return function(){this.textContent=e}}function fx(e){return function(){var t=e(this);this.textContent=t??""}}function dx(e){return this.tween("text",typeof e=="function"?fx(ph(this,"text",e)):hx(e==null?"":e+""))}function px(e){return function(t){this.textContent=e.call(this,t)}}function yx(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&px(r)),t}return i._value=e,i}function mx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yx(e))}function gx(){for(var e=this._name,t=this._id,n=Qy(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)if(c=a[u]){var l=dn(c,t);iu(c,e,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new oi(i,this._parents,e,n)}function _x(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--r===0&&s()}};n.each(function(){var u=Vn(this,i),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),r===0&&s()})}var bx=0;function oi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Qy(){return++bx}var qn=ja.prototype;oi.prototype={constructor:oi,select:ZI,selectAll:tx,selectChild:qn.selectChild,selectChildren:qn.selectChildren,filter:YI,merge:HI,selection:nx,transition:gx,call:qn.call,nodes:qn.nodes,node:qn.node,size:qn.size,empty:qn.empty,each:qn.each,on:JI,attr:NI,attrTween:RI,style:ox,styleTween:lx,text:dx,textTween:mx,remove:XI,tween:II,delay:UI,duration:VI,ease:zI,easeVarying:qI,end:_x,[Symbol.iterator]:qn[Symbol.iterator]};function vx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wx={time:null,delay:0,duration:250,ease:vx};function Sx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ix(e){var t,n;e instanceof oi?(t=e._id,e=e._name):(t=Qy(),(n=wx).time=fh(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&iu(c,e,t,u,a,n||Sx(c,t));return new oi(i,this._parents,e,t)}ja.prototype.interrupt=vI;ja.prototype.transition=Ix;var Pd={},Du={},ku=34,js=10,Cu=13;function Xy(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function xx(e,t){var n=Xy(e);return function(i,r){return t(n(i),r,e)}}function $d(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function he(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ax(e){return e<0?"-"+he(-e,6):e>9999?"+"+he(e,6):he(e,4)}function Ex(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ax(e.getUTCFullYear())+"-"+he(e.getUTCMonth()+1,2)+"-"+he(e.getUTCDate(),2)+(r?"T"+he(t,2)+":"+he(n,2)+":"+he(i,2)+"."+he(r,3)+"Z":i?"T"+he(t,2)+":"+he(n,2)+":"+he(i,2)+"Z":n||t?"T"+he(t,2)+":"+he(n,2)+"Z":"")}function Bx(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,d){var y,g,_=r(h,function(b,w){if(y)return y(b,w-1);g=b,y=d?xx(b,d):Xy(b)});return _.columns=g||[],_}function r(h,d){var y=[],g=h.length,_=0,b=0,w,U=g<=0,ht=!1;h.charCodeAt(g-1)===js&&--g,h.charCodeAt(g-1)===Cu&&--g;function F(){if(U)return Du;if(ht)return ht=!1,Pd;var Z,Jt=_,_t;if(h.charCodeAt(Jt)===ku){for(;_++<g&&h.charCodeAt(_)!==ku||h.charCodeAt(++_)===ku;);return(Z=_)>=g?U=!0:(_t=h.charCodeAt(_++))===js?ht=!0:_t===Cu&&(ht=!0,h.charCodeAt(_)===js&&++_),h.slice(Jt+1,Z-1).replace(/""/g,'"')}for(;_<g;){if((_t=h.charCodeAt(Z=_++))===js)ht=!0;else if(_t===Cu)ht=!0,h.charCodeAt(_)===js&&++_;else if(_t!==n)continue;return h.slice(Jt,Z)}return U=!0,h.slice(Jt,g)}for(;(w=F())!==Du;){for(var It=[];w!==Pd&&w!==Du;)It.push(w),w=F();d&&(It=d(It,b++))==null||y.push(It)}return y}function s(h,d){return h.map(function(y){return d.map(function(g){return l(y[g])}).join(e)})}function a(h,d){return d==null&&(d=$d(h)),[d.map(l).join(e)].concat(s(h,d)).join(`
`)}function o(h,d){return d==null&&(d=$d(h)),s(h,d).join(`
`)}function c(h){return h.map(u).join(`
`)}function u(h){return h.map(l).join(e)}function l(h){return h==null?"":h instanceof Date?Ex(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:c,formatRow:u,formatValue:l}}var Tx=Bx(","),Ox=Tx.parse;function Nx(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Fx&&r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Fx=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Dx(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function kx(e,t){return fetch(e,t).then(Dx)}function Cx(e){return function(t,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),kx(t,n).then(function(r){return e(r,i)})}}var Rx=Cx(Ox);function Js(e,t,n){this.k=e,this.x=t,this.y=n}Js.prototype={constructor:Js,scale:function(e){return e===1?this:new Js(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Js(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Js.prototype;let Lx=ih(null),wR=ih(null),SR=ih(null),Mx=0;class Ux{constructor(){this.listeners={}}on(t,n){let i=Mx++;return this.listeners[t]=this.listeners[t]||{},this.listeners[t][i]=n,()=>{delete this.listeners[t][i]}}emit(t,...n){(wy(this.listeners[t])??[]).forEach(r=>{r(...n)})}}Q1(void 0);class jn extends Ux{constructor(){super(),this.registeredViews=[],this.on("data",(t,...n)=>{this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{if(qo(i))return;let a=m1(...r)(t);i instanceof Function?i(a,...n):i.render(a,...n)})})}snapshot(){}restoreSnapshot(t){}async init(){}registerView(t,n){console.log("Backend.registerView",t,n),n=C1([n??b1]),this.registeredViews.push({view:t,postprocessFuncs:n})}addPostprocessing(t,n){this.registeredViews.forEach(({view:i,postprocessFuncs:r})=>{var s;((s=i.spec)==null?void 0:s.id)==t&&r.push(n)})}async execute(t,n){return qo(t)&&(t=[]),ah(Array,t)||(t=[t]),this._execute(t,n)}async _execute(t,n){}}class Px extends jn{constructor(t){super(),this.data=t.data||[]}async _execute(t,...n){this.emit("data",this.data,...n)}}class $x extends jn{constructor(t){super(),this.data=null,this.promise=null,this.promise=Rx(t.url,Nx)}async _execute(t,n){this.promise&&(this.data=await this.promise,this.promise=null),this.emit("data",this.data,n)}}function A(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(l){try{u(i.next(l))}catch(h){a(h)}}function c(l){try{u(i.throw(l))}catch(h){a(h)}}function u(l){l.done?s(l.value):r(l.value).then(o,c)}u((i=i.apply(e,t||[])).next())})}function Vd(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function Xt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(g){return Promise.resolve(g).then(y,h)}}function o(y,g){i[y]&&(r[y]=function(_){return new Promise(function(b,w){s.push([y,_,b,w])>1||c(y,_)})},g&&(r[y]=g(r[y])))}function c(y,g){try{u(i[y](g))}catch(_){d(s[0][3],_)}}function u(y){y.value instanceof v?Promise.resolve(y.value.v).then(l,h):d(s[0][2],y)}function l(y){c("next",y)}function h(y){c("throw",y)}function d(y,g){y(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function _r(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:v(e[r](a)),done:!1}:s?s(a):a}:s}}function qe(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vd=="function"?Vd(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,c){a=e[s](a),r(o,c,a.done,a.value)})}}function r(s,a,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},a)}}const Vx=new TextDecoder("utf-8"),ml=e=>Vx.decode(e),jx=new TextEncoder,yh=e=>jx.encode(e),zx=e=>typeof e=="number",Zy=e=>typeof e=="boolean",zt=e=>typeof e=="function",_e=e=>e!=null&&Object(e)===e,vr=e=>_e(e)&&zt(e.then),Wa=e=>_e(e)&&zt(e[Symbol.iterator]),Bs=e=>_e(e)&&zt(e[Symbol.asyncIterator]),gl=e=>_e(e)&&_e(e.schema),tm=e=>_e(e)&&"done"in e&&"value"in e,em=e=>_e(e)&&zt(e.stat)&&zx(e.fd),nm=e=>_e(e)&&mh(e.body),ru=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Wx=e=>_e(e)&&zt(e.abort)&&zt(e.getWriter)&&!ru(e),mh=e=>_e(e)&&zt(e.cancel)&&zt(e.getReader)&&!ru(e),qx=e=>_e(e)&&zt(e.end)&&zt(e.write)&&Zy(e.writable)&&!ru(e),im=e=>_e(e)&&zt(e.read)&&zt(e.pipe)&&Zy(e.readable)&&!ru(e),Yx=e=>_e(e)&&zt(e.clear)&&zt(e.bytes)&&zt(e.position)&&zt(e.setPosition)&&zt(e.capacity)&&zt(e.getBufferIdentifier)&&zt(e.createLong),gh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Hx(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,n,i-n+s)}return t}function jd(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Rn(e,t){const n=Hx(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++c<l;){if(r=n[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?jd(a,s,o):a=s;break}jd(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function vt(e,t){let n=tm(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=yh(n)),n instanceof ArrayBuffer?new e(n):n instanceof gh?new e(n):Yx(n)?vt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const zs=e=>vt(Int32Array,e),dt=e=>vt(Uint8Array,e),_l=e=>(e.next(),e);function*Gx(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gh?n(t):Wa(t)?t:n(t);return yield*_l(function*(r){let s=null;do s=r.next(yield vt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const Kx=e=>Gx(Uint8Array,e);function rm(e,t){return Xt(this,arguments,function*(){if(vr(t))return yield v(yield v(yield*_r(qe(rm(e,yield v(t))))));const i=function(a){return Xt(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return Xt(this,arguments,function*(){yield v(yield*_r(qe(_l(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof gh?i(t):Wa(t)?r(t):Bs(t)?t:i(t);return yield v(yield*_r(qe(_l(function(a){return Xt(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(vt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const Jx=e=>rm(Uint8Array,e);function _h(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function Qx(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const Pe={fromIterable(e){return lo(Xx(e))},fromAsyncIterable(e){return lo(Zx(e))},fromDOMStream(e){return lo(tA(e))},fromNodeStream(e){return lo(nA(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},lo=e=>(e.next(),e);function*Xx(e){let t,n=!1,i=[],r,s,a,o=0;function c(){return s==="peek"?Rn(i,a)[0]:([r,i,o]=Rn(i,a),r)}({cmd:s,size:a}=yield null);const u=Kx(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(n=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function Zx(e){return Xt(this,arguments,function*(){let n,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Rn(r,o)[0]:([s,r,c]=Rn(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=Jx(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!n&&s.byteLength>0&&(r.push(s),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function tA(e){return Xt(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Rn(r,o)[0]:([s,r,c]=Rn(r,o),s)}({cmd:a,size:o}=yield yield v(null));const l=new eA(e);try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!n&&s.byteLength>0&&(r.push(dt(s)),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&(yield v(l.cancel(h)))}finally{i===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}let eA=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return A(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return A(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=dt(n)),n})}};const Ru=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function nA(e){return Xt(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?Rn(u,o)[0]:([l,u,c]=Rn(u,o),l)}if({cmd:a,size:o}=yield yield v(null),e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{n[0]=Ru(e,"end"),n[1]=Ru(e,"error");do{if(n[2]=Ru(e,"readable"),[i,s]=yield v(Promise.race(n.map(y=>y[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-c)?(l=dt(e.read(o-c)),l.byteLength<o-c&&(l=dt(e.read()))):l=dt(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(n,i==="error"?s:null))}return yield v(null);function d(y,g){return l=u=null,new Promise((_,b)=>{for(const[w,U]of y)e.off(w,U);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var Oe;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Oe||(Oe={}));var Ne;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ne||(Ne={}));var ge;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(ge||(ge={}));var ci;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ci||(ci={}));var pt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(pt||(pt={}));var Ci;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ci||(Ci={}));var mt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(mt||(mt={}));var m;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(m||(m={}));var Jn;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Jn||(Jn={}));const iA=void 0;function Ia(e){if(e===null)return"null";if(e===iA)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Ia(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const rA=Symbol.for("isArrowBigNum");function pn(e,...t){return t.length===0?Object.setPrototypeOf(vt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}pn.prototype[rA]=!0;pn.prototype.toJSON=function(){return`"${Aa(this)}"`};pn.prototype.valueOf=function(){return sm(this)};pn.prototype.toString=function(){return Aa(this)};pn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return sm(this);case"string":return Aa(this);case"default":return sA(this)}return Aa(this)};function Zr(...e){return pn.apply(this,e)}function ts(...e){return pn.apply(this,e)}function xa(...e){return pn.apply(this,e)}Object.setPrototypeOf(Zr.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ts.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(xa.prototype,Object.create(Uint32Array.prototype));Object.assign(Zr.prototype,pn.prototype,{constructor:Zr,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ts.prototype,pn.prototype,{constructor:ts,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(xa.prototype,pn.prototype,{constructor:xa,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function sm(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new BigUint64Array(t,n,i),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}const Aa=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Lu(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Lu(e);t=t.slice();let i=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+i;t[s]=o,i&=a===0?1:0}return`-${Lu(t)}`},sA=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Aa(e);function Lu(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}let aA=class am{static new(t,n){switch(n){case!0:return new Zr(t);case!1:return new ts(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Zr(t)}return t.byteLength===16?new xa(t):new ts(t)}static signed(t){return new Zr(t)}static unsigned(t){return new ts(t)}static decimal(t){return new xa(t)}constructor(t,n){return am.new(t,n)}};function ln(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var om,cm,um,lm,hm,fm,dm,pm,ym,mm,gm,_m,bm,vm,wm,Sm,Im,xm,Am;let K=class bl{static isNull(t){return(t==null?void 0:t.typeId)===m.Null}static isInt(t){return(t==null?void 0:t.typeId)===m.Int}static isFloat(t){return(t==null?void 0:t.typeId)===m.Float}static isBinary(t){return(t==null?void 0:t.typeId)===m.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===m.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===m.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===m.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===m.Date}static isTime(t){return(t==null?void 0:t.typeId)===m.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===m.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===m.Interval}static isList(t){return(t==null?void 0:t.typeId)===m.List}static isStruct(t){return(t==null?void 0:t.typeId)===m.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===m.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===m.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===m.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===m.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===m.Dictionary}static isDenseUnion(t){return bl.isUnion(t)&&t.mode===Ne.Dense}static isSparseUnion(t){return bl.isUnion(t)&&t.mode===Ne.Sparse}get typeId(){return m.NONE}};om=Symbol.toStringTag;K[om]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(K.prototype);let Ri=class extends K{toString(){return"Null"}get typeId(){return m.Null}};cm=Symbol.toStringTag;Ri[cm]=(e=>e[Symbol.toStringTag]="Null")(Ri.prototype);let Li=class extends K{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return m.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};um=Symbol.toStringTag;Li[um]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Li.prototype);let Ea=class extends Li{constructor(){super(!0,32)}get ArrayType(){return Int32Array}};Object.defineProperty(Ea.prototype,"ArrayType",{value:Int32Array});let Ba=class extends K{constructor(t){super(),this.precision=t}get typeId(){return m.Float}get ArrayType(){switch(this.precision){case ge.HALF:return Uint16Array;case ge.SINGLE:return Float32Array;case ge.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};lm=Symbol.toStringTag;Ba[lm]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Ba.prototype);let ec=class extends K{constructor(){super()}get typeId(){return m.Binary}toString(){return"Binary"}};hm=Symbol.toStringTag;ec[hm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(ec.prototype);let nc=class extends K{constructor(){super()}get typeId(){return m.Utf8}toString(){return"Utf8"}};fm=Symbol.toStringTag;nc[fm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(nc.prototype);let ic=class extends K{constructor(){super()}get typeId(){return m.Bool}toString(){return"Bool"}};dm=Symbol.toStringTag;ic[dm]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ic.prototype);let rc=class extends K{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return m.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};pm=Symbol.toStringTag;rc[pm]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(rc.prototype);let sc=class extends K{constructor(t){super(),this.unit=t}get typeId(){return m.Date}toString(){return`Date${(this.unit+1)*32}<${ci[this.unit]}>`}};ym=Symbol.toStringTag;sc[ym]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(sc.prototype);let Ta=class extends K{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return m.Time}toString(){return`Time${this.bitWidth}<${pt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};mm=Symbol.toStringTag;Ta[mm]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Ta.prototype);let ac=class extends K{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return m.Timestamp}toString(){return`Timestamp<${pt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};gm=Symbol.toStringTag;ac[gm]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(ac.prototype);let oc=class extends K{constructor(t){super(),this.unit=t}get typeId(){return m.Interval}toString(){return`Interval<${Ci[this.unit]}>`}};_m=Symbol.toStringTag;oc[_m]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(oc.prototype);let cc=class extends K{constructor(t){super(),this.children=[t]}get typeId(){return m.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};bm=Symbol.toStringTag;cc[bm]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(cc.prototype);let re=class extends K{constructor(t){super(),this.children=t}get typeId(){return m.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};vm=Symbol.toStringTag;re[vm]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(re.prototype);let uc=class extends K{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return m.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};wm=Symbol.toStringTag;uc[wm]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(uc.prototype);let lc=class extends K{constructor(t){super(),this.byteWidth=t}get typeId(){return m.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Sm=Symbol.toStringTag;lc[Sm]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(lc.prototype);let hc=class extends K{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return m.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Im=Symbol.toStringTag;hc[Im]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(hc.prototype);let fc=class extends K{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return m.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};xm=Symbol.toStringTag;fc[xm]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(fc.prototype);const oA=(e=>()=>++e)(-1);let ls=class extends K{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?oA():ln(i)}get typeId(){return m.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};Am=Symbol.toStringTag;ls[Am]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ls.prototype);function Qn(e){const t=e;switch(e.typeId){case m.Decimal:return e.bitWidth/32;case m.Timestamp:return 2;case m.Date:return 1+t.unit;case m.Interval:return 1+t.unit;case m.FixedSizeList:return t.listSize;case m.FixedSizeBinary:return t.byteWidth;default:return 1}}let it=class{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return cA(this,t,n)}getVisitFnByTypeId(t,n=!0){return Tr(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}};function cA(e,t,n=!0){return typeof t=="number"?Tr(e,t,n):typeof t=="string"&&t in m?Tr(e,m[t],n):t&&t instanceof K?Tr(e,zd(t),n):t!=null&&t.type&&t.type instanceof K?Tr(e,zd(t.type),n):Tr(e,m.NONE,n)}function Tr(e,t,n=!0){let i=null;switch(t){case m.Null:i=e.visitNull;break;case m.Bool:i=e.visitBool;break;case m.Int:i=e.visitInt;break;case m.Int8:i=e.visitInt8||e.visitInt;break;case m.Int16:i=e.visitInt16||e.visitInt;break;case m.Int32:i=e.visitInt32||e.visitInt;break;case m.Int64:i=e.visitInt64||e.visitInt;break;case m.Uint8:i=e.visitUint8||e.visitInt;break;case m.Uint16:i=e.visitUint16||e.visitInt;break;case m.Uint32:i=e.visitUint32||e.visitInt;break;case m.Uint64:i=e.visitUint64||e.visitInt;break;case m.Float:i=e.visitFloat;break;case m.Float16:i=e.visitFloat16||e.visitFloat;break;case m.Float32:i=e.visitFloat32||e.visitFloat;break;case m.Float64:i=e.visitFloat64||e.visitFloat;break;case m.Utf8:i=e.visitUtf8;break;case m.Binary:i=e.visitBinary;break;case m.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case m.Date:i=e.visitDate;break;case m.DateDay:i=e.visitDateDay||e.visitDate;break;case m.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case m.Timestamp:i=e.visitTimestamp;break;case m.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case m.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case m.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case m.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case m.Time:i=e.visitTime;break;case m.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case m.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case m.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case m.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case m.Decimal:i=e.visitDecimal;break;case m.List:i=e.visitList;break;case m.Struct:i=e.visitStruct;break;case m.Union:i=e.visitUnion;break;case m.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case m.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case m.Dictionary:i=e.visitDictionary;break;case m.Interval:i=e.visitInterval;break;case m.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case m.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case m.FixedSizeList:i=e.visitFixedSizeList;break;case m.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${m[t]}'`)}function zd(e){switch(e.typeId){case m.Null:return m.Null;case m.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?m.Int8:m.Uint8;case 16:return n?m.Int16:m.Uint16;case 32:return n?m.Int32:m.Uint32;case 64:return n?m.Int64:m.Uint64}return m.Int}case m.Float:switch(e.precision){case ge.HALF:return m.Float16;case ge.SINGLE:return m.Float32;case ge.DOUBLE:return m.Float64}return m.Float;case m.Binary:return m.Binary;case m.Utf8:return m.Utf8;case m.Bool:return m.Bool;case m.Decimal:return m.Decimal;case m.Time:switch(e.unit){case pt.SECOND:return m.TimeSecond;case pt.MILLISECOND:return m.TimeMillisecond;case pt.MICROSECOND:return m.TimeMicrosecond;case pt.NANOSECOND:return m.TimeNanosecond}return m.Time;case m.Timestamp:switch(e.unit){case pt.SECOND:return m.TimestampSecond;case pt.MILLISECOND:return m.TimestampMillisecond;case pt.MICROSECOND:return m.TimestampMicrosecond;case pt.NANOSECOND:return m.TimestampNanosecond}return m.Timestamp;case m.Date:switch(e.unit){case ci.DAY:return m.DateDay;case ci.MILLISECOND:return m.DateMillisecond}return m.Date;case m.Interval:switch(e.unit){case Ci.DAY_TIME:return m.IntervalDayTime;case Ci.YEAR_MONTH:return m.IntervalYearMonth}return m.Interval;case m.Map:return m.Map;case m.List:return m.List;case m.Struct:return m.Struct;case m.Union:switch(e.mode){case Ne.Dense:return m.DenseUnion;case Ne.Sparse:return m.SparseUnion}return m.Union;case m.FixedSizeBinary:return m.FixedSizeBinary;case m.FixedSizeList:return m.FixedSizeList;case m.Dictionary:return m.Dictionary}throw new Error(`Unrecognized type '${m[e.typeId]}'`)}it.prototype.visitInt8=null;it.prototype.visitInt16=null;it.prototype.visitInt32=null;it.prototype.visitInt64=null;it.prototype.visitUint8=null;it.prototype.visitUint16=null;it.prototype.visitUint32=null;it.prototype.visitUint64=null;it.prototype.visitFloat16=null;it.prototype.visitFloat32=null;it.prototype.visitFloat64=null;it.prototype.visitDateDay=null;it.prototype.visitDateMillisecond=null;it.prototype.visitTimestampSecond=null;it.prototype.visitTimestampMillisecond=null;it.prototype.visitTimestampMicrosecond=null;it.prototype.visitTimestampNanosecond=null;it.prototype.visitTimeSecond=null;it.prototype.visitTimeMillisecond=null;it.prototype.visitTimeMicrosecond=null;it.prototype.visitTimeNanosecond=null;it.prototype.visitDenseUnion=null;it.prototype.visitSparseUnion=null;it.prototype.visitIntervalDayTime=null;it.prototype.visitIntervalYearMonth=null;const Em=new Float64Array(1),Er=new Uint32Array(Em.buffer);function Bm(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function uA(e){if(e!==e)return 32256;Em[0]=e;const t=(Er[1]&2147483648)>>16&65535;let n=Er[1]&2146435072,i=0;return n>=1089470464?Er[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Er[1]&1048575)>>10):n<=1056964608?(i=1048576+(Er[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Er[1]&1048575)+512>>10),t|n|i&65535}let W=class extends it{};function G(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const lA=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},bh=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},hA=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},fA=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},Tm=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},dA=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},yi=({values:e},t,n)=>{e[t]=n},vh=({values:e},t,n)=>{e[t]=n},Om=({values:e},t,n)=>{e[t]=uA(n)},pA=(e,t,n)=>{switch(e.type.precision){case ge.HALF:return Om(e,t,n);case ge.SINGLE:case ge.DOUBLE:return vh(e,t,n)}},Nm=({values:e},t,n)=>{lA(e,t,n.valueOf())},Fm=({values:e},t,n)=>{bh(e,t*2,n.valueOf())},yA=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},mA=({values:e,valueOffsets:t},n,i)=>Tm(e,t,n,i),gA=({values:e,valueOffsets:t},n,i)=>{Tm(e,t,n,yh(i))},_A=(e,t,n)=>{e.type.unit===ci.DAY?Nm(e,t,n):Fm(e,t,n)},Dm=({values:e},t,n)=>bh(e,t*2,n/1e3),km=({values:e},t,n)=>bh(e,t*2,n),Cm=({values:e},t,n)=>hA(e,t*2,n),Rm=({values:e},t,n)=>fA(e,t*2,n),bA=(e,t,n)=>{switch(e.type.unit){case pt.SECOND:return Dm(e,t,n);case pt.MILLISECOND:return km(e,t,n);case pt.MICROSECOND:return Cm(e,t,n);case pt.NANOSECOND:return Rm(e,t,n)}},Lm=({values:e},t,n)=>{e[t]=n},Mm=({values:e},t,n)=>{e[t]=n},Um=({values:e},t,n)=>{e[t]=n},Pm=({values:e},t,n)=>{e[t]=n},vA=(e,t,n)=>{switch(e.type.unit){case pt.SECOND:return Lm(e,t,n);case pt.MILLISECOND:return Mm(e,t,n);case pt.MICROSECOND:return Um(e,t,n);case pt.NANOSECOND:return Pm(e,t,n)}},wA=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},SA=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=He.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n.get(++a))},IA=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=He.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const u of c)if(s(i,a,u),++a>=o)break},xA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),AA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),EA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),BA=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),TA=(e,t,n)=>{const i=e.type.children.map(s=>He.getVisitFn(s.type)),r=n instanceof Map?EA(t,n):n instanceof Nt?AA(t,n):Array.isArray(n)?xA(t,n):BA(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},OA=(e,t,n)=>{e.type.mode===Ne.Dense?$m(e,t,n):Vm(e,t,n)},$m=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];He.visit(r,e.valueOffsets[t],n)},Vm=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];He.visit(r,t,n)},NA=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},FA=(e,t,n)=>{e.type.unit===Ci.DAY_TIME?jm(e,t,n):zm(e,t,n)},jm=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},zm=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},DA=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=He.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};W.prototype.visitBool=G(dA);W.prototype.visitInt=G(yi);W.prototype.visitInt8=G(yi);W.prototype.visitInt16=G(yi);W.prototype.visitInt32=G(yi);W.prototype.visitInt64=G(yi);W.prototype.visitUint8=G(yi);W.prototype.visitUint16=G(yi);W.prototype.visitUint32=G(yi);W.prototype.visitUint64=G(yi);W.prototype.visitFloat=G(pA);W.prototype.visitFloat16=G(Om);W.prototype.visitFloat32=G(vh);W.prototype.visitFloat64=G(vh);W.prototype.visitUtf8=G(gA);W.prototype.visitBinary=G(mA);W.prototype.visitFixedSizeBinary=G(yA);W.prototype.visitDate=G(_A);W.prototype.visitDateDay=G(Nm);W.prototype.visitDateMillisecond=G(Fm);W.prototype.visitTimestamp=G(bA);W.prototype.visitTimestampSecond=G(Dm);W.prototype.visitTimestampMillisecond=G(km);W.prototype.visitTimestampMicrosecond=G(Cm);W.prototype.visitTimestampNanosecond=G(Rm);W.prototype.visitTime=G(vA);W.prototype.visitTimeSecond=G(Lm);W.prototype.visitTimeMillisecond=G(Mm);W.prototype.visitTimeMicrosecond=G(Um);W.prototype.visitTimeNanosecond=G(Pm);W.prototype.visitDecimal=G(wA);W.prototype.visitList=G(SA);W.prototype.visitStruct=G(TA);W.prototype.visitUnion=G(OA);W.prototype.visitDenseUnion=G($m);W.prototype.visitSparseUnion=G(Vm);W.prototype.visitDictionary=G(NA);W.prototype.visitInterval=G(FA);W.prototype.visitIntervalDayTime=G(jm);W.prototype.visitIntervalYearMonth=G(zm);W.prototype.visitFixedSizeList=G(DA);W.prototype.visitMap=G(IA);const He=new W,en=Symbol.for("parent"),es=Symbol.for("rowIndex");let wh=class{constructor(t,n){return this[en]=t,this[es]=n,new Proxy(this,new CA)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[es],n=this[en],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=be.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${Ia(t)}: ${Ia(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new kA(this[en],this[es])}},kA=class{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,be.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(wh.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[en]:{writable:!0,enumerable:!1,configurable:!1,value:null},[es]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let CA=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[en].type.children.map(n=>n.name)}has(t,n){return t[en].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[en].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[en].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=be.visit(t[en].children[i],t[es]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[en].type.children.findIndex(s=>s.name===n);return r!==-1?(He.visit(t[en].children[r],t[es],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}},$=class extends it{};function q(e){return(t,n)=>t.getValid(n)?e(t,n):null}const RA=(e,t)=>864e5*e[t],Sh=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),LA=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,MA=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Wm=e=>new Date(e),UA=(e,t)=>Wm(RA(e,t)),PA=(e,t)=>Wm(Sh(e,t)),$A=(e,t)=>null,qm=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},VA=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},Ym=({values:e},t)=>UA(e,t),Hm=({values:e},t)=>PA(e,t*2),Ki=({stride:e,values:t},n)=>t[e*n],jA=({stride:e,values:t},n)=>Bm(t[e*n]),Gm=({values:e},t)=>e[t],zA=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),WA=({values:e,valueOffsets:t},n)=>qm(e,t,n),qA=({values:e,valueOffsets:t},n)=>{const i=qm(e,t,n);return i!==null?ml(i):null},YA=({values:e},t)=>e[t],HA=({type:e,values:t},n)=>e.precision!==ge.HALF?t[n]:Bm(t[n]),GA=(e,t)=>e.type.unit===ci.DAY?Ym(e,t):Hm(e,t),Km=({values:e},t)=>1e3*Sh(e,t*2),Jm=({values:e},t)=>Sh(e,t*2),Qm=({values:e},t)=>LA(e,t*2),Xm=({values:e},t)=>MA(e,t*2),KA=(e,t)=>{switch(e.type.unit){case pt.SECOND:return Km(e,t);case pt.MILLISECOND:return Jm(e,t);case pt.MICROSECOND:return Qm(e,t);case pt.NANOSECOND:return Xm(e,t)}},Zm=({values:e},t)=>e[t],tg=({values:e},t)=>e[t],eg=({values:e},t)=>e[t],ng=({values:e},t)=>e[t],JA=(e,t)=>{switch(e.type.unit){case pt.SECOND:return Zm(e,t);case pt.MILLISECOND:return tg(e,t);case pt.MICROSECOND:return eg(e,t);case pt.NANOSECOND:return ng(e,t)}},QA=({values:e,stride:t},n)=>aA.decimal(e.subarray(t*n,t*(n+1))),XA=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,c=r[0].slice(s,a-s);return new Nt([c])},ZA=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new Ih(a.slice(r,s-r))},t2=(e,t)=>new wh(e,t),e2=(e,t)=>e.type.mode===Ne.Dense?ig(e,t):rg(e,t),ig=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return be.visit(i,e.valueOffsets[t])},rg=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return be.visit(i,t)},n2=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},i2=(e,t)=>e.type.unit===Ci.DAY_TIME?sg(e,t):ag(e,t),sg=({values:e},t)=>e.subarray(2*t,2*(t+1)),ag=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},r2=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new Nt([s])};$.prototype.visitNull=q($A);$.prototype.visitBool=q(VA);$.prototype.visitInt=q(YA);$.prototype.visitInt8=q(Ki);$.prototype.visitInt16=q(Ki);$.prototype.visitInt32=q(Ki);$.prototype.visitInt64=q(Gm);$.prototype.visitUint8=q(Ki);$.prototype.visitUint16=q(Ki);$.prototype.visitUint32=q(Ki);$.prototype.visitUint64=q(Gm);$.prototype.visitFloat=q(HA);$.prototype.visitFloat16=q(jA);$.prototype.visitFloat32=q(Ki);$.prototype.visitFloat64=q(Ki);$.prototype.visitUtf8=q(qA);$.prototype.visitBinary=q(WA);$.prototype.visitFixedSizeBinary=q(zA);$.prototype.visitDate=q(GA);$.prototype.visitDateDay=q(Ym);$.prototype.visitDateMillisecond=q(Hm);$.prototype.visitTimestamp=q(KA);$.prototype.visitTimestampSecond=q(Km);$.prototype.visitTimestampMillisecond=q(Jm);$.prototype.visitTimestampMicrosecond=q(Qm);$.prototype.visitTimestampNanosecond=q(Xm);$.prototype.visitTime=q(JA);$.prototype.visitTimeSecond=q(Zm);$.prototype.visitTimeMillisecond=q(tg);$.prototype.visitTimeMicrosecond=q(eg);$.prototype.visitTimeNanosecond=q(ng);$.prototype.visitDecimal=q(QA);$.prototype.visitList=q(XA);$.prototype.visitStruct=q(t2);$.prototype.visitUnion=q(e2);$.prototype.visitDenseUnion=q(ig);$.prototype.visitSparseUnion=q(rg);$.prototype.visitDictionary=q(n2);$.prototype.visitInterval=q(i2);$.prototype.visitIntervalDayTime=q(sg);$.prototype.visitIntervalYearMonth=q(ag);$.prototype.visitFixedSizeList=q(r2);$.prototype.visitMap=q(ZA);const be=new $,Bn=Symbol.for("keys"),ns=Symbol.for("vals");let Ih=class{constructor(t){return this[Bn]=new Nt([t.children[0]]).memoize(),this[ns]=t.children[1],new Proxy(this,new a2)}[Symbol.iterator](){return new s2(this[Bn],this[ns])}get size(){return this[Bn].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Bn],n=this[ns],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=be.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${Ia(t)}: ${Ia(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},s2=class{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),be.visit(this.vals,t)]})}},a2=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Bn].toArray().map(String)}has(t,n){return t[Bn].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Bn].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[Bn].indexOf(n);if(i!==-1){const r=be.visit(Reflect.get(t,ns),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[Bn].indexOf(n);return r!==-1?(He.visit(Reflect.get(t,ns),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}};Object.defineProperties(Ih.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Bn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ns]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Wd;function og(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Wd=s,s=a,a=Wd),a>r&&(a=r),i?i(e,s,a):[s,a]}const qd=e=>e!==e;function Ts(e){if(typeof e!=="object"||e===null)return qd(e)?qd:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Qx(e,n):!1:e instanceof Map?c2(e):Array.isArray(e)?o2(e):e instanceof Nt?u2(e):l2(e,!0)}function o2(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ts(e[n]);return su(t)}function c2(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Ts(i);return su(n)}function u2(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ts(e.get(n));return su(t)}function l2(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Ts(e[n[r]]);return su(i,n)}function su(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return h2(e,n);case Map:return Yd(e,n,n.keys());case Ih:case wh:case Object:case void 0:return Yd(e,n,t||Object.keys(n))}return n instanceof Nt?f2(e,n):!1}}function h2(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function f2(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Yd(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=i.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=i.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function cg(e,t,n,i){return(n&1<<i)!==0}function d2(e,t,n,i){return(n&1<<i)>>i}function xh(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):dc(new Ah(n,e,t,null,cg)).subarray(0,i)),r}return n}function dc(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}let Ah=class{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function vl(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new Ah(e,t,n-t,e,d2))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return vl(e,t,r)+vl(e,i,n)+p2(e,r>>3,i-r>>3)}function p2(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=Mu(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Mu(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Mu(s.getUint8(r)),r+=1;return i}function Mu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const y2=-1;let Et=class wl{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=y2&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-vl(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof wl?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Qn(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new wl(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,c=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===m.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(xh(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jn.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[Jn.TYPE])&&(a[Jn.TYPE]=s.subarray(t,t+n)),(s=a[Jn.OFFSET])&&(a[Jn.OFFSET]=s.subarray(t,t+n+1))||(s=a[Jn.DATA])&&(a[Jn.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}};Et.prototype.children=Object.freeze([]);let m2=class Io extends it{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new Et(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.data),s=dt(t.nullBitmap),a=zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.data),s=dt(t.nullBitmap),a=zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=dt(t.nullBitmap),a=zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=dt(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=dt(t.nullBitmap),a=vt(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(K.isSparseUnion(n))return new Et(n,i,o,c,[void 0,void 0,s,a],r);const u=zs(t.valueOffsets);return new Et(n,i,o,c,[u,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.indices.ArrayType,t.data),{["dictionary"]:a=new Nt([new Io().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=dt(t.nullBitmap),s=vt(n.ArrayType,t.data),{["length"]:a=s.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Io().visit({type:n.valueType})}=t,s=dt(t.nullBitmap),{["length"]:a=r.length/Qn(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Et(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new Io().visit({type:n.childType})}=t,s=dt(t.nullBitmap),a=zs(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new Et(n,i,o,c,[a,void 0,s],[r])}};function nt(e){return new m2().visit(e)}let Hd=class{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function ug(e){return e.reduce((t,n)=>t+n.nullCount,0)}function lg(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function hg(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=i)break;if(n>=c+u)continue;if(c>=n&&c+u<=i){r.push(o);continue}const l=Math.max(0,n-c),h=Math.min(i-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Eh(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function Bh(e,t){return e.getValid(t)}function is(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return Eh(i,this._offsets,n,t)}}function fg(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=Eh(s,this._offsets,i,n);return t=void 0,a}}function dg(e){let t;function n(i,r,s){let a=s,o=0,c=0;for(let u=r-1,l=i.length;++u<l;){const h=i[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):Eh(s,this._offsets,r,n);return t=void 0,a}}let V=class extends it{};function g2(e,t){return t===null&&e.length>0?0:-1}function _2(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new Ah(n,e.offset+(t||0),e.length,n,cg)){if(!r)return i;++i}return-1}function Q(e,t,n){if(t===void 0)return-1;if(t===null)return _2(e,n);const i=be.getVisitFn(e),r=Ts(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function pg(e,t,n){const i=be.getVisitFn(e),r=Ts(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}V.prototype.visitNull=g2;V.prototype.visitBool=Q;V.prototype.visitInt=Q;V.prototype.visitInt8=Q;V.prototype.visitInt16=Q;V.prototype.visitInt32=Q;V.prototype.visitInt64=Q;V.prototype.visitUint8=Q;V.prototype.visitUint16=Q;V.prototype.visitUint32=Q;V.prototype.visitUint64=Q;V.prototype.visitFloat=Q;V.prototype.visitFloat16=Q;V.prototype.visitFloat32=Q;V.prototype.visitFloat64=Q;V.prototype.visitUtf8=Q;V.prototype.visitBinary=Q;V.prototype.visitFixedSizeBinary=Q;V.prototype.visitDate=Q;V.prototype.visitDateDay=Q;V.prototype.visitDateMillisecond=Q;V.prototype.visitTimestamp=Q;V.prototype.visitTimestampSecond=Q;V.prototype.visitTimestampMillisecond=Q;V.prototype.visitTimestampMicrosecond=Q;V.prototype.visitTimestampNanosecond=Q;V.prototype.visitTime=Q;V.prototype.visitTimeSecond=Q;V.prototype.visitTimeMillisecond=Q;V.prototype.visitTimeMicrosecond=Q;V.prototype.visitTimeNanosecond=Q;V.prototype.visitDecimal=Q;V.prototype.visitList=Q;V.prototype.visitStruct=Q;V.prototype.visitUnion=Q;V.prototype.visitDenseUnion=pg;V.prototype.visitSparseUnion=pg;V.prototype.visitDictionary=Q;V.prototype.visitInterval=Q;V.prototype.visitIntervalDayTime=Q;V.prototype.visitIntervalYearMonth=Q;V.prototype.visitFixedSizeList=Q;V.prototype.visitMap=Q;const pc=new V;let j=class extends it{};function Y(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===m.Timestamp||t instanceof Li&&t.bitWidth!==64||t instanceof Ta&&t.bitWidth!==64||t instanceof Ba&&t.precision!==ge.HALF))return new Hd(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Hd(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new b2(a)})}let b2=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};j.prototype.visitNull=Y;j.prototype.visitBool=Y;j.prototype.visitInt=Y;j.prototype.visitInt8=Y;j.prototype.visitInt16=Y;j.prototype.visitInt32=Y;j.prototype.visitInt64=Y;j.prototype.visitUint8=Y;j.prototype.visitUint16=Y;j.prototype.visitUint32=Y;j.prototype.visitUint64=Y;j.prototype.visitFloat=Y;j.prototype.visitFloat16=Y;j.prototype.visitFloat32=Y;j.prototype.visitFloat64=Y;j.prototype.visitUtf8=Y;j.prototype.visitBinary=Y;j.prototype.visitFixedSizeBinary=Y;j.prototype.visitDate=Y;j.prototype.visitDateDay=Y;j.prototype.visitDateMillisecond=Y;j.prototype.visitTimestamp=Y;j.prototype.visitTimestampSecond=Y;j.prototype.visitTimestampMillisecond=Y;j.prototype.visitTimestampMicrosecond=Y;j.prototype.visitTimestampNanosecond=Y;j.prototype.visitTime=Y;j.prototype.visitTimeSecond=Y;j.prototype.visitTimeMillisecond=Y;j.prototype.visitTimeMicrosecond=Y;j.prototype.visitTimeNanosecond=Y;j.prototype.visitDecimal=Y;j.prototype.visitList=Y;j.prototype.visitStruct=Y;j.prototype.visitUnion=Y;j.prototype.visitDenseUnion=Y;j.prototype.visitSparseUnion=Y;j.prototype.visitDictionary=Y;j.prototype.visitInterval=Y;j.prototype.visitIntervalDayTime=Y;j.prototype.visitIntervalYearMonth=Y;j.prototype.visitFixedSizeList=Y;j.prototype.visitMap=Y;const Th=new j,v2=(e,t)=>e+t;class Ji extends it{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===pt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+Ln.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+Ln.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const w2=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),S2=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),I2=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=Ln.getVisitFn(r.type),c=r.slice(s,a-s);let u=8;for(let l=-1,h=a-s;++l<h;)u+=o(c,l);return u},x2=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=Ln.getVisitFn(i.type);let a=0;for(let o=-1,c=r.length;++o<c;)a+=s(r,o);return a},A2=(e,t)=>e.type.mode===Ne.Dense?yg(e,t):mg(e,t),yg=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+Ln.visit(t[s],i[r])},mg=({children:e},t)=>4+Ln.visitMany(e,e.map(()=>t)).reduce(v2,0);Ji.prototype.visitUtf8=w2;Ji.prototype.visitBinary=S2;Ji.prototype.visitList=I2;Ji.prototype.visitFixedSizeList=x2;Ji.prototype.visitUnion=A2;Ji.prototype.visitDenseUnion=yg;Ji.prototype.visitSparseUnion=mg;const Ln=new Ji;var gg;const _g={},bg={};let Nt=class ir{constructor(t){var n,i,r;const s=t[0]instanceof ir?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof Et)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u,byteLength:l}=_g[a.typeId],h=s[0];this.isValid=d=>Bh(h,d),this.get=d=>o(h,d),this.set=(d,y)=>c(h,d,y),this.indexOf=d=>u(h,d),this.getByteLength=d=>l(h,d),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,bg[a.typeId]),this._offsets=lg(s);break}this.data=s,this.type=a,this.stride=Qn(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=ug(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${m[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return Th.visit(this)}concat(...t){return new ir(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ir(og(this,t,n,({data:i,_offsets:r},s,a)=>hg(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case m.Int:case m.Float:case m.Decimal:case m.Time:case m.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ir(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return K.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(K.isDictionary(this.type)){const t=new Gd(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ir(n)}return new Gd(this)}unmemoize(){if(K.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new ir(n)}return this}};gg=Symbol.toStringTag;Nt[gg]=(e=>{e.type=K.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(m).map(n=>m[n]).filter(n=>typeof n=="number"&&n!==m.NONE);for(const n of t){const i=be.getVisitFnByTypeId(n),r=He.getVisitFnByTypeId(n),s=pc.getVisitFnByTypeId(n),a=Ln.getVisitFnByTypeId(n);_g[n]={get:i,set:r,indexOf:s,byteLength:a},bg[n]=Object.create(e,{isValid:{value:is(Bh)},get:{value:is(be.getVisitFnByTypeId(n))},set:{value:fg(He.getVisitFnByTypeId(n))},indexOf:{value:dg(pc.getVisitFnByTypeId(n))},getByteLength:{value:is(Ln.getVisitFnByTypeId(n))}})}return"Vector"})(Nt.prototype);let Gd=class vg extends Nt{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=n.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new vg(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Nt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}},Sl=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}};const Uu=2,Tn=4,ni=4,x=4,Ni=new Int32Array(2),Kd=new Float32Array(Ni.buffer),Jd=new Float64Array(Ni.buffer),ho=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Il;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Il||(Il={}));let Mi=class wg{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new wg(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ni[0]=this.readInt32(t),Kd[0]}readFloat64(t){return Ni[ho?0:1]=this.readInt32(t),Ni[ho?1:0]=this.readInt32(t+4),Jd[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Kd[0]=n,this.writeInt32(t,Ni[0])}writeFloat64(t,n){Jd[0]=n,this.writeInt32(t,Ni[ho?0:1]),this.writeInt32(t+4,Ni[ho?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Tn+ni)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<ni;n++)t+=String.fromCharCode(this.readInt8(this.position_+Tn+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);t+=Tn;const r=this.bytes_.subarray(t,t+i);return n===Il.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Tn}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=ni)throw new Error("FlatBuffers: file identifier must be length "+ni);for(let n=0;n<ni;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Tn+n))return!1;return!0}createScalarList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s)}return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}},au=class Sg{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=Mi.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=Sg.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Mi.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(Tn,0),this.writeInt32(this.offset()-t+Tn)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*Uu;this.addInt16(s);let a=0;const o=this.space;t:for(n=0;n<this.vtables.length;n++){const c=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(c)){for(let u=Uu;u<s;u+=Uu)if(this.bb.readInt16(o+u)!=this.bb.readInt16(c+u))continue t;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?x:0;if(n){const s=n;if(this.prep(this.minalign,Tn+ni+r),s.length!=ni)throw new TypeError("FlatBuffers: file identifier must be length "+ni);for(let a=ni-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Tn+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(r)&&this.bb.readInt16(r+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Tn,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}},We=class rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+x),(n||new rr).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return rr.startKeyValue(t),rr.addKey(t,n),rr.addValue(t,i),rr.endKeyValue(t)}};var hs;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(hs||(hs={}));var fs;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(fs||(fs={}));var yc;(function(e){e[e.DenseArray=0]="DenseArray"})(yc||(yc={}));let Hr=class sr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+x),(n||new sr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return sr.startInt(t),sr.addBitWidth(t,n),sr.addIsSigned(t,i),sr.endInt(t)}},Or=class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+x),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Hr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):yc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,yc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}},Qd=class Qs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Qs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+x),(n||new Qs).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Qs.startBinary(t),Qs.endBinary(t)}},Xd=class Xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+x),(n||new Xs).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Xs.startBool(t),Xs.endBool(t)}};var mc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(mc||(mc={}));let xo=class Nr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Nr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+x),(n||new Nr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,mc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Nr.startDate(t),Nr.addUnit(t,n),Nr.endDate(t)}},Fr=class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+x),(n||new Ai).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return Ai.startDecimal(t),Ai.addPrecision(t,n),Ai.addScale(t,i),Ai.addBitWidth(t,r),Ai.endDecimal(t)}};var ds;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ds||(ds={}));let Ao=class Dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+x),(n||new Dr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Dr.startFixedSizeBinary(t),Dr.addByteWidth(t,n),Dr.endFixedSizeBinary(t)}},Eo=class kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+x),(n||new kr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return kr.startFixedSizeList(t),kr.addListSize(t,n),kr.endFixedSizeList(t)}};var gc;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(gc||(gc={}));let Bo=class Cr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Cr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+x),(n||new Cr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):gc.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,gc.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Cr.startFloatingPoint(t),Cr.addPrecision(t,n),Cr.endFloatingPoint(t)}};var _c;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(_c||(_c={}));let To=class Rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+x),(n||new Rr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_c.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,_c.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Rr.startInterval(t),Rr.addUnit(t,n),Rr.endInterval(t)}},Zd=class Zs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+x),(n||new Zs).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Zs.startList(t),Zs.endList(t)}},Oo=class Lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+x),(n||new Lr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Lr.startMap(t),Lr.addKeysSorted(t,n),Lr.endMap(t)}},tp=class ta{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new ta).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+x),(n||new ta).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ta.startNull(t),ta.endNull(t)}},ep=class ea{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+x),(n||new ea).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ea.startStruct_(t),ea.endStruct_(t)}},na=class ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+x),(n||new ar).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ds.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ds.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return ar.startTime(t),ar.addUnit(t,n),ar.addBitWidth(t,i),ar.endTime(t)}},ia=class or{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new or).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+x),(n||new or).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ds.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ds.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return or.startTimestamp(t),or.addUnit(t,n),or.addTimezone(t,i),or.endTimestamp(t)}};var bc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(bc||(bc={}));let cr=class ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+x),(n||new ur).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bc.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,bc.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return ur.startUnion(t),ur.addMode(t,n),ur.addTypeIds(t,i),ur.endUnion(t)}},np=class ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+x),(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ra.startUtf8(t),ra.endUtf8(t)}};var Bt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Bt||(Bt={}));let Le=class No{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new No).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+x),(n||new No).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Bt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Or).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new No).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Bt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},wn=class Yn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Yn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+x),(n||new Yn).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):fs.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Le).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,fs.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return Yn.startSchema(t),Yn.addEndianness(t,n),Yn.addFields(t,i),Yn.addCustomMetadata(t,r),Yn.addFeatures(t,s),Yn.endSchema(t)}},gn=class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+x),(n||new Al).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hs.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Sl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Sl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,hs.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}},Ot=class lr{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=Bl(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new lr(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new lr(n,this.metadata)}assign(...t){const n=t[0]instanceof lr?t[0]:Array.isArray(t[0])?new lr(t[0]):new lr(t),i=[...this.fields],r=fo(fo(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const c=i.findIndex(u=>u.name===o.name);return~c?(i[c]=o.clone({metadata:fo(fo(new Map,i[c].metadata),o.metadata)}))&&!1:!0}),a=Bl(s,new Map);return new lr([...i,...s],r,new Map([...this.dictionaries,...a]))}};Ot.prototype.fields=null;Ot.prototype.metadata=null;Ot.prototype.dictionaries=null;let Rt=class El{static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new El(`${n}`,i,r,s)}constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],El.new(n,i,r,s)}};Rt.prototype.type=null;Rt.prototype.name=null;Rt.prototype.nullable=null;Rt.prototype.metadata=null;function fo(e,t){return new Map([...e||new Map,...t||new Map])}function Bl(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(K.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Bl(s.children,t)}return t}var E2=au,B2=Mi;let Oa=class{static decode(t){t=new B2(dt(t));const n=gn.getRootAsFooter(t),i=Ot.decode(n.schema());return new T2(i,n)}static encode(t){const n=new E2,i=Ot.encode(n,t.schema);gn.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())ps.encode(n,a);const r=n.endVector();gn.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())ps.encode(n,a);const s=n.endVector();return gn.startFooter(n),gn.addSchema(n,i),gn.addVersion(n,Oe.V4),gn.addRecordBatches(n,r),gn.addDictionaries(n,s),gn.finishFooterBuffer(n,gn.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Oe.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}},T2=class extends Oa{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return ps.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return ps.decode(n)}return null}},ps=class Ig{static decode(t){return new Ig(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=BigInt(n.offset),s=BigInt(n.bodyLength);return Sl.createBlock(t,r,i,s)}constructor(t,n,i){this.metaDataLength=t,this.offset=ln(i),this.bodyLength=ln(n)}};const Ft=Object.freeze({done:!0,value:void 0});class ip{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}let Oh=class{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},O2=class extends Oh{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ft);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Pe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Pe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return A(this,void 0,void 0,function*(){return yield this.abort(t),Ft})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),Ft})}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Ft)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Fo=class extends O2{write(t){if((t=dt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?ml(this.toUint8Array(!0)):this.toUint8Array(!1).then(ml)}toUint8Array(t=!1){return t?Rn(this._values)[0]:(()=>A(this,void 0,void 0,function*(){var n,i,r,s;const a=[];let o=0;try{for(var c=!0,u=qe(this),l;l=yield u.next(),n=l.done,!n;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){i={error:h}}finally{try{!c&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}return Rn(a,o)[0]}))()}};class vc{constructor(t){t&&(this.source=new N2(Pe.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ys{constructor(t){t instanceof ys?this.source=t.source:t instanceof Fo?this.source=new nr(Pe.fromAsyncIterable(t)):im(t)?this.source=new nr(Pe.fromNodeStream(t)):mh(t)?this.source=new nr(Pe.fromDOMStream(t)):nm(t)?this.source=new nr(Pe.fromDOMStream(t.body)):Wa(t)?this.source=new nr(Pe.fromIterable(t)):vr(t)?this.source=new nr(Pe.fromAsyncIterable(t)):Bs(t)&&(this.source=new nr(Pe.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class N2{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ft)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ft)}}class nr{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return A(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return A(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||Ft;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return A(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||Ft;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class rp extends vc{constructor(t,n){super(),this.position=0,this.buffer=dt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class wc extends ys{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>A(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return A(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return A(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const c=Math.min(i,s+Math.min(i-s,t)),u=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=o)<c&&(a+=o)<u.byteLength;)({bytesRead:o}=yield n.read(u,a,u.byteLength-a,s));return u}return null})}readAt(t,n){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return A(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const F2=65536;function Gr(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const ms=8,Nh=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class xg{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?F2:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Gr(this.buffer[1])} ${Gr(this.buffer[0])}`}}let Ut=class Hn extends xg{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Hn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Hn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new Hn(n);for(let s=0;s<i;){const a=ms<i-s?ms:i-s,o=new Hn(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),c=new Hn(new Uint32Array([Nh[a],0]));r.times(c),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Hn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Hn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Hn(new Uint32Array(t.buffer)).plus(n)}},ya=class Gn extends xg{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Gn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Gn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new Gn(n);for(let a=i?1:0;a<r;){const o=ms<r-a?ms:r-a,c=new Gn(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),u=new Gn(new Uint32Array([Nh[o],0]));s.times(u),s.plus(c),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Gn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Gn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Gn(new Uint32Array(t.buffer)).plus(n)}};class Sn{constructor(t){this.buffer=t}high(){return new ya(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ya(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Ut(new Uint32Array([this.buffer[3],0])),i=new Ut(new Uint32Array([this.buffer[2],0])),r=new Ut(new Uint32Array([this.buffer[1],0])),s=new Ut(new Uint32Array([this.buffer[0],0])),a=new Ut(new Uint32Array([t.buffer[3],0])),o=new Ut(new Uint32Array([t.buffer[2],0])),c=new Ut(new Uint32Array([t.buffer[1],0])),u=new Ut(new Uint32Array([t.buffer[0],0]));let l=Ut.multiply(s,u);this.buffer[0]=l.low();const h=new Ut(new Uint32Array([l.high(),0]));return l=Ut.multiply(r,u),h.plus(l),l=Ut.multiply(s,c),h.plus(l),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(l)?1:0,this.buffer[2]=h.high(),new Ut(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Ut.multiply(i,u)).plus(Ut.multiply(r,c)).plus(Ut.multiply(s,o)),this.buffer[3]+=Ut.multiply(n,u).plus(Ut.multiply(i,c)).plus(Ut.multiply(r,o)).plus(Ut.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Gr(this.buffer[3])} ${Gr(this.buffer[2])} ${Gr(this.buffer[1])} ${Gr(this.buffer[0])}`}static multiply(t,n){return new Sn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Sn(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Sn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Sn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new Sn(n);for(let a=i?1:0;a<r;){const o=ms<r-a?ms:r-a,c=new Sn(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),u=new Sn(new Uint32Array([Nh[o],0,0,0]));s.times(u),s.plus(c),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)Sn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class Ag extends it{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof Rt?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return nt({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Ne.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return nt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class D2 extends Ag{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):dc(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return vt(Uint8Array,vt(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return vt(Uint8Array,vt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return K.isTimestamp(t)||(K.isInt(t)||K.isTime(t))&&t.bitWidth===64||K.isDate(t)&&t.unit===ci.MILLISECOND?vt(Uint8Array,ya.convertArray(i[n])):K.isDecimal(t)?vt(Uint8Array,Sn.convertArray(i[n])):K.isBinary(t)||K.isFixedSizeBinary(t)?k2(i[n]):K.isBool(t)?dc(i[n]):K.isUtf8(t)?yh(i[n].join("")):vt(Uint8Array,vt(t.ArrayType,i[n].map(r=>+r)))}}function k2(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}let z=class extends it{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}};function Ie(e,t){return t instanceof e.constructor}function qa(e,t){return e===t||Ie(e,t)}function mi(e,t){return e===t||Ie(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function ou(e,t){return e===t||Ie(e,t)&&e.precision===t.precision}function C2(e,t){return e===t||Ie(e,t)&&e.byteWidth===t.byteWidth}function Fh(e,t){return e===t||Ie(e,t)&&e.unit===t.unit}function Ya(e,t){return e===t||Ie(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ha(e,t){return e===t||Ie(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function R2(e,t){return e===t||Ie(e,t)&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function L2(e,t){return e===t||Ie(e,t)&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function Dh(e,t){return e===t||Ie(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Ui.compareManyFields(e.children,t.children)}function M2(e,t){return e===t||Ie(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Ui.visit(e.indices,t.indices)&&Ui.visit(e.dictionary,t.dictionary)}function kh(e,t){return e===t||Ie(e,t)&&e.unit===t.unit}function U2(e,t){return e===t||Ie(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}function P2(e,t){return e===t||Ie(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Ui.compareManyFields(e.children,t.children)}z.prototype.visitNull=qa;z.prototype.visitBool=qa;z.prototype.visitInt=mi;z.prototype.visitInt8=mi;z.prototype.visitInt16=mi;z.prototype.visitInt32=mi;z.prototype.visitInt64=mi;z.prototype.visitUint8=mi;z.prototype.visitUint16=mi;z.prototype.visitUint32=mi;z.prototype.visitUint64=mi;z.prototype.visitFloat=ou;z.prototype.visitFloat16=ou;z.prototype.visitFloat32=ou;z.prototype.visitFloat64=ou;z.prototype.visitUtf8=qa;z.prototype.visitBinary=qa;z.prototype.visitFixedSizeBinary=C2;z.prototype.visitDate=Fh;z.prototype.visitDateDay=Fh;z.prototype.visitDateMillisecond=Fh;z.prototype.visitTimestamp=Ya;z.prototype.visitTimestampSecond=Ya;z.prototype.visitTimestampMillisecond=Ya;z.prototype.visitTimestampMicrosecond=Ya;z.prototype.visitTimestampNanosecond=Ya;z.prototype.visitTime=Ha;z.prototype.visitTimeSecond=Ha;z.prototype.visitTimeMillisecond=Ha;z.prototype.visitTimeMicrosecond=Ha;z.prototype.visitTimeNanosecond=Ha;z.prototype.visitDecimal=qa;z.prototype.visitList=R2;z.prototype.visitStruct=L2;z.prototype.visitUnion=Dh;z.prototype.visitDenseUnion=Dh;z.prototype.visitSparseUnion=Dh;z.prototype.visitDictionary=M2;z.prototype.visitInterval=kh;z.prototype.visitIntervalDayTime=kh;z.prototype.visitIntervalYearMonth=kh;z.prototype.visitFixedSizeList=U2;z.prototype.visitMap=P2;const Ui=new z;function Tl(e,t){return Ui.compareSchemas(e,t)}function Pu(e,t){return $2(e,t.map(n=>n.data.concat()))}function $2(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=V2(n,a,l,t,r),a>0&&(i[s++]=nt({type:new re(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new de(e,h))]}function V2(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const u=n[o],l=u==null?void 0:u.length;if(l>=t)l===t?n[o]=u:(n[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:nt({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var Eg;let Pi=class hr{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new Ot([]),this._offsets=[0],this;let r,s;t[0]instanceof Ot&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof de)return[c];if(c instanceof hr)return c.batches;if(c instanceof Et){if(c.type instanceof re)return[new de(new Ot(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(y=>new Nt([c[y]])),h=new Ot(u.map((y,g)=>new Rt(String(y),l[g].type))),[,d]=Pu(h,l);return d.length===0?[new de(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new Ot([]),!(r instanceof Ot))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof de))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Tl(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??lg(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=ug(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Th.visit(new Nt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new hr(n,i.map(r=>new de(n,r)))}slice(t,n){const i=this.schema;[t,n]=og({length:this.numRows},t,n);const r=hg(this.data,this._offsets,t,n);return new hr(i,r.map(s=>new de(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=nt({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Nt(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Nt([nt({type:new Ri,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,n],[i,r]=Pu(i,o)}return new hr(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new hr(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=n.findIndex(y=>y.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new hr(...Pu(s,a))}};Eg=Symbol.toStringTag;Pi[Eg]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=is(Bh),e.get=is(be.getVisitFn(m.Struct)),e.set=fg(He.getVisitFn(m.Struct)),e.indexOf=dg(pc.getVisitFn(m.Struct)),e.getByteLength=is(Ln.getVisitFn(m.Struct)),"Table"))(Pi.prototype);var Bg;let de=class sa{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ot))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=nt({nullCount:0,type:new re(this.schema.fields),children:this.schema.fields.map(n=>nt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Et))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=sp(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((c,u,l)=>(c.children[l]=n[u],c.length=Math.max(c.length,n[u].length),c.fields[l]=Rt.new({name:u,type:n[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new Ot(i),o=nt({type:new re(i),length:s,children:r,nullCount:0});[this.schema,this.data]=sp(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Tg(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return be.visit(this.data,t)}set(t,n){return He.visit(this.data,t,n)}indexOf(t,n){return pc.visit(this.data,t,n)}getByteLength(t){return Ln.visit(this.data,t)}[Symbol.iterator](){return Th.visit(new Nt([this.data]))}toArray(){return[...this]}concat(...t){return new Pi(this.schema,[this,...t])}slice(t,n){const[i]=new Nt([this.data]).slice(t,n).data;return new sa(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Nt([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new Nt([nt({type:new Ri,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new Ot(s,new Map(this.schema.metadata)),r=nt({type:new re(s),children:a})}return new sa(i,r)}select(t){const n=this.schema.select(t),i=new re(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new sa(n,nt({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=nt({type:new re(n.fields),length:this.numRows,children:i});return new sa(n,r)}};Bg=Symbol.toStringTag;de[Bg]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(de.prototype);function sp(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==n)&&(r[o]=c.clone({nullable:!0}),s[o]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:nt({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),nt({type:new re(r),length:n,children:s})]}function Tg(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(K.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&Tg(a.children,o.children,n)}return n}let Ch=class extends de{constructor(t){const n=t.fields.map(r=>nt({type:r.type})),i=nt({type:new re(t.fields),nullCount:0,children:n});super(t,i)}};var Sc;(function(e){e[e.BUFFER=0]="BUFFER"})(Sc||(Sc={}));var Ic;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Ic||(Ic={}));let j2=class fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+x),(n||new fr).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Ic.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Sc.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Ic.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Sc.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return fr.startBodyCompression(t),fr.addCodec(t,n),fr.addMethod(t,i),fr.endBodyCompression(t)}},Og=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Ng=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Xn=class Ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+x),(n||new Ol).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Ng).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Og).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new j2).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Mr=class Nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+x),(n||new Nl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Xn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var xc;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(xc||(xc={}));let Ii=class bn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new bn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+x),(n||new bn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hs.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):xc.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new We).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,hs.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,xc.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return bn.startMessage(t),bn.addVersion(t,n),bn.addHeaderType(t,i),bn.addHeader(t,r),bn.addBodyLength(t,s),bn.addCustomMetadata(t,a),bn.endMessage(t)}},z2=class extends it{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return tp.startNull(n),tp.endNull(n)}visitInt(t,n){return Hr.startInt(n),Hr.addBitWidth(n,t.bitWidth),Hr.addIsSigned(n,t.isSigned),Hr.endInt(n)}visitFloat(t,n){return Bo.startFloatingPoint(n),Bo.addPrecision(n,t.precision),Bo.endFloatingPoint(n)}visitBinary(t,n){return Qd.startBinary(n),Qd.endBinary(n)}visitBool(t,n){return Xd.startBool(n),Xd.endBool(n)}visitUtf8(t,n){return np.startUtf8(n),np.endUtf8(n)}visitDecimal(t,n){return Fr.startDecimal(n),Fr.addScale(n,t.scale),Fr.addPrecision(n,t.precision),Fr.addBitWidth(n,t.bitWidth),Fr.endDecimal(n)}visitDate(t,n){return xo.startDate(n),xo.addUnit(n,t.unit),xo.endDate(n)}visitTime(t,n){return na.startTime(n),na.addUnit(n,t.unit),na.addBitWidth(n,t.bitWidth),na.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return ia.startTimestamp(n),ia.addUnit(n,t.unit),i!==void 0&&ia.addTimezone(n,i),ia.endTimestamp(n)}visitInterval(t,n){return To.startInterval(n),To.addUnit(n,t.unit),To.endInterval(n)}visitList(t,n){return Zd.startList(n),Zd.endList(n)}visitStruct(t,n){return ep.startStruct_(n),ep.endStruct_(n)}visitUnion(t,n){cr.startTypeIdsVector(n,t.typeIds.length);const i=cr.createTypeIdsVector(n,t.typeIds);return cr.startUnion(n),cr.addMode(n,t.mode),cr.addTypeIds(n,i),cr.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return Or.startDictionaryEncoding(n),Or.addId(n,BigInt(t.id)),Or.addIsOrdered(n,t.isOrdered),i!==void 0&&Or.addIndexType(n,i),Or.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ao.startFixedSizeBinary(n),Ao.addByteWidth(n,t.byteWidth),Ao.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Eo.startFixedSizeList(n),Eo.addListSize(n,t.listSize),Eo.endFixedSizeList(n)}visitMap(t,n){return Oo.startMap(n),Oo.addKeysSorted(n,t.keysSorted),Oo.endMap(n)}};const $u=new z2;function W2(e,t=new Map){return new Ot(Y2(e,t),Do(e.customMetadata),t)}function Fg(e){return new Fe(e.count,Dg(e.columns),kg(e.columns))}function q2(e){return new Mn(Fg(e.data),e.id,e.isDelta)}function Y2(e,t){return(e.fields||[]).filter(Boolean).map(n=>Rt.fromJSON(n,t))}function ap(e,t){return(e.children||[]).filter(Boolean).map(n=>Rt.fromJSON(n,t))}function Dg(e){return(e||[]).reduce((t,n)=>[...t,new Ir(n.count,H2(n.VALIDITY)),...Dg(n.children)],[])}function kg(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new Dn(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new Dn(t.length,r.TYPE.length)),r.OFFSET&&t.push(new Dn(t.length,r.OFFSET.length)),r.DATA&&t.push(new Dn(t.length,r.DATA.length)),t=kg(r.children,t)}return t}function H2(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function G2(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=cp(e,ap(e,t)),r=new Rt(e.name,a,e.nullable,Do(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?op(i):new Ea,o=new ls(t.get(n),i,n,s.isOrdered),r=new Rt(e.name,o,e.nullable,Do(e.customMetadata))):(i=(i=s.indexType)?op(i):new Ea,t.set(n,a=cp(e,ap(e,t))),o=new ls(a,i,n,s.isOrdered),r=new Rt(e.name,o,e.nullable,Do(e.customMetadata))),r||null}function Do(e){return new Map(Object.entries(e||{}))}function op(e){return new Li(e.isSigned,e.bitWidth)}function cp(e,t){const n=e.type.name;switch(n){case"NONE":return new Ri;case"null":return new Ri;case"binary":return new ec;case"utf8":return new nc;case"bool":return new ic;case"list":return new cc((t||[])[0]);case"struct":return new re(t||[]);case"struct_":return new re(t||[])}switch(n){case"int":{const i=e.type;return new Li(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Ba(ge[i.precision])}case"decimal":{const i=e.type;return new rc(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new sc(ci[i.unit])}case"time":{const i=e.type;return new Ta(pt[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new ac(pt[i.unit],i.timezone)}case"interval":{const i=e.type;return new oc(Ci[i.unit])}case"union":{const i=e.type;return new uc(Ne[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new lc(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new hc(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new fc((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var K2=au,J2=Mi;let ai=class Ur{static fromJSON(t,n){const i=new Ur(0,Oe.V4,n);return i._createHeader=Q2(t,n),i}static decode(t){t=new J2(dt(t));const n=Ii.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Ur(i,r,s);return a._createHeader=X2(n,s),a}static encode(t){const n=new K2;let i=-1;return t.isSchema()?i=Ot.encode(n,t.header()):t.isRecordBatch()?i=Fe.encode(n,t.header()):t.isDictionaryBatch()&&(i=Mn.encode(n,t.header())),Ii.startMessage(n),Ii.addVersion(n,Oe.V4),Ii.addHeader(n,i),Ii.addHeaderType(n,t.headerType),Ii.addBodyLength(n,BigInt(t.bodyLength)),Ii.finishMessageBuffer(n,Ii.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ot)return new Ur(0,Oe.V4,mt.Schema,t);if(t instanceof Fe)return new Ur(n,Oe.V4,mt.RecordBatch,t);if(t instanceof Mn)return new Ur(n,Oe.V4,mt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===mt.Schema}isRecordBatch(){return this.headerType===mt.RecordBatch}isDictionaryBatch(){return this.headerType===mt.DictionaryBatch}constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=ln(t)}},Fe=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=ln(t)}},Mn=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=ln(n)}},Dn=class{constructor(t,n){this.offset=ln(t),this.length=ln(n)}},Ir=class{constructor(t,n){this.length=ln(t),this.nullCount=ln(n)}};function Q2(e,t){return()=>{switch(t){case mt.Schema:return Ot.fromJSON(e);case mt.RecordBatch:return Fe.fromJSON(e);case mt.DictionaryBatch:return Mn.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${mt[t]}, type: ${t} }`)}}function X2(e,t){return()=>{switch(t){case mt.Schema:return Ot.decode(e.header(new wn));case mt.RecordBatch:return Fe.decode(e.header(new Xn),e.version());case mt.DictionaryBatch:return Mn.decode(e.header(new Mr),e.version())}throw new Error(`Unrecognized Message type: { name: ${mt[t]}, type: ${t} }`)}}Rt.encode=uE;Rt.decode=oE;Rt.fromJSON=G2;Ot.encode=cE;Ot.decode=Z2;Ot.fromJSON=W2;Fe.encode=lE;Fe.decode=tE;Fe.fromJSON=Fg;Mn.encode=hE;Mn.decode=eE;Mn.fromJSON=q2;Ir.encode=fE;Ir.decode=iE;Dn.encode=dE;Dn.decode=nE;function Z2(e,t=new Map){const n=aE(e,t);return new Ot(n,ko(e),t)}function tE(e,t=Oe.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Fe(e.length(),rE(e),sE(e,t))}function eE(e,t=Oe.V4){return new Mn(Fe.decode(e.data(),t),e.id(),e.isDelta())}function nE(e){return new Dn(e.offset(),e.length())}function iE(e){return new Ir(e.length(),e.nullCount())}function rE(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=Ir.decode(n));return t}function sE(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<Oe.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Dn.decode(i));return n}function aE(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=Rt.decode(i,t));return n}function up(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=Rt.decode(i,t));return n}function oE(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=hp(e,up(e,t)),i=new Rt(e.name(),r,e.nullable(),ko(e))):t.has(n=ln(o.id()))?(s=(s=o.indexType())?lp(s):new Ea,a=new ls(t.get(n),s,n,o.isOrdered()),i=new Rt(e.name(),a,e.nullable(),ko(e))):(s=(s=o.indexType())?lp(s):new Ea,t.set(n,r=hp(e,up(e,t))),a=new ls(r,s,n,o.isOrdered()),i=new Rt(e.name(),a,e.nullable(),ko(e))),i||null}function ko(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function lp(e){return new Li(e.isSigned(),e.bitWidth())}function hp(e,t){const n=e.typeType();switch(n){case Bt.NONE:return new Ri;case Bt.Null:return new Ri;case Bt.Binary:return new ec;case Bt.Utf8:return new nc;case Bt.Bool:return new ic;case Bt.List:return new cc((t||[])[0]);case Bt.Struct_:return new re(t||[])}switch(n){case Bt.Int:{const i=e.type(new Hr);return new Li(i.isSigned(),i.bitWidth())}case Bt.FloatingPoint:{const i=e.type(new Bo);return new Ba(i.precision())}case Bt.Decimal:{const i=e.type(new Fr);return new rc(i.scale(),i.precision(),i.bitWidth())}case Bt.Date:{const i=e.type(new xo);return new sc(i.unit())}case Bt.Time:{const i=e.type(new na);return new Ta(i.unit(),i.bitWidth())}case Bt.Timestamp:{const i=e.type(new ia);return new ac(i.unit(),i.timezone())}case Bt.Interval:{const i=e.type(new To);return new oc(i.unit())}case Bt.Union:{const i=e.type(new cr);return new uc(i.mode(),i.typeIdsArray()||[],t||[])}case Bt.FixedSizeBinary:{const i=e.type(new Ao);return new lc(i.byteWidth())}case Bt.FixedSizeList:{const i=e.type(new Eo);return new hc(i.listSize(),(t||[])[0])}case Bt.Map:{const i=e.type(new Oo);return new fc((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Bt[n]}" (${n})`)}function cE(e,t){const n=t.fields.map(s=>Rt.encode(e,s));wn.startFieldsVector(e,n.length);const i=wn.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?wn.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return We.startKeyValue(e),We.addKey(e,o),We.addValue(e,c),We.endKeyValue(e)})):-1;return wn.startSchema(e),wn.addFields(e,i),wn.addEndianness(e,pE?fs.Little:fs.Big),r!==-1&&wn.addCustomMetadata(e,r),wn.endSchema(e)}function uE(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;K.isDictionary(s)?(a=s.dictionary.typeId,r=$u.visit(s,e),i=$u.visit(s.dictionary,e)):i=$u.visit(s,e);const o=(s.children||[]).map(l=>Rt.encode(e,l)),c=Le.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Le.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),y=e.createString(`${h}`);return We.startKeyValue(e),We.addKey(e,d),We.addValue(e,y),We.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Le.startField(e),Le.addType(e,i),Le.addTypeType(e,a),Le.addChildren(e,c),Le.addNullable(e,!!t.nullable),n!==-1&&Le.addName(e,n),r!==-1&&Le.addDictionary(e,r),u!==-1&&Le.addCustomMetadata(e,u),Le.endField(e)}function lE(e,t){const n=t.nodes||[],i=t.buffers||[];Xn.startNodesVector(e,n.length);for(const a of n.slice().reverse())Ir.encode(e,a);const r=e.endVector();Xn.startBuffersVector(e,i.length);for(const a of i.slice().reverse())Dn.encode(e,a);const s=e.endVector();return Xn.startRecordBatch(e),Xn.addLength(e,BigInt(t.length)),Xn.addNodes(e,r),Xn.addBuffers(e,s),Xn.endRecordBatch(e)}function hE(e,t){const n=Fe.encode(e,t.data);return Mr.startDictionaryBatch(e),Mr.addId(e,BigInt(t.id)),Mr.addIsDelta(e,t.isDelta),Mr.addData(e,n),Mr.endDictionaryBatch(e)}function fE(e,t){return Ng.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function dE(e,t){return Og.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const pE=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Rh=e=>`Expected ${mt[e]} Message in stream, but was null or length 0.`,Lh=e=>`Header pointer of flatbuffer-encoded ${mt[e]} Message is null or length 0.`,Cg=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,Rg=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class Lg{constructor(t){this.source=t instanceof vc?t:new vc(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ft:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Rh(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=dt(this.source.read(t));if(n.byteLength<t)throw new Error(Rg(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=mt.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Lh(n));return r}readMetadataLength(){const t=this.source.read(cu),n=t&&new Mi(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return Ft;if(n.byteLength<t)throw new Error(Cg(t,n.byteLength));return{done:!1,value:ai.decode(n)}}}class yE{constructor(t,n){this.source=t instanceof ys?t:em(t)?new wc(t,n):new ys(t)}[Symbol.asyncIterator](){return this}next(){return A(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Ft:t})}throw(t){return A(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return A(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return A(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Rh(t));return n.value})}readMessageBody(t){return A(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=dt(yield this.source.read(t));if(n.byteLength<t)throw new Error(Rg(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return A(this,void 0,void 0,function*(){const n=mt.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(t&&!r)throw new Error(Lh(n));return r})}readMetadataLength(){return A(this,void 0,void 0,function*(){const t=yield this.source.read(cu),n=t&&new Mi(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return A(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return Ft;if(n.byteLength<t)throw new Error(Cg(t,n.byteLength));return{done:!1,value:ai.decode(n)}})}}class mE extends Lg{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ip?t:new ip(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:ai.fromJSON(t.schema,mt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:ai.fromJSON(n,mt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:ai.fromJSON(n,mt.RecordBatch)}}return this._body=[],Ft}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Rh(t));return n.value}readSchema(){const t=mt.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(Lh(t));return i}}const cu=4,Fl="ARROW1",Na=new Uint8Array(Fl.length);for(let e=0;e<Fl.length;e+=1)Na[e]=Fl.codePointAt(e);function Mh(e,t=0){for(let n=-1,i=Na.length;++n<i;)if(Na[n]!==e[t+n])return!1;return!0}const Ga=Na.length,Mg=Ga+cu,gE=Ga*2+cu;class Ye extends Oh{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return vr(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Pe.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Pe.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ye?t:gl(t)?wE(t):em(t)?xE(t):vr(t)?(()=>A(this,void 0,void 0,function*(){return yield Ye.from(yield t)}))():nm(t)||mh(t)||im(t)||Bs(t)?IE(new ys(t)):SE(new vc(t))}static readAll(t){return t instanceof Ye?t.isSync()?fp(t):dp(t):gl(t)||ArrayBuffer.isView(t)||Wa(t)||tm(t)?fp(t):dp(t)}}class Ac extends Ye{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Xt(this,arguments,function*(){yield v(yield*_r(qe(this[Symbol.iterator]())))})}}class Ec extends Ye{constructor(t){super(t),this._impl=t}readAll(){var t,n,i,r;return A(this,void 0,void 0,function*(){const s=new Array;try{for(var a=!0,o=qe(this),c;c=yield o.next(),t=c.done,!t;a=!0){r=c.value,a=!1;const u=r;s.push(u)}}catch(u){n={error:u}}finally{try{!a&&!t&&(i=o.return)&&(yield i.call(o))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Ug extends Ac{constructor(t){super(t),this._impl=t}}class _E extends Ec{constructor(t){super(t),this._impl=t}}class Pg{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=nt({type:new re(this.schema.fields),length:t.length,children:i});return new de(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const c=a.dictionaries.get(i),u=this._loadVectors(t.data,n,[c]);return(o&&r?o.concat(new Nt(u)):new Nt(u)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new Ag(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class Bc extends Pg{constructor(t,n){super(n),this._reader=gl(t)?new mE(this._handle=t):new Lg(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Vg(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ft}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ft}next(){if(this.closed)return Ft;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ch(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Tc extends Pg{constructor(t,n){super(n),this._reader=new yE(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return A(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return A(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Vg(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Ft})}return(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Ft})}next(){return A(this,void 0,void 0,function*(){if(this.closed)return Ft;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class $g extends Bc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof rp?t:new rp(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(mt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(mt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-Mg,i=t.readInt32(n),r=t.readAt(n-i,i);return Oa.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class bE extends Tc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof wc?t:new wc(t,i),r)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return A(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return A(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(mt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return A(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(mt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return A(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-Mg,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return Oa.decode(r)})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class vE extends Bc{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new D2(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function Vg(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*fp(e){const t=Ye.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function dp(e){return Xt(this,arguments,function*(){const n=yield v(Ye.from(e));try{if(!(yield v(n.open({autoDestroy:!1}))).closed)do yield yield v(n);while(!(yield v(n.reset().open())).closed)}finally{yield v(n.cancel())}})}function wE(e){return new Ac(new vE(e))}function SE(e){const t=e.peek(Ga+7&-8);return t&&t.byteLength>=4?Mh(t)?new Ug(new $g(e.read())):new Ac(new Bc(e)):new Ac(new Bc(function*(){}()))}function IE(e){return A(this,void 0,void 0,function*(){const t=yield e.peek(Ga+7&-8);return t&&t.byteLength>=4?Mh(t)?new Ug(new $g(yield e.read())):new Ec(new Tc(e)):new Ec(new Tc(function(){return Xt(this,arguments,function*(){})}()))})}function xE(e){return A(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new wc(e,t);return t>=gE&&Mh(yield n.readAt(0,Ga+7&-8))?new _E(new bE(n)):new Ec(new Tc(n))})}let Kt=class jg extends it{static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof de?s.data.children:s.data),i=new jg;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Nt)return this.visitMany(t.data),this;const{type:n}=t;if(!K.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");K.isNull(n)||on.call(this,r<=0?new Uint8Array(0):xh(t.offset,i,t.nullBitmap)),this.nodes.push(new Ir(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function on(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Dn(this._byteLength,t)),this._byteLength+=t,this}function AE(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(on.call(this,i),t.mode===Ne.Sparse)return Dl.call(this,e);if(t.mode===Ne.Dense){if(e.offset<=0)return on.call(this,r),Dl.call(this,e);{const s=i.reduce((l,h)=>Math.max(l,h),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(n),u=_h(-r[0],n,r);for(let l,h,d=-1;++d<n;)(h=o[l=i[d]])===-1&&(h=o[l]=u[l]),c[d]=u[d]-h,++a[l];on.call(this,c);for(let l,h=-1,d=t.children.length;++h<d;)if(l=e.children[h]){const y=t.typeIds[h],g=Math.min(n,a[y]);this.visit(l.slice(o[y],g))}}}return this}function EE(e){let t;return e.nullCount>=e.length?on.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?on.call(this,xh(e.offset,e.length,t)):on.call(this,dc(e.values))}function Qi(e){return on.call(this,e.values.subarray(0,e.length*e.stride))}function zg(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return on.call(this,_h(-i[0],t,i)),on.call(this,n.subarray(r,r+a)),this}function Uh(e){const{length:t,valueOffsets:n}=e;return n&&on.call(this,_h(n[0],t,n)),this.visit(e.children[0])}function Dl(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Kt.prototype.visitBool=EE;Kt.prototype.visitInt=Qi;Kt.prototype.visitFloat=Qi;Kt.prototype.visitUtf8=zg;Kt.prototype.visitBinary=zg;Kt.prototype.visitFixedSizeBinary=Qi;Kt.prototype.visitDate=Qi;Kt.prototype.visitTimestamp=Qi;Kt.prototype.visitTime=Qi;Kt.prototype.visitDecimal=Qi;Kt.prototype.visitList=Uh;Kt.prototype.visitStruct=Dl;Kt.prototype.visitUnion=AE;Kt.prototype.visitInterval=Qi;Kt.prototype.visitFixedSizeList=Uh;Kt.prototype.visitMap=Uh;let Wg=class extends Oh{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Fo,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,_e(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return vr(t)?t.then(n=>this.writeAll(n)):Bs(t)?$h(this,t):Ph(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Fo?this._sink=t:(this._sink=new Fo,t&&Wx(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&qx(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Tl(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Pi&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof de&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Tl(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof de?t instanceof Ch||this._writeRecordBatch(t):t instanceof Pi?this.writeAll(t.batches):Wa(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=ai.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,c=o-s-a;return t.headerType===mt.RecordBatch?this._recordBatchBlocks.push(new ps(o,t.bodyLength,this._position)):t.headerType===mt.DictionaryBatch&&this._dictionaryBlocks.push(new ps(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const n=dt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(ai.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Na)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=Kt.assemble(t),a=new Fe(t.numRows,i,r),o=ai.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Kt.assemble(new Nt([t])),c=new Fe(t.length,s,a),u=new Mn(c,n,i),l=ai.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}},BE=class qg extends Wg{static writeAll(t,n){const i=new qg(n);return vr(t)?t.then(r=>i.writeAll(r)):Bs(t)?$h(i,t):Ph(i,t)}},TE=class Yg extends Wg{static writeAll(t){const n=new Yg;return vr(t)?t.then(i=>n.writeAll(i)):Bs(t)?$h(n,t):Ph(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Oa.encode(new Oa(t,Oe.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}};function Ph(e,t){let n=t;t instanceof Pi&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function $h(e,t){var n,i,r,s,a,o,c;return A(this,void 0,void 0,function*(){try{for(n=!0,i=qe(t);r=yield i.next(),s=r.done,!s;n=!0){c=r.value,n=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a.error}}return e.finish()})}function OE(e,t="stream"){return(t==="stream"?BE:TE).writeAll(e).toUint8Array(!0)}var NE=Object.create,Hg=Object.defineProperty,FE=Object.getOwnPropertyDescriptor,DE=Object.getOwnPropertyNames,kE=Object.getPrototypeOf,CE=Object.prototype.hasOwnProperty,RE=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),LE=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of DE(t))!CE.call(e,r)&&r!==n&&Hg(e,r,{get:()=>t[r],enumerable:!(i=FE(t,r))||i.enumerable});return e},ME=(e,t,n)=>(n=e!=null?NE(kE(e)):{},LE(t||!e||!e.__esModule?Hg(n,"default",{value:e,enumerable:!0}):n,e)),UE=RE((e,t)=>{t.exports=Worker}),PE=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(PE||{}),$E=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))($E||{}),VE=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(VE||{}),jE=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(jE||{}),zE=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(zE||{}),WE=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(WE||{}),qE=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},YE=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(YE||{}),HE=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=Ye.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Pi(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new Gg(this._bindings,this._conn,t),i=await Ye.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new GE(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=OE(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},Gg=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},GE=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=Ye.from(t);return console.assert(n.isSync()),console.assert(n.isFile()),new Pi(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new Gg(this.bindings,this.connectionId,t),i=await Ye.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},KE=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(KE||{}),JE=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(JE||{}),rt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,i)=>{this.promiseResolver=n,this.promiseRejecter=i})}};function Co(e){switch(e.typeId){case m.Binary:return{sqlType:"binary"};case m.Bool:return{sqlType:"bool"};case m.Date:return{sqlType:"date"};case m.DateDay:return{sqlType:"date32[d]"};case m.DateMillisecond:return{sqlType:"date64[ms]"};case m.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case m.Float:return{sqlType:"float"};case m.Float16:return{sqlType:"float16"};case m.Float32:return{sqlType:"float32"};case m.Float64:return{sqlType:"float64"};case m.Int:return{sqlType:"int32"};case m.Int16:return{sqlType:"int16"};case m.Int32:return{sqlType:"int32"};case m.Int64:return{sqlType:"int64"};case m.Uint16:return{sqlType:"uint16"};case m.Uint32:return{sqlType:"uint32"};case m.Uint64:return{sqlType:"uint64"};case m.Uint8:return{sqlType:"uint8"};case m.IntervalDayTime:return{sqlType:"interval[dt]"};case m.IntervalYearMonth:return{sqlType:"interval[m]"};case m.List:return{sqlType:"list",valueType:Co(e.valueType)};case m.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case m.Null:return{sqlType:"null"};case m.Utf8:return{sqlType:"utf8"};case m.Struct:return{sqlType:"struct",fields:e.children.map(t=>kl(t.name,t.type))};case m.Map:{let t=e;return{sqlType:"map",keyType:Co(t.keyType),valueType:Co(t.valueType)}}case m.Time:return{sqlType:"time[s]"};case m.TimeMicrosecond:return{sqlType:"time[us]"};case m.TimeMillisecond:return{sqlType:"time[ms]"};case m.TimeNanosecond:return{sqlType:"time[ns]"};case m.TimeSecond:return{sqlType:"time[s]"};case m.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case m.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case m.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case m.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case m.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function kl(e,t){let n=Co(t);return n.name=e,n}var QE=new TextEncoder,XE=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let r of this._onInstantiationProgress)r(n.data);return}}let i=this._pendingRequests.get(n.requestId);if(!i){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let r=new Error(n.data.message);r.name=n.data.name,(t=Object.getOwnPropertyDescriptor(r,"stack"))!=null&&t.writable&&(r.stack=n.data.stack),i.promiseRejecter(r);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){i.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){i.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){i.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){i.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){i.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){i.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){i.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){i.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){i.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){i.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){i.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){i.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){i.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(n.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new rt("RESET",null);return await this.postTask(e)}async ping(){let e=new rt("PING",null);await this.postTask(e)}async dropFile(e){let t=new rt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new rt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new rt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new rt("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new rt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new rt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new rt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new rt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new rt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new HE(this,e)}async disconnect(e){let t=new rt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new rt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new rt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new rt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new rt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new rt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new rt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new rt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new rt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new rt("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new rt("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new rt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=QE.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let r=new rt("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(e){let t=new rt("REGISTER_FILE_BUFFER",[e,new Uint8Array]);await this.postTask(t)}async registerFileBuffer(e,t){let n=new rt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let r=new rt("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(r,[])}async collectFileStatistics(e,t){let n=new rt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new rt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new rt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new rt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new rt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(kl(s,a))}n.columnsFlat=r,delete n.columns}let i=new rt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let a=n.columns[s];r.push(kl(s,a))}n.columnsFlat=r,delete n.columns}let i=new rt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},ZE=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),tB=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),eB=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),nB=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),iB={name:"@duckdb/duckdb-wasm",version:"1.28.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^13.0.0"},devDependencies:{"@types/emscripten":"^1.39.8","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^6.5.0","@typescript-eslint/parser":"^6.7.3",esbuild:"^0.19.5",eslint:"^8.50.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.33.2","fast-glob":"^3.3.1",jasmine:"^5.1.0","jasmine-core":"^5.1.1","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.0.2",puppeteer:"^21.1.1",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.2",typescript:"^5.2.2","wasm-feature-detect":"^1.5.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Vh=iB.version.split(".");Vh[0];Vh[1];Vh[2];var rB=()=>typeof navigator>"u",Vu=null,ju=null,zu=null,Wu=null,qu=null;async function sB(){return Vu==null&&(Vu=typeof BigInt64Array<"u"),ju==null&&(ju=await tB()),zu==null&&(zu=await nB()),Wu==null&&(Wu=await eB()),qu==null&&(qu=await ZE()),{bigInt64Array:Vu,crossOriginIsolated:rB()||globalThis.crossOriginIsolated||!1,wasmExceptions:ju,wasmSIMD:Wu,wasmThreads:zu,wasmBulkMemory:qu}}async function aB(e){let t=await sB();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}ME(UE());function oB(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}oB();var cB=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(cB||{});const uB=""+new URL("../assets/duckdb-mvp.d4199293.wasm",import.meta.url).href,lB=""+new URL("../assets/duckdb-browser-mvp.worker.48e59965.js",import.meta.url).href,hB=""+new URL("../assets/duckdb-eh.053f5ea4.wasm",import.meta.url).href,fB=""+new URL("../assets/duckdb-browser-eh.worker.f47868c8.js",import.meta.url).href;class dB extends jn{constructor(t){super(),this.sources=[],this.db=null,this.conn=null,t.sources?this.sources.push.apply(this.sources,t.sources):t.name&&this.sources.push(t)}register(t){this.sources.push(t)}async query(t){return await this.conn.query(t)}async init(){const n=await aB({mvp:{mainModule:uB,mainWorker:lB},eh:{mainModule:hB,mainWorker:fB}}),i=new Worker(n.mainWorker),r=new qE;this.db=new XE(r,i),await this.db.instantiate(n.mainModule,n.pthreadWorker),this.conn=await this.db.connect();for(let s of this.sources)await this.load(s)}async load(t){let n=t.name;if(t.csv)await this.db.registerFileText(n,t.csv),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0});else if(t.url){let r=await(await fetch(t.url)).arrayBuffer();const s=new Uint8Array(r);await this.db.registerFileBuffer(n,s),await this.conn.insertCSVFromPath(n,{name:n,schema:"main",detect:!0,header:!0})}else if(t.parquet){const i=`${Hv}/${t.parquet}`;console.log("parquet_name and registration path:",t.parquet,i),await this.db.registerFileURL(t.parquet,i,4,!1);const r=`CREATE TABLE ${t.name} AS SELECT * FROM parquet_scan(${t.parquet})`;console.log("parquet loading query:",r),await this.query(r);const a=(await this.conn.query("SHOW ALL TABLES")).toArray().map(Object.fromEntries);console.log("database DIAGNOSTIC: ",a)}return this}async _execute(t,...n){for(const i of t){const r=i.q;let s=await this.conn.query(r),a=s.toArray().map(Object.fromEntries);return a.columns=s.schema.fields.map(o=>o.name),console.debug("duckdb.execute",r,a,...n),this.emit("data",a,...n),this.emit("debug",a),a}}}var Ei=(e=>(e.LITERAL="literal",e.AST="ast",e.LIST="list",e.ANY="any",e.OPT="opt",e.FIXEDMULTI="fixedmulti",e.MULTI="multi",e))(Ei||{});let pp=B1(e=>e.length>0);class pB{constructor(t){this.binding={},this.spec={},this.spec=t}update(t){return this.binding=oh(this.binding,t),this}snapshot(){return this.binding}restoreSnapshot(t){this.binding=t}toSQL(){return Cl(this.binding,this.spec)}}function Cl(e,t){let n=t.children??[],i=ew(Cl,[e]),r=[],s;switch(t==null?void 0:t.type){case Ei.LITERAL:return t.value;case Ei.AST:return r=n.map(i),pp(r).join("");case Ei.LIST:return r=n.map(i),pp(r).join(t.delim);case Ei.ANY:if(s=e[t.id]??t.default??0,s=="inf")return"9e999";if(s=="-inf")return"-9e999";let a=+s;return Number.isNaN(a)?`'${s}'`:s<0||s>=n.length?a:i(n[a]);case Ei.OPT:return s=e[t.id]??t.default??0,V1(s,[1,"selected"])?i(n[0]):"";case Ei.FIXEDMULTI:case Ei.MULTI:let o=e[t.id]??t.default??[];return ah(Array,o)||(o=[o]),o.map(c=>Cl(c,n[0])).join(t.delim??"");default:return""}}class yB extends jn{constructor(t){super(),this.spec={},this.dt=null,this.backend=null,this.bindings={},this.spec=t,this.dt=new pB(t.difftree),this.backend=ah(String,t.backend)?Gv(Lx)[t.backend]:t.backend,this.backend&&this.backend.on("data",n=>{this.emit("data",n)})}snapshot(){return this.dt.snapshot()}async _execute(t,n){let i=t[0]??{};const r=this.dt.update(i).toSQL();if(console.log("ClientDT.execute",r,i),this.emit("debug",r),this.backend)return this.backend.execute(r,n)}}class mB extends jn{constructor(t){super(),this.q=[],this.q=t.data??[]}async execute(t,n){this.emit("data",t??this.q,n)}}class gB extends jn{constructor(t){super();let n=t.attrs??[];this.gen=i=>{let r=n.map(s=>[s,Math.ceil(Math.random()*100)]);return r.push(["id",i]),M1(r)}}async _execute(t,...n){this.emit("data",iw(this.gen,10),...n)}}class _B extends jn{constructor(t){super(),this.backend=t.backend,this.query=t.query,this.name=t.name,this.params=t.defaults??{}}snapshot(){return Yo(this.params)}restoreSnapshot(t){this.params=t}prepareQuery(t,n){let i=t;return Ay((r,s)=>{i=i.replaceAll(`var(${s})`,r)},n),i}async _execute(t){t=Array.isArray(t)?t:[t],t.forEach(r=>{this.params=oh(this.params,r)});let n=this.prepareQuery(this.query,this.params),i=await this.backend._execute([{q:n}],this.name);return this.emit("data",i,this.name),i}}const ut=Array.isArray;function ve(e){return e!=null?ut(e)?e:[e]:[]}function bB(e=0,t=1/0){return`${yp(e)} < row_number() && row_number() <= ${yp(t)}`}function yp(e){return e<0?`count() + ${e}`:e}class Kg{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(bB(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,ve(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function J(e){throw Error(e)}function se(e){return typeof e=="number"}function xt(e){return typeof e=="function"}function uu(e,t){const n=Array(e);if(xt(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}let vB=class extends Kg{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){J("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){J("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){J("Not implemented")}getter(t){J("Not implemented")}objects(t){J("Not implemented")}object(t){J("Not implemented")}[Symbol.iterator](){J("Not implemented")}print(t={}){se(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(i),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,c=this._data;i.sort((u,l)=>o(u,l,c))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=uu(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let c=0,u;c<o;++c)u=s[c],r[n[u]].push(u);else if(a)for(let c=a.next(0);c>=0;c=a.next(c+1))r[n[c]].push(c);else for(let c=0;c<o;++c)r[n[c]].push(c);if(t&&!s&&this.isOrdered()){const c=this._order,u=this._data;for(let l=0;l<i;++l)r[l].sort((h,d)=>c(h,d,u))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let c=r||0;if(c>a)return;const u=Math.min(a,c+i),l=()=>c=this._total;if(n&&this.isOrdered()||s&&this._index){const h=this.indices(),d=this._data;for(;c<u;++c)t(h[c],d,l)}else if(s){let h=u-c+1;for(c=s.nth(c);--h&&c>-1;c=s.next(c+1))t(c,o,l)}else for(;c<u;++c)t(c,o,l)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}},wB=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},SB=function(e){return e&&xt(e.get)?e:new wB(e)};function ui(e){return e instanceof Date}function ie(e){return e===Object(e)}function Oc(e){return e instanceof RegExp}function te(e){return typeof e=="string"}function IB(e,t){const n=i=>J(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?mp(e.entries(),t):ui(e)?n("Date"):Oc(e)?n("RegExp"):te(e)?n():ut(e)?xB(e,t):xt(e[Symbol.iterator])?AB(e,t):ie(e)?mp(Object.entries(e),t):n()}function mp(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function xB(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const c=e[o];for(let u=0;u<a;++u)s[u][o]=c[t[u]]}}else t&&t.forEach(r);return i}function AB(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:EB}=Object.prototype;function hn(e,t){return EB.call(e,t)}function ke(e){return e?new gp({...e.data()},e.columnNames()):new gp}class gp{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return hn(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ct=void 0,BB=Object.getPrototypeOf(Int8Array);function Ka(e){return e instanceof BB}function yr(e){return ut(e)||Ka(e)}function an(e){return e!=null&&e===e}const Ws=e=>yr(e)||te(e),TB={compact:e=>yr(e)?e.filter(t=>an(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>Ws(e)?e.includes(t,n):!1,indexof:(e,t)=>Ws(e)?e.indexOf(t):-1,join:(e,t)=>yr(e)?e.join(t):ct,lastindexof:(e,t)=>Ws(e)?e.lastIndexOf(t):-1,length:e=>Ws(e)?e.length:0,pluck:(e,t)=>yr(e)?e.map(n=>an(n)?n[t]:ct):ct,reverse:e=>yr(e)?e.slice().reverse():te(e)?e.split("").reverse().join(""):ct,slice:(e,t,n)=>Ws(e)?e.slice(t,n):ct};function OB(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function Ro(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const _n=e=>(e<10?"0":"")+e,NB=e=>e<0?"-"+Ro(-e,6):e>9999?"+"+Ro(e,6):Ro(e,4);function Jg(e,t,n,i,r,s,a,o,c){const u=o?"Z":"";return NB(e)+"-"+_n(t+1)+"-"+_n(n)+(!c||a?"T"+_n(i)+":"+_n(r)+":"+_n(s)+"."+Ro(a,3)+u:s?"T"+_n(i)+":"+_n(r)+":"+_n(s)+u:r||i||!o?"T"+_n(i)+":"+_n(r)+u:"")}function Qg(e,t){return isNaN(e)?"Invalid Date":Jg(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function lu(e,t){return isNaN(e)?"Invalid Date":Jg(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const FB=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function DB(e){return e.match(FB)&&!isNaN(Date.parse(e))}function kB(e,t=Date.parse){return DB(e)?t(e):e}const Xg=6e4,Zg=864e5,t0=6048e5,kt=new Date,Ct=new Date,Lt=e=>(kt.setTime(typeof e=="string"?kB(e):e),kt);function CB(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function RB(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function LB(e){Ct.setTime(+e),Ct.setHours(0,0,0,0),kt.setTime(+Ct),kt.setMonth(0),kt.setDate(1);const t=(Ct.getTimezoneOffset()-kt.getTimezoneOffset())*Xg;return Math.floor(1+(Ct-kt-t)/Zg)}function MB(e){Ct.setTime(+e),Ct.setUTCHours(0,0,0,0);const t=Date.UTC(Ct.getUTCFullYear(),0,1);return Math.floor(1+(Ct-t)/Zg)}function UB(e,t){const n=t||0;Ct.setTime(+e),Ct.setDate(Ct.getDate()-(Ct.getDay()+7-n)%7),Ct.setHours(0,0,0,0),kt.setTime(+e),kt.setMonth(0),kt.setDate(1),kt.setDate(1-(kt.getDay()+7-n)%7),kt.setHours(0,0,0,0);const i=(Ct.getTimezoneOffset()-kt.getTimezoneOffset())*Xg;return Math.floor((1+(Ct-kt)-i)/t0)}function PB(e,t){const n=t||0;return Ct.setTime(+e),Ct.setUTCDate(Ct.getUTCDate()-(Ct.getUTCDay()+7-n)%7),Ct.setUTCHours(0,0,0,0),kt.setTime(+e),kt.setUTCMonth(0),kt.setUTCDate(1),kt.setUTCDate(1-(kt.getUTCDay()+7-n)%7),kt.setUTCHours(0,0,0,0),Math.floor((1+(Ct-kt))/t0)}const $B={format_date:(e,t)=>Qg(Lt(e),!t),format_utcdate:(e,t)=>lu(Lt(e),!t),timestamp:e=>+Lt(e),year:e=>Lt(e).getFullYear(),quarter:e=>Math.floor(Lt(e).getMonth()/3),month:e=>Lt(e).getMonth(),date:e=>Lt(e).getDate(),dayofweek:e=>Lt(e).getDay(),hours:e=>Lt(e).getHours(),minutes:e=>Lt(e).getMinutes(),seconds:e=>Lt(e).getSeconds(),milliseconds:e=>Lt(e).getMilliseconds(),utcyear:e=>Lt(e).getUTCFullYear(),utcquarter:e=>Math.floor(Lt(e).getUTCMonth()/3),utcmonth:e=>Lt(e).getUTCMonth(),utcdate:e=>Lt(e).getUTCDate(),utcdayofweek:e=>Lt(e).getUTCDay(),utchours:e=>Lt(e).getUTCHours(),utcminutes:e=>Lt(e).getUTCMinutes(),utcseconds:e=>Lt(e).getUTCSeconds(),utcmilliseconds:e=>Lt(e).getUTCMilliseconds(),datetime:CB,dayofyear:LB,week:UB,utcdatetime:RB,utcdayofyear:MB,utcweek:PB,now:Date.now};function jh(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:ui(e)||ui(t)?+e==+t:Oc(e)&&Oc(t)?e+""==t+"":ie(e)&&ie(t)?VB(e,t):!1}function VB(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return _p(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!_p(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!jh(e[a],t[a]))return!1}return!0}function _p(e,t,n=jh){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}const jB={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let zB=Math.random;function Os(){return zB()}const WB={random:Os,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function zh(e){return e instanceof Map}function qB(e){return e instanceof Set}function Lo(e){return zh(e)||qB(e)}function Yu(e){return Array.from(e)}const YB={has:(e,t)=>Lo(e)?e.has(t):e!=null?hn(e,t):!1,keys:e=>zh(e)?Yu(e.keys()):e!=null?Object.keys(e):[],values:e=>Lo(e)?Yu(e.values()):e!=null?Object.values(e):[],entries:e=>Lo(e)?Yu(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ct};function HB(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(hn(t,e))return t[e];return n!==void 0?n:e}function GB(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}const KB={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Kr={bin:OB,equal:jh,recode:HB,sequence:GB,...TB,...$B,...jB,...WB,...YB,...KB};function Fa(e){return typeof e=="bigint"}function Un(e){return e===void 0?e+"":Fa(e)?e+"n":JSON.stringify(e)}function H(e,t=[],n=[]){return new JB(e,ve(t),ve(n))}let JB=class{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${Un(n)}]`),...this.params.map(Un)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const e0=e=>H("any",e),n0=()=>H("count"),i0=e=>H("array_agg",e),r0=e=>H("array_agg_distinct",e),s0=(e,t)=>H("map_agg",[e,t]),a0=(e,t)=>H("object_agg",[e,t]),o0=(e,t)=>H("entries_agg",[e,t]);({...Kr});function QB(e,t){e=Lo(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function XB(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(l=>s[n[l]]=1);const a=s.reduce((l,h)=>l+h,0);if(a===r)return e;const o=Array(a);let c=0;for(let l=0;l<r;++l)s[l]&&(o[s[l]=c++]=i[l]);const u=new Uint32Array(n.length);return t.scan(l=>u[l]=s[n[l]]),{...e,keys:u,rows:o,size:c}}function ZB(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,c=a,u=null;if(n){u=new Int32Array(a),t(g=>u[r[g]]=1);const y=u.reduce((g,_)=>g+_,0);if(y!==a){o=Array(y),c=0;for(let g=0;g<a;++g)u[g]&&(o[u[g]=c++]=s[g])}}let l=-1;const h=new Uint32Array(i);return t(c!==a?y=>h[++l]=u[r[y]]:y=>h[++l]=r[y]),{...e,keys:h,rows:o,size:c}}function tT(e,t,n,i){const r=i==="map"||i===!0?s0:i==="entries"?o0:i==="object"?a0:J('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=QB(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:i0(a)});for(let c=s.length;--c>=0;)o=o.groupby(s.slice(0,c)).rollup({[a]:r(s[c],a)});return o.get(a)}const eT="ArrayPattern",nT="ArrowFunctionExpression",iT="FunctionExpression",ki="Identifier",Ns="Literal",c0="MemberExpression",rT="ObjectExpression",u0="ObjectPattern",l0="Property",Ja="Column",sT="Constant",aT="Dictionary",oT="Function",cT="Parameter",h0="Op",St=(e,t)=>{const n=uT[e.type];return n?n(e,t):J(`Unsupported expression construct: ${e.type}`)},Hu=(e,t)=>"("+St(e.left,t)+" "+e.operator+" "+St(e.right,t)+")",Gu=(e,t)=>"("+In(e.params,t)+")=>"+St(e.body,t),bp=(e,t)=>St(e.callee,t)+"("+In(e.arguments,t)+")",In=(e,t,n=",")=>e.map(i=>St(i,t)).join(n),f0=e=>e.computed?`[${Un(e.name)}]`:`.${e.name}`,vp=(e,t,n)=>{const i=e.table||"";return`data${i}${f0(e)}.${n}(${t.index}${i})`},uT={Constant:e=>e.raw,Column:(e,t)=>vp(e,t,"get"),Dictionary:(e,t)=>vp(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${f0(e)}`,Op:(e,t)=>`op(${Un(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+St(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=St(e.object,t),r=St(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:bp,NewExpression:(e,t)=>"new "+bp(e,t),ArrayExpression:(e,t)=>"["+In(e.elements,t)+"]",AssignmentExpression:Hu,BinaryExpression:Hu,LogicalExpression:Hu,UnaryExpression:(e,t)=>"("+e.operator+St(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+St(e.test,t)+"?"+St(e.consequent,t)+":"+St(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+In(e.properties,t)+"})",Property:(e,t)=>{const n=St(e.key,t);return(e.computed?`[${n}]`:n)+":"+St(e.value,t)},ArrowFunctionExpression:Gu,FunctionExpression:Gu,FunctionDeclaration:Gu,ArrayPattern:(e,t)=>"["+In(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+In(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+In(e.declarations,t,","),VariableDeclarator:(e,t)=>St(e.id,t)+"="+St(e.init,t),SpreadElement:(e,t)=>"..."+St(e.argument,t),BlockStatement:(e,t)=>"{"+In(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>St(e.expression,t),IfStatement:(e,t)=>"if ("+St(e.test,t)+")"+St(e.consequent,t)+(e.alternate?" else "+St(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+St(e.discriminant,t)+") {"+In(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+St(e.test,t):"default")+": "+In(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+St(e.argument,t),Program:(e,t)=>St(e.body[0],t)};function Nc(e,t={index:"row"}){return St(e,t)}function lT(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const c=Math.ceil(Math.log(n)/o),u=t-e||Math.abs(e)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(u)/o)-c));Math.ceil(u/s)>n;)s*=10;const h=l.length;for(let d=0;d<h;++d){const y=s/l[d];y>=r&&u/y<=n&&(s=y)}}if(i){let c=Math.log(s);const u=c>=0?0:~~(-c/o)+1,l=Math.pow(10,-u-1);c=Math.floor(e/s+l)*s,e=e<c?c-s:c,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function gs(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:ui(e)?+e:ut(e)||Ka(e)?`[${e.map(gs)}]`:Oc(e)?e+"":hT(e)}function hT(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${gs(e[i])}`;return t+="}",t}function Fc(e,t){const n=e.length;return n===1?(i,r)=>gs(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=gs(o)}return s}}function fT(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=gs(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=gs(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function ei(){}function dT(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function Vt(e){return e.init=e.init||ei,e.add=e.add||ei,e.rem=e.rem||ei,e}function wp(e,t){return e.product_v=!1,e.product=t}const d0={count:{create:()=>Vt({value:e=>e.count}),param:[]},array_agg:{create:()=>Vt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Vt({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Vt({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Vt({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Vt({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ct}),param:[1]},valid:{create:()=>Vt({value:e=>e.valid}),param:[1]},invalid:{create:()=>Vt({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=fT(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Vt({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Vt({value:e=>{let t=ct,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ct,add:(e,t)=>Fa(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>wp(e,1),value:e=>e.valid?e.product_v?wp(e,dT(e.list.values())):e.product:void 0,add:(e,t)=>Fa(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ct,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Vt({value:e=>e.valid?e.mean:ct}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ct,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Vt({value:e=>e.valid>1?e.dev/e.valid:ct}),param:[1],req:["variance"]},stdev:{create:()=>Vt({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ct}),param:[1],req:["variance"]},stdevp:{create:()=>Vt({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ct}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ct,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ct)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ct,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ct)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Vt({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Vt({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ct,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>Vt({value:e=>e.valid>1?e.cov/e.valid:ct}),param:[2],req:["covariance"]},corr:{create:()=>Vt({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ct}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>Vt({value:r=>lT(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}},Sp={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Ip={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]},p0={row_number:{create(){return{init:ei,value:e=>e.index+1}},param:[]},rank:Sp,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Sp.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Ip,ntile:{create(e){e=+e,e>0||J("ntile num must be greater than zero.");const{init:t,value:n}=Ip.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=ct){return e=+e||1,{init:ei,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=ct){return e=+e||1,{init:ei,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:ei,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:ei,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||J("nth_value nth must be greater than zero."),{init:ei,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):ct}}},param:[1,1]},fill_down:{create(e=ct){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return an(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=ct){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=pT(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function pT(e,t,n){for(const i=e.size;n<i;++n)if(an(e.value(n,t)))return n;return-1}function Wh(e){return hn(d0,e)}function qh(e){return hn(p0,e)}function y0(e){return hn(Kr,e)||e==="row_object"}function m0(e){return Wh(e)&&d0[e]}function g0(e){return qh(e)&&p0[e]}function qs(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Yh={escape:(e,t,n)=>qs(e,t,n),expr:(e,t)=>qs(`(row,data,op)=>${e}`,Kr,t),expr2:(e,t)=>qs(`(row0,data0,row,data)=>${e}`,Kr,t),join:(e,t)=>qs(`(row1,data1,row2,data2)=>${e}`,Kr,t),param:(e,t)=>qs(e,Kr,t)},yT={"==":1,"!=":1,"===":1,"!==":1};function _0(e,t,n=0,i,r){if(e.type=Ja,e.name=t,e.table=n,r&&i&&xt(i.keyFor)){const s=yT[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===Ns&&mT(r,e,s,i.keyFor(s.value))}return e}function mT(e,t,n,i){return i<0?(e.type=Ns,e.value=!1,e.raw="false"):(t.type=aT,n.value=i,n.raw=i+""),!0}function hu(e){return ut(e)?e:zh(e)?e.entries():e?Object.entries(e):[]}const b0="row_object";function v0(e,t){e.type=rT;const n=e.properties=[];for(const i of hu(t)){const[r,s]=ut(i)?i:[i,i];n.push({type:l0,key:{type:Ns,raw:Un(s)},value:_0({computed:!0},r)})}return e}function w0(e){return Nc(v0({},e))}function S0(e){return Yh.expr(w0(e))}const gT=new TextDecoder("utf-8"),Rl=e=>gT.decode(e),_T=new TextEncoder,fu=e=>_T.encode(e),bT=e=>typeof e=="boolean",fe=e=>typeof e=="function",Xi=e=>e!=null&&Object(e)===e,du=e=>Xi(e)&&fe(e.then),Hh=e=>Xi(e)&&fe(e[Symbol.iterator]),pu=e=>Xi(e)&&fe(e[Symbol.asyncIterator]),vT=e=>Xi(e)&&"done"in e&&"value"in e,I0=e=>"_getDOMStream"in e&&"_getNodeStream"in e,wT=e=>Xi(e)&&fe(e.abort)&&fe(e.getWriter)&&!I0(e),ST=e=>Xi(e)&&fe(e.end)&&fe(e.write)&&bT(e.writable)&&!I0(e),IT=e=>Xi(e)&&fe(e.clear)&&fe(e.bytes)&&fe(e.position)&&fe(e.setPosition)&&fe(e.capacity)&&fe(e.getBufferIdentifier)&&fe(e.createLong),Gh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function xT(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,c=0,u=0,l=e.length;++c<l;){if(a=t[u],o=e[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,n,i-n+s)}return t}function Ll(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function Pn(e,t){const n=xT(e),i=n.reduce((l,h)=>l+h.byteLength,0);let r,s,a,o=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const l=n.length;++c<l;){if(r=n[c],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?Ll(a,s,o):a=s;break}Ll(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function jt(e,t){let n=vT(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=fu(n)),n instanceof ArrayBuffer?new e(n):n instanceof Gh?new e(n):IT(n)?jt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Ys=e=>jt(Int32Array,e),xp=e=>jt(BigInt64Array,e),st=e=>jt(Uint8Array,e),Ml=e=>(e.next(),e);function*AT(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Gh?n(t):Hh(t)?t:n(t);return yield*Ml(function*(r){let s=null;do s=r.next(yield jt(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const ET=e=>AT(Uint8Array,e);function x0(e,t){return Xt(this,arguments,function*(){if(du(t))return yield v(yield v(yield*_r(qe(x0(e,yield v(t))))));const i=function(a){return Xt(this,arguments,function*(){yield yield v(yield v(a))})},r=function(a){return Xt(this,arguments,function*(){yield v(yield*_r(qe(Ml(function*(o){let c=null;do c=o.next(yield c==null?void 0:c.value);while(!c.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Gh?i(t):Hh(t)?r(t):pu(t)?t:i(t);return yield v(yield*_r(qe(Ml(function(a){return Xt(this,arguments,function*(){let o=null;do o=yield v(a.next(yield yield v(jt(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield v(new e)})}const BT=e=>x0(Uint8Array,e);function A0(e,t,n){if(e!==0){n=n.slice(0,t);for(let i=-1,r=n.length;++i<r;)n[i]+=e}return n.subarray(0,t)}function TT(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const Ap={fromIterable(e){return po(OT(e))},fromAsyncIterable(e){return po(NT(e))},fromDOMStream(e){return po(FT(e))},fromNodeStream(e){return po(kT(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},po=e=>(e.next(),e);function*OT(e){let t,n=!1,i=[],r,s,a,o=0;function c(){return s==="peek"?Pn(i,a)[0]:([r,i,o]=Pn(i,a),r)}({cmd:s,size:a}=(yield(()=>null)())||{cmd:"read",size:0});const u=ET(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield c());while(a<o);while(!t)}catch(l){(n=!0)&&typeof u.throw=="function"&&u.throw(l)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function NT(e){return Xt(this,arguments,function*(){let n,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Pn(r,o)[0]:([s,r,c]=Pn(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=BT(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.next()):yield v(l.next(o-c)),!n&&s.byteLength>0&&(r.push(s),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&typeof l.throw=="function"&&(yield v(l.throw(h)))}finally{i===!1&&typeof l.return=="function"&&(yield v(l.return(new Uint8Array(0))))}return yield v(null)})}function FT(e){return Xt(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,c=0;function u(){return a==="peek"?Pn(r,o)[0]:([s,r,c]=Pn(r,o),s)}({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0});const l=new DT(e);try{do if({done:n,value:s}=Number.isNaN(o-c)?yield v(l.read()):yield v(l.read(o-c)),!n&&s.byteLength>0&&(r.push(st(s)),c+=s.byteLength),n||o<=c)do({cmd:a,size:o}=yield yield v(u()));while(o<c);while(!n)}catch(h){(i=!0)&&(yield v(l.cancel(h)))}finally{i===!1?yield v(l.cancel()):e.locked&&l.releaseLock()}return yield v(null)})}class DT{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return A(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return A(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=st(n)),n})}}const Ku=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function kT(e){return Xt(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,c=0,u=[],l;function h(){return a==="peek"?Pn(u,o)[0]:([l,u,c]=Pn(u,o),l)}if({cmd:a,size:o}=(yield yield v((()=>null)()))||{cmd:"read",size:0},e.isTTY)return yield yield v(new Uint8Array(0)),yield v(null);try{n[0]=Ku(e,"end"),n[1]=Ku(e,"error");do{if(n[2]=Ku(e,"readable"),[i,s]=yield v(Promise.race(n.map(y=>y[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-c)?(l=st(e.read(o-c)),l.byteLength<o-c&&(l=st(e.read()))):l=st(e.read()),l.byteLength>0&&(u.push(l),c+=l.byteLength)),r||o<=c)do({cmd:a,size:o}=yield yield v(h()));while(o<c)}while(!r)}finally{yield v(d(n,i==="error"?s:null))}return yield v(null);function d(y,g){return l=u=null,new Promise((_,b)=>{for(const[w,U]of y)e.off(w,U);try{const w=e.destroy;w&&w.call(e,g),g=void 0}catch(w){g=w||g}finally{g!=null?b(g):_()}})}})}var qt;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qt||(qt={}));var ae;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(ae||(ae={}));var Ht;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ht||(Ht={}));var Ge;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ge||(Ge={}));var E;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(E||(E={}));var Ke;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ke||(Ke={}));var Dc;(function(e){e[e.BUFFER=0]="BUFFER"})(Dc||(Dc={}));var kc;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(kc||(kc={}));class Fi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Fi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+x),(n||new Fi).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):kc.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Dc.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,kc.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Dc.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Fi.startBodyCompression(t),Fi.addCodec(t,n),Fi.addMethod(t,i),Fi.endBodyCompression(t)}}class E0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let B0=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Zn=class Ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+x),(n||new Ul).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new B0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new E0).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Fi).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Pr=class Pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+x),(n||new Pl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var _s;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(_s||(_s={}));var Cc;(function(e){e[e.DenseArray=0]="DenseArray"})(Cc||(Cc={}));class Be{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Be).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+x),(n||new Be).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Be.startInt(t),Be.addBitWidth(t,n),Be.addIsSigned(t,i),Be.endInt(t)}}class ii{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new ii).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+x),(n||new ii).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Be).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Cc.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Cc.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Wt{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Wt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+x),(n||new Wt).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return Wt.startKeyValue(t),Wt.addKey(t,n),Wt.addValue(t,i),Wt.endKeyValue(t)}}let Ep=class aa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new aa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+x),(n||new aa).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return aa.startBinary(t),aa.endBinary(t)}},Bp=class oa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+x),(n||new oa).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return oa.startBool(t),oa.endBool(t)}},Mo=class $r{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+x),(n||new $r).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ge.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Ge.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return $r.startDate(t),$r.addUnit(t,n),$r.endDate(t)}},Vr=class Bi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Bi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+x),(n||new Bi).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return Bi.startDecimal(t),Bi.addPrecision(t,n),Bi.addScale(t,i),Bi.addBitWidth(t,r),Bi.endDecimal(t)}},Uo=class jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+x),(n||new jr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):E.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,E.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return jr.startDuration(t),jr.addUnit(t,n),jr.endDuration(t)}},Po=class zr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new zr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+x),(n||new zr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return zr.startFixedSizeBinary(t),zr.addByteWidth(t,n),zr.endFixedSizeBinary(t)}},$o=class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Wr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+x),(n||new Wr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Wr.startFixedSizeList(t),Wr.addListSize(t,n),Wr.endFixedSizeList(t)}};class On{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new On).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+x),(n||new On).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ht.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Ht.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return On.startFloatingPoint(t),On.addPrecision(t,n),On.endFloatingPoint(t)}}class Nn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Nn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+x),(n||new Nn).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ke.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Ke.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Nn.startInterval(t),Nn.addUnit(t,n),Nn.endInterval(t)}}let Tp=class ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+x),(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return ca.startLargeBinary(t),ca.endLargeBinary(t)}},Op=class ua{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+x),(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return ua.startLargeUtf8(t),ua.endLargeUtf8(t)}},Np=class la{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new la).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+x),(n||new la).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return la.startList(t),la.endList(t)}},Vo=class qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+x),(n||new qr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return qr.startMap(t),qr.addKeysSorted(t,n),qr.endMap(t)}},Fp=class ha{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new ha).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+x),(n||new ha).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ha.startNull(t),ha.endNull(t)}};class mr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+x),(n||new mr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return mr.startStruct_(t),mr.endStruct_(t)}}class $e{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new $e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+x),(n||new $e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):E.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,E.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return $e.startTime(t),$e.addUnit(t,n),$e.addBitWidth(t,i),$e.endTime(t)}}class Ve{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+x),(n||new Ve).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):E.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,E.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return Ve.startTimestamp(t),Ve.addUnit(t,n),Ve.addTimezone(t,i),Ve.endTimestamp(t)}}class pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+x),(n||new pe).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ae.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,ae.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return pe.startUnion(t),pe.addMode(t,n),pe.addTypeIds(t,i),pe.endUnion(t)}}let Dp=class fa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new fa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+x),(n||new fa).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return fa.startUtf8(t),fa.endUtf8(t)}};var wt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(wt||(wt={}));let Me=class jo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new jo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+x),(n||new jo).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new ii).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new jo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Wt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,wt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},xn=class Kn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Kn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+x),(n||new Kn).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_s.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Me).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Wt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,_s.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return Kn.startSchema(t),Kn.addEndianness(t,n),Kn.addFields(t,i),Kn.addCustomMetadata(t,r),Kn.addFeatures(t,s),Kn.endSchema(t)}};var Pt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Pt||(Pt={}));var p;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(p||(p={}));var ti;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ti||(ti={}));const CT=void 0;function wr(e){if(e===null)return"null";if(e===CT)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>wr(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const RT=Symbol.for("isArrowBigNum");function yn(e,...t){return t.length===0?Object.setPrototypeOf(jt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}yn.prototype[RT]=!0;yn.prototype.toJSON=function(){return`"${ka(this)}"`};yn.prototype.valueOf=function(){return T0(this)};yn.prototype.toString=function(){return ka(this)};yn.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return T0(this);case"string":return ka(this);case"default":return LT(this)}return ka(this)};function rs(...e){return yn.apply(this,e)}function ss(...e){return yn.apply(this,e)}function Da(...e){return yn.apply(this,e)}Object.setPrototypeOf(rs.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ss.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Da.prototype,Object.create(Uint32Array.prototype));Object.assign(rs.prototype,yn.prototype,{constructor:rs,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(ss.prototype,yn.prototype,{constructor:ss,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Da.prototype,yn.prototype,{constructor:Da,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function T0(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new BigUint64Array(t,n,i),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),c=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*c++);return o}const ka=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Ju(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Ju(e);t=t.slice();let i=1;for(let s=0;s<t.length;s++){const a=t[s],o=~a+i;t[s]=o,i&=a===0?1:0}return`-${Ju(t)}`},LT=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:ka(e);function Ju(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t??"0"}class Kh{static new(t,n){switch(n){case!0:return new rs(t);case!1:return new ss(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new rs(t)}return t.byteLength===16?new Da(t):new ss(t)}static signed(t){return new rs(t)}static unsigned(t){return new ss(t)}static decimal(t){return new Da(t)}constructor(t,n){return Kh.new(t,n)}}function Zt(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var O0,N0,F0,D0,k0,C0,R0,L0,M0,U0,P0,$0,V0,j0,z0,W0,q0,Y0,H0,G0,K0,J0;class P{static isNull(t){return(t==null?void 0:t.typeId)===p.Null}static isInt(t){return(t==null?void 0:t.typeId)===p.Int}static isFloat(t){return(t==null?void 0:t.typeId)===p.Float}static isBinary(t){return(t==null?void 0:t.typeId)===p.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===p.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===p.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===p.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===p.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===p.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===p.Date}static isTime(t){return(t==null?void 0:t.typeId)===p.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===p.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===p.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===p.Duration}static isList(t){return(t==null?void 0:t.typeId)===p.List}static isStruct(t){return(t==null?void 0:t.typeId)===p.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===p.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===p.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===p.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===p.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===p.Dictionary}static isDenseUnion(t){return P.isUnion(t)&&t.mode===ae.Dense}static isSparseUnion(t){return P.isUnion(t)&&t.mode===ae.Sparse}constructor(t){this.typeId=t}}O0=Symbol.toStringTag;P[O0]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(P.prototype);class li extends P{constructor(){super(p.Null)}toString(){return"Null"}}N0=Symbol.toStringTag;li[N0]=(e=>e[Symbol.toStringTag]="Null")(li.prototype);class oe extends P{constructor(t,n){super(p.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}F0=Symbol.toStringTag;oe[F0]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(oe.prototype);class Jh extends oe{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Qh extends oe{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class $i extends oe{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Xh extends oe{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Zh extends oe{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class tf extends oe{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class ef extends oe{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class nf extends oe{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Jh.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Qh.prototype,"ArrayType",{value:Int16Array});Object.defineProperty($i.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Xh.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Zh.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(tf.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ef.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(nf.prototype,"ArrayType",{value:BigUint64Array});class Vi extends P{constructor(t){super(p.Float),this.precision=t}get ArrayType(){switch(this.precision){case Ht.HALF:return Uint16Array;case Ht.SINGLE:return Float32Array;case Ht.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}D0=Symbol.toStringTag;Vi[D0]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Vi.prototype);class Q0 extends Vi{constructor(){super(Ht.HALF)}}class rf extends Vi{constructor(){super(Ht.SINGLE)}}class sf extends Vi{constructor(){super(Ht.DOUBLE)}}Object.defineProperty(Q0.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rf.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(sf.prototype,"ArrayType",{value:Float64Array});class Ca extends P{constructor(){super(p.Binary)}toString(){return"Binary"}}k0=Symbol.toStringTag;Ca[k0]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Ca.prototype);class Rc extends P{constructor(){super(p.LargeBinary)}toString(){return"LargeBinary"}}C0=Symbol.toStringTag;Rc[C0]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(Rc.prototype);class bs extends P{constructor(){super(p.Utf8)}toString(){return"Utf8"}}R0=Symbol.toStringTag;bs[R0]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(bs.prototype);class Lc extends P{constructor(){super(p.LargeUtf8)}toString(){return"LargeUtf8"}}L0=Symbol.toStringTag;Lc[L0]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(Lc.prototype);class Ra extends P{constructor(){super(p.Bool)}toString(){return"Bool"}}M0=Symbol.toStringTag;Ra[M0]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Ra.prototype);class Mc extends P{constructor(t,n,i=128){super(p.Decimal),this.scale=t,this.precision=n,this.bitWidth=i}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}U0=Symbol.toStringTag;Mc[U0]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Mc.prototype);class vs extends P{constructor(t){super(p.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Ge[this.unit]}>`}}P0=Symbol.toStringTag;vs[P0]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(vs.prototype);class MT extends vs{constructor(){super(Ge.DAY)}}class UT extends vs{constructor(){super(Ge.MILLISECOND)}}class hi extends P{constructor(t,n){super(p.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${E[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}$0=Symbol.toStringTag;hi[$0]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(hi.prototype);class PT extends hi{constructor(){super(E.SECOND,32)}}class $T extends hi{constructor(){super(E.MILLISECOND,32)}}class VT extends hi{constructor(){super(E.MICROSECOND,64)}}class jT extends hi{constructor(){super(E.NANOSECOND,64)}}class Uc extends P{constructor(t,n){super(p.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${E[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}V0=Symbol.toStringTag;Uc[V0]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Uc.prototype);class ws extends P{constructor(t){super(p.Interval),this.unit=t}toString(){return`Interval<${Ke[this.unit]}>`}}j0=Symbol.toStringTag;ws[j0]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(ws.prototype);class zT extends ws{constructor(){super(Ke.DAY_TIME)}}class WT extends ws{constructor(){super(Ke.YEAR_MONTH)}}class Pc extends P{constructor(t){super(p.Duration),this.unit=t}toString(){return`Duration<${E[this.unit]}>`}}z0=Symbol.toStringTag;Pc[z0]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(Pc.prototype);class Ss extends P{constructor(t){super(p.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}W0=Symbol.toStringTag;Ss[W0]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Ss.prototype);class ne extends P{constructor(t){super(p.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}q0=Symbol.toStringTag;ne[q0]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ne.prototype);class La extends P{constructor(t,n,i){super(p.Union),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Y0=Symbol.toStringTag;La[Y0]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(La.prototype);class $c extends P{constructor(t){super(p.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}H0=Symbol.toStringTag;$c[H0]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))($c.prototype);class Is extends P{constructor(t,n){super(p.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}G0=Symbol.toStringTag;Is[G0]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Is.prototype);class Ma extends P{constructor(t,n=!1){var i,r,s;if(super(p.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((i=t==null?void 0:t.type)===null||i===void 0)&&i.children)){const a=(r=t==null?void 0:t.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}K0=Symbol.toStringTag;Ma[K0]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Ma.prototype);const qT=(e=>()=>++e)(-1);class ji extends P{constructor(t,n,i,r){super(p.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?qT():Zt(i)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}J0=Symbol.toStringTag;ji[J0]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ji.prototype);function En(e){const t=e;switch(e.typeId){case p.Decimal:return e.bitWidth/32;case p.Timestamp:return 2;case p.Date:return 1+t.unit;case p.Interval:return 1+t.unit;case p.FixedSizeList:return t.listSize;case p.FixedSizeBinary:return t.byteWidth;default:return 1}}class X{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return YT(this,t,n)}getVisitFnByTypeId(t,n=!0){return Yr(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function YT(e,t,n=!0){return typeof t=="number"?Yr(e,t,n):typeof t=="string"&&t in p?Yr(e,p[t],n):t&&t instanceof P?Yr(e,kp(t),n):t!=null&&t.type&&t.type instanceof P?Yr(e,kp(t.type),n):Yr(e,p.NONE,n)}function Yr(e,t,n=!0){let i=null;switch(t){case p.Null:i=e.visitNull;break;case p.Bool:i=e.visitBool;break;case p.Int:i=e.visitInt;break;case p.Int8:i=e.visitInt8||e.visitInt;break;case p.Int16:i=e.visitInt16||e.visitInt;break;case p.Int32:i=e.visitInt32||e.visitInt;break;case p.Int64:i=e.visitInt64||e.visitInt;break;case p.Uint8:i=e.visitUint8||e.visitInt;break;case p.Uint16:i=e.visitUint16||e.visitInt;break;case p.Uint32:i=e.visitUint32||e.visitInt;break;case p.Uint64:i=e.visitUint64||e.visitInt;break;case p.Float:i=e.visitFloat;break;case p.Float16:i=e.visitFloat16||e.visitFloat;break;case p.Float32:i=e.visitFloat32||e.visitFloat;break;case p.Float64:i=e.visitFloat64||e.visitFloat;break;case p.Utf8:i=e.visitUtf8;break;case p.LargeUtf8:i=e.visitLargeUtf8;break;case p.Binary:i=e.visitBinary;break;case p.LargeBinary:i=e.visitLargeBinary;break;case p.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case p.Date:i=e.visitDate;break;case p.DateDay:i=e.visitDateDay||e.visitDate;break;case p.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case p.Timestamp:i=e.visitTimestamp;break;case p.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case p.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case p.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case p.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case p.Time:i=e.visitTime;break;case p.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case p.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case p.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case p.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case p.Decimal:i=e.visitDecimal;break;case p.List:i=e.visitList;break;case p.Struct:i=e.visitStruct;break;case p.Union:i=e.visitUnion;break;case p.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case p.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case p.Dictionary:i=e.visitDictionary;break;case p.Interval:i=e.visitInterval;break;case p.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case p.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case p.Duration:i=e.visitDuration;break;case p.DurationSecond:i=e.visitDurationSecond||e.visitDuration;break;case p.DurationMillisecond:i=e.visitDurationMillisecond||e.visitDuration;break;case p.DurationMicrosecond:i=e.visitDurationMicrosecond||e.visitDuration;break;case p.DurationNanosecond:i=e.visitDurationNanosecond||e.visitDuration;break;case p.FixedSizeList:i=e.visitFixedSizeList;break;case p.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${p[t]}'`)}function kp(e){switch(e.typeId){case p.Null:return p.Null;case p.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?p.Int8:p.Uint8;case 16:return n?p.Int16:p.Uint16;case 32:return n?p.Int32:p.Uint32;case 64:return n?p.Int64:p.Uint64}return p.Int}case p.Float:switch(e.precision){case Ht.HALF:return p.Float16;case Ht.SINGLE:return p.Float32;case Ht.DOUBLE:return p.Float64}return p.Float;case p.Binary:return p.Binary;case p.LargeBinary:return p.LargeBinary;case p.Utf8:return p.Utf8;case p.LargeUtf8:return p.LargeUtf8;case p.Bool:return p.Bool;case p.Decimal:return p.Decimal;case p.Time:switch(e.unit){case E.SECOND:return p.TimeSecond;case E.MILLISECOND:return p.TimeMillisecond;case E.MICROSECOND:return p.TimeMicrosecond;case E.NANOSECOND:return p.TimeNanosecond}return p.Time;case p.Timestamp:switch(e.unit){case E.SECOND:return p.TimestampSecond;case E.MILLISECOND:return p.TimestampMillisecond;case E.MICROSECOND:return p.TimestampMicrosecond;case E.NANOSECOND:return p.TimestampNanosecond}return p.Timestamp;case p.Date:switch(e.unit){case Ge.DAY:return p.DateDay;case Ge.MILLISECOND:return p.DateMillisecond}return p.Date;case p.Interval:switch(e.unit){case Ke.DAY_TIME:return p.IntervalDayTime;case Ke.YEAR_MONTH:return p.IntervalYearMonth}return p.Interval;case p.Duration:switch(e.unit){case E.SECOND:return p.DurationSecond;case E.MILLISECOND:return p.DurationMillisecond;case E.MICROSECOND:return p.DurationMicrosecond;case E.NANOSECOND:return p.DurationNanosecond}return p.Duration;case p.Map:return p.Map;case p.List:return p.List;case p.Struct:return p.Struct;case p.Union:switch(e.mode){case ae.Dense:return p.DenseUnion;case ae.Sparse:return p.SparseUnion}return p.Union;case p.FixedSizeBinary:return p.FixedSizeBinary;case p.FixedSizeList:return p.FixedSizeList;case p.Dictionary:return p.Dictionary}throw new Error(`Unrecognized type '${p[e.typeId]}'`)}X.prototype.visitInt8=null;X.prototype.visitInt16=null;X.prototype.visitInt32=null;X.prototype.visitInt64=null;X.prototype.visitUint8=null;X.prototype.visitUint16=null;X.prototype.visitUint32=null;X.prototype.visitUint64=null;X.prototype.visitFloat16=null;X.prototype.visitFloat32=null;X.prototype.visitFloat64=null;X.prototype.visitDateDay=null;X.prototype.visitDateMillisecond=null;X.prototype.visitTimestampSecond=null;X.prototype.visitTimestampMillisecond=null;X.prototype.visitTimestampMicrosecond=null;X.prototype.visitTimestampNanosecond=null;X.prototype.visitTimeSecond=null;X.prototype.visitTimeMillisecond=null;X.prototype.visitTimeMicrosecond=null;X.prototype.visitTimeNanosecond=null;X.prototype.visitDenseUnion=null;X.prototype.visitSparseUnion=null;X.prototype.visitIntervalDayTime=null;X.prototype.visitIntervalYearMonth=null;X.prototype.visitDuration=null;X.prototype.visitDurationSecond=null;X.prototype.visitDurationMillisecond=null;X.prototype.visitDurationMicrosecond=null;X.prototype.visitDurationNanosecond=null;const X0=new Float64Array(1),Br=new Uint32Array(X0.buffer);function Z0(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function t_(e){if(e!==e)return 32256;X0[0]=e;const t=(Br[1]&2147483648)>>16&65535;let n=Br[1]&2146435072,i=0;return n>=1089470464?Br[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Br[1]&1048575)>>10):n<=1056964608?(i=1048576+(Br[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Br[1]&1048575)+512>>10),t|n|i&65535}class D extends X{}function R(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const HT=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},af=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},GT=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},KT=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},e_=(e,t,n,i)=>{if(n+1<t.length){const r=Zt(t[n]),s=Zt(t[n+1]);e.set(i.subarray(0,s-r),r)}},JT=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},gi=({values:e},t,n)=>{e[t]=n},of=({values:e},t,n)=>{e[t]=n},n_=({values:e},t,n)=>{e[t]=t_(n)},QT=(e,t,n)=>{switch(e.type.precision){case Ht.HALF:return n_(e,t,n);case Ht.SINGLE:case Ht.DOUBLE:return of(e,t,n)}},cf=({values:e},t,n)=>{HT(e,t,n.valueOf())},uf=({values:e},t,n)=>{af(e,t*2,n.valueOf())},i_=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},r_=({values:e,valueOffsets:t},n,i)=>e_(e,t,n,i),s_=({values:e,valueOffsets:t},n,i)=>e_(e,t,n,fu(i)),a_=(e,t,n)=>{e.type.unit===Ge.DAY?cf(e,t,n):uf(e,t,n)},lf=({values:e},t,n)=>af(e,t*2,n/1e3),hf=({values:e},t,n)=>af(e,t*2,n),ff=({values:e},t,n)=>GT(e,t*2,n),df=({values:e},t,n)=>KT(e,t*2,n),o_=(e,t,n)=>{switch(e.type.unit){case E.SECOND:return lf(e,t,n);case E.MILLISECOND:return hf(e,t,n);case E.MICROSECOND:return ff(e,t,n);case E.NANOSECOND:return df(e,t,n)}},pf=({values:e},t,n)=>{e[t]=n},yf=({values:e},t,n)=>{e[t]=n},mf=({values:e},t,n)=>{e[t]=n},gf=({values:e},t,n)=>{e[t]=n},c_=(e,t,n)=>{switch(e.type.unit){case E.SECOND:return pf(e,t,n);case E.MILLISECOND:return yf(e,t,n);case E.MICROSECOND:return mf(e,t,n);case E.NANOSECOND:return gf(e,t,n)}},u_=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},XT=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=Je.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],c=r[t+1];o<c;)s(i,o++,n.get(++a))},ZT=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=Je.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const u of c)if(s(i,a,u),++a>=o)break},tO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),eO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),nO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),iO=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),rO=(e,t,n)=>{const i=e.type.children.map(s=>Je.getVisitFn(s.type)),r=n instanceof Map?nO(t,n):n instanceof lt?eO(t,n):Array.isArray(n)?tO(t,n):iO(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},sO=(e,t,n)=>{e.type.mode===ae.Dense?l_(e,t,n):h_(e,t,n)},l_=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];Je.visit(r,e.valueOffsets[t],n)},h_=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];Je.visit(r,t,n)},aO=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},f_=(e,t,n)=>{e.type.unit===Ke.DAY_TIME?_f(e,t,n):bf(e,t,n)},_f=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},bf=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},vf=({values:e},t,n)=>{e[t]=n},wf=({values:e},t,n)=>{e[t]=n},Sf=({values:e},t,n)=>{e[t]=n},If=({values:e},t,n)=>{e[t]=n},d_=(e,t,n)=>{switch(e.type.unit){case E.SECOND:return vf(e,t,n);case E.MILLISECOND:return wf(e,t,n);case E.MICROSECOND:return Sf(e,t,n);case E.NANOSECOND:return If(e,t,n)}},oO=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=Je.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};D.prototype.visitBool=R(JT);D.prototype.visitInt=R(gi);D.prototype.visitInt8=R(gi);D.prototype.visitInt16=R(gi);D.prototype.visitInt32=R(gi);D.prototype.visitInt64=R(gi);D.prototype.visitUint8=R(gi);D.prototype.visitUint16=R(gi);D.prototype.visitUint32=R(gi);D.prototype.visitUint64=R(gi);D.prototype.visitFloat=R(QT);D.prototype.visitFloat16=R(n_);D.prototype.visitFloat32=R(of);D.prototype.visitFloat64=R(of);D.prototype.visitUtf8=R(s_);D.prototype.visitLargeUtf8=R(s_);D.prototype.visitBinary=R(r_);D.prototype.visitLargeBinary=R(r_);D.prototype.visitFixedSizeBinary=R(i_);D.prototype.visitDate=R(a_);D.prototype.visitDateDay=R(cf);D.prototype.visitDateMillisecond=R(uf);D.prototype.visitTimestamp=R(o_);D.prototype.visitTimestampSecond=R(lf);D.prototype.visitTimestampMillisecond=R(hf);D.prototype.visitTimestampMicrosecond=R(ff);D.prototype.visitTimestampNanosecond=R(df);D.prototype.visitTime=R(c_);D.prototype.visitTimeSecond=R(pf);D.prototype.visitTimeMillisecond=R(yf);D.prototype.visitTimeMicrosecond=R(mf);D.prototype.visitTimeNanosecond=R(gf);D.prototype.visitDecimal=R(u_);D.prototype.visitList=R(XT);D.prototype.visitStruct=R(rO);D.prototype.visitUnion=R(sO);D.prototype.visitDenseUnion=R(l_);D.prototype.visitSparseUnion=R(h_);D.prototype.visitDictionary=R(aO);D.prototype.visitInterval=R(f_);D.prototype.visitIntervalDayTime=R(_f);D.prototype.visitIntervalYearMonth=R(bf);D.prototype.visitDuration=R(d_);D.prototype.visitDurationSecond=R(vf);D.prototype.visitDurationMillisecond=R(wf);D.prototype.visitDurationMicrosecond=R(Sf);D.prototype.visitDurationNanosecond=R(If);D.prototype.visitFixedSizeList=R(oO);D.prototype.visitMap=R(ZT);const Je=new D,nn=Symbol.for("parent"),as=Symbol.for("rowIndex");class xf{constructor(t,n){return this[nn]=t,this[as]=n,new Proxy(this,new uO)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[as],n=this[nn],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=we.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${wr(t)}: ${wr(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new cO(this[nn],this[as])}}class cO{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,we.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[nn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[as]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class uO{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[nn].type.children.map(n=>n.name)}has(t,n){return t[nn].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[nn].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[nn].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=we.visit(t[nn].children[i],t[as]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[nn].type.children.findIndex(s=>s.name===n);return r!==-1?(Je.visit(t[nn].children[r],t[as],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class B extends X{}function k(e){return(t,n)=>t.getValid(n)?e(t,n):null}const lO=(e,t)=>864e5*e[t],Af=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),hO=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,fO=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,p_=e=>new Date(e),dO=(e,t)=>p_(lO(e,t)),pO=(e,t)=>p_(Af(e,t)),yO=(e,t)=>null,y_=(e,t,n)=>{if(n+1>=t.length)return null;const i=Zt(t[n]),r=Zt(t[n+1]);return e.subarray(i,r)},mO=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},m_=({values:e},t)=>dO(e,t),g_=({values:e},t)=>pO(e,t*2),Zi=({stride:e,values:t},n)=>t[e*n],gO=({stride:e,values:t},n)=>Z0(t[e*n]),__=({values:e},t)=>e[t],_O=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),b_=({values:e,valueOffsets:t},n)=>y_(e,t,n),v_=({values:e,valueOffsets:t},n)=>{const i=y_(e,t,n);return i!==null?Rl(i):null},bO=({values:e},t)=>e[t],vO=({type:e,values:t},n)=>e.precision!==Ht.HALF?t[n]:Z0(t[n]),wO=(e,t)=>e.type.unit===Ge.DAY?m_(e,t):g_(e,t),w_=({values:e},t)=>1e3*Af(e,t*2),S_=({values:e},t)=>Af(e,t*2),I_=({values:e},t)=>hO(e,t*2),x_=({values:e},t)=>fO(e,t*2),SO=(e,t)=>{switch(e.type.unit){case E.SECOND:return w_(e,t);case E.MILLISECOND:return S_(e,t);case E.MICROSECOND:return I_(e,t);case E.NANOSECOND:return x_(e,t)}},A_=({values:e},t)=>e[t],E_=({values:e},t)=>e[t],B_=({values:e},t)=>e[t],T_=({values:e},t)=>e[t],IO=(e,t)=>{switch(e.type.unit){case E.SECOND:return A_(e,t);case E.MILLISECOND:return E_(e,t);case E.MICROSECOND:return B_(e,t);case E.NANOSECOND:return T_(e,t)}},xO=({values:e,stride:t},n)=>Kh.decimal(e.subarray(t*n,t*(n+1))),AO=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,c=r[0].slice(s,a-s);return new lt([c])},EO=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new yu(a.slice(r,s-r))},BO=(e,t)=>new xf(e,t),TO=(e,t)=>e.type.mode===ae.Dense?O_(e,t):N_(e,t),O_=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return we.visit(i,e.valueOffsets[t])},N_=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return we.visit(i,t)},OO=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},NO=(e,t)=>e.type.unit===Ke.DAY_TIME?F_(e,t):D_(e,t),F_=({values:e},t)=>e.subarray(2*t,2*(t+1)),D_=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},k_=({values:e},t)=>e[t],C_=({values:e},t)=>e[t],R_=({values:e},t)=>e[t],L_=({values:e},t)=>e[t],FO=(e,t)=>{switch(e.type.unit){case E.SECOND:return k_(e,t);case E.MILLISECOND:return C_(e,t);case E.MICROSECOND:return R_(e,t);case E.NANOSECOND:return L_(e,t)}},DO=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new lt([s])};B.prototype.visitNull=k(yO);B.prototype.visitBool=k(mO);B.prototype.visitInt=k(bO);B.prototype.visitInt8=k(Zi);B.prototype.visitInt16=k(Zi);B.prototype.visitInt32=k(Zi);B.prototype.visitInt64=k(__);B.prototype.visitUint8=k(Zi);B.prototype.visitUint16=k(Zi);B.prototype.visitUint32=k(Zi);B.prototype.visitUint64=k(__);B.prototype.visitFloat=k(vO);B.prototype.visitFloat16=k(gO);B.prototype.visitFloat32=k(Zi);B.prototype.visitFloat64=k(Zi);B.prototype.visitUtf8=k(v_);B.prototype.visitLargeUtf8=k(v_);B.prototype.visitBinary=k(b_);B.prototype.visitLargeBinary=k(b_);B.prototype.visitFixedSizeBinary=k(_O);B.prototype.visitDate=k(wO);B.prototype.visitDateDay=k(m_);B.prototype.visitDateMillisecond=k(g_);B.prototype.visitTimestamp=k(SO);B.prototype.visitTimestampSecond=k(w_);B.prototype.visitTimestampMillisecond=k(S_);B.prototype.visitTimestampMicrosecond=k(I_);B.prototype.visitTimestampNanosecond=k(x_);B.prototype.visitTime=k(IO);B.prototype.visitTimeSecond=k(A_);B.prototype.visitTimeMillisecond=k(E_);B.prototype.visitTimeMicrosecond=k(B_);B.prototype.visitTimeNanosecond=k(T_);B.prototype.visitDecimal=k(xO);B.prototype.visitList=k(AO);B.prototype.visitStruct=k(BO);B.prototype.visitUnion=k(TO);B.prototype.visitDenseUnion=k(O_);B.prototype.visitSparseUnion=k(N_);B.prototype.visitDictionary=k(OO);B.prototype.visitInterval=k(NO);B.prototype.visitIntervalDayTime=k(F_);B.prototype.visitIntervalYearMonth=k(D_);B.prototype.visitDuration=k(FO);B.prototype.visitDurationSecond=k(k_);B.prototype.visitDurationMillisecond=k(C_);B.prototype.visitDurationMicrosecond=k(R_);B.prototype.visitDurationNanosecond=k(L_);B.prototype.visitFixedSizeList=k(DO);B.prototype.visitMap=k(EO);const we=new B,sn=Symbol.for("keys"),os=Symbol.for("vals");class yu{constructor(t){return this[sn]=new lt([t.children[0]]).memoize(),this[os]=t.children[1],new Proxy(this,new CO)}[Symbol.iterator](){return new kO(this[sn],this[os])}get size(){return this[sn].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[sn],n=this[os],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=we.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${wr(t)}: ${wr(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class kO{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),we.visit(this.vals,t)]})}}class CO{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[sn].toArray().map(String)}has(t,n){return t[sn].includes(n)}getOwnPropertyDescriptor(t,n){if(t[sn].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[sn].indexOf(n);if(i!==-1){const r=we.visit(Reflect.get(t,os),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[sn].indexOf(n);return r!==-1?(Je.visit(Reflect.get(t,os),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(yu.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[sn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[os]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Cp;function M_(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Cp=s,s=a,a=Cp),a>r&&(a=r),i?i(e,s,a):[s,a]}const Rp=e=>e!==e;function Fs(e){if(typeof e!=="object"||e===null)return Rp(e)?Rp:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?TT(e,n):!1:e instanceof Map?LO(e):Array.isArray(e)?RO(e):e instanceof lt?MO(e):UO(e,!0)}function RO(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Fs(e[n]);return mu(t)}function LO(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Fs(i);return mu(n)}function MO(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Fs(e.get(n));return mu(t)}function UO(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Fs(e[n[r]]);return mu(i,n)}function mu(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return PO(e,n);case Map:return Lp(e,n,n.keys());case yu:case xf:case Object:case void 0:return Lp(e,n,t||Object.keys(n))}return n instanceof lt?$O(e,n):!1}}function PO(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function $O(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function Lp(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let c=s.next(),u=i.next(),l=r.next();for(;a<o&&!u.done&&!l.done&&!c.done&&!(u.value!==l.value||!e[a](c.value));++a,u=i.next(),l=r.next(),c=s.next());return a===o&&u.done&&l.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function U_(e,t,n,i){return(n&1<<i)!==0}function VO(e,t,n,i){return(n&1<<i)>>i}function Vc(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):P_(new Ef(n,e,t,null,U_)).subarray(0,i)),r}return n}function P_(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Ef{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function $l(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new Ef(e,t,n-t,e,VO))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return $l(e,t,r)+$l(e,i,n)+jO(e,r>>3,i-r>>3)}function jO(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=Qu(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Qu(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Qu(s.getUint8(r)),r+=1;return i}function Qu(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const zO=-1;class ft{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return P.isSparseUnion(t)?this.children.some(n=>n.nullable):P.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){if(P.isUnion(this.type))return this.children.reduce((i,r)=>i+r.nullCount,0);let t=this._nullCount,n;return t<=zO&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-$l(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof ft?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=En(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c)))}getValid(t){const{type:n}=this;if(P.isUnion(n)){const i=n,r=this.children[i.typeIdToChildIndex[this.typeIds[t]]],s=i.mode===ae.Dense?this.valueOffsets[t]:t;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const i=this.offset+t;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(t,n){let i;const{type:r}=this;if(P.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[t]]],o=s.mode===ae.Dense?this.valueOffsets[t]:t;i=a.getValid(o),a.setValid(o,n)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,c=a+t,u=1<<c%8,l=c>>3;(!s||s.byteLength<=l)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0&&s.set(Vc(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const h=s[l];i=(h&u)!==0,n?s[l]=h|u:s[l]=h&~u}return i!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new ft(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,c=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===p.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(Vc(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ti.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[ti.TYPE])&&(a[ti.TYPE]=s.subarray(t,t+n)),(s=a[ti.OFFSET])&&(a[ti.OFFSET]=s.subarray(t,t+n+1))||(s=a[ti.DATA])&&(a[ti.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}ft.prototype.children=Object.freeze([]);class ma extends X{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new ft(n,i,r,r)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,r,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.data),s=st(t.nullBitmap),a=xp(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.data),s=st(t.nullBitmap),a=Ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,r,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.data),s=st(t.nullBitmap),a=xp(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=st(t.nullBitmap),a=Ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=st(t.nullBitmap),{length:a=r.reduce((c,{length:u})=>Math.max(c,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=jt(n.ArrayType,t.typeIds),{["length"]:a=s.length,["nullCount"]:o=-1}=t;if(P.isSparseUnion(n))return new ft(n,i,a,o,[void 0,void 0,void 0,s],r);const c=Ys(t.valueOffsets);return new ft(n,i,a,o,[c,void 0,void 0,s],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.indices.ArrayType,t.data),{["dictionary"]:a=new lt([new ma().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitDuration(t){const{["type"]:n,["offset"]:i=0}=t,r=st(t.nullBitmap),s=jt(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new ma().visit({type:n.valueType})}=t,s=st(t.nullBitmap),{["length"]:a=r.length/En(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new ft(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new ma().visit({type:n.childType})}=t,s=st(t.nullBitmap),a=Ys(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new ft(n,i,o,c,[a,void 0,s],[r])}}const WO=new ma;function ee(e){return WO.visit(e)}class Mp{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function qO(e){return e.some(t=>t.nullable)}function $_(e){return e.reduce((t,n)=>t+n.nullCount,0)}function V_(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function j_(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],c=t[s],{length:u}=o;if(c>=i)break;if(n>=c+u)continue;if(c>=n&&c+u<=i){r.push(o);continue}const l=Math.max(0,n-c),h=Math.min(i-c,u);r.push(o.slice(l,h-l))}return r.length===0&&r.push(e[0].slice(0,0)),r}function Bf(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function Tf(e,t){return e.getValid(t)}function jc(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return Bf(i,this._offsets,n,t)}}function z_(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=Bf(s,this._offsets,i,n);return t=void 0,a}}function W_(e){let t;function n(i,r,s){let a=s,o=0,c=0;for(let u=r-1,l=i.length;++u<l;){const h=i[u];if(~(o=e(h,t,a)))return c+o;a=0,c+=h.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):Bf(s,this._offsets,r,n);return t=void 0,a}}class T extends X{}function YO(e,t){return t===null&&e.length>0?0:-1}function HO(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new Ef(n,e.offset+(t||0),e.length,n,U_)){if(!r)return i;++i}return-1}function L(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case p.Union:break;case p.Dictionary:break;default:return HO(e,n)}const i=we.getVisitFn(e),r=Fs(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function q_(e,t,n){const i=we.getVisitFn(e),r=Fs(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}T.prototype.visitNull=YO;T.prototype.visitBool=L;T.prototype.visitInt=L;T.prototype.visitInt8=L;T.prototype.visitInt16=L;T.prototype.visitInt32=L;T.prototype.visitInt64=L;T.prototype.visitUint8=L;T.prototype.visitUint16=L;T.prototype.visitUint32=L;T.prototype.visitUint64=L;T.prototype.visitFloat=L;T.prototype.visitFloat16=L;T.prototype.visitFloat32=L;T.prototype.visitFloat64=L;T.prototype.visitUtf8=L;T.prototype.visitLargeUtf8=L;T.prototype.visitBinary=L;T.prototype.visitLargeBinary=L;T.prototype.visitFixedSizeBinary=L;T.prototype.visitDate=L;T.prototype.visitDateDay=L;T.prototype.visitDateMillisecond=L;T.prototype.visitTimestamp=L;T.prototype.visitTimestampSecond=L;T.prototype.visitTimestampMillisecond=L;T.prototype.visitTimestampMicrosecond=L;T.prototype.visitTimestampNanosecond=L;T.prototype.visitTime=L;T.prototype.visitTimeSecond=L;T.prototype.visitTimeMillisecond=L;T.prototype.visitTimeMicrosecond=L;T.prototype.visitTimeNanosecond=L;T.prototype.visitDecimal=L;T.prototype.visitList=L;T.prototype.visitStruct=L;T.prototype.visitUnion=L;T.prototype.visitDenseUnion=q_;T.prototype.visitSparseUnion=q_;T.prototype.visitDictionary=L;T.prototype.visitInterval=L;T.prototype.visitIntervalDayTime=L;T.prototype.visitIntervalYearMonth=L;T.prototype.visitDuration=L;T.prototype.visitDurationSecond=L;T.prototype.visitDurationMillisecond=L;T.prototype.visitDurationMicrosecond=L;T.prototype.visitDurationNanosecond=L;T.prototype.visitFixedSizeList=L;T.prototype.visitMap=L;const zc=new T;class O extends X{}function C(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===p.Timestamp||t instanceof oe&&t.bitWidth!==64||t instanceof hi&&t.bitWidth!==64||t instanceof Vi&&t.precision!==Ht.HALF))return new Mp(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new Mp(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new GO(a)})}class GO{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}O.prototype.visitNull=C;O.prototype.visitBool=C;O.prototype.visitInt=C;O.prototype.visitInt8=C;O.prototype.visitInt16=C;O.prototype.visitInt32=C;O.prototype.visitInt64=C;O.prototype.visitUint8=C;O.prototype.visitUint16=C;O.prototype.visitUint32=C;O.prototype.visitUint64=C;O.prototype.visitFloat=C;O.prototype.visitFloat16=C;O.prototype.visitFloat32=C;O.prototype.visitFloat64=C;O.prototype.visitUtf8=C;O.prototype.visitLargeUtf8=C;O.prototype.visitBinary=C;O.prototype.visitLargeBinary=C;O.prototype.visitFixedSizeBinary=C;O.prototype.visitDate=C;O.prototype.visitDateDay=C;O.prototype.visitDateMillisecond=C;O.prototype.visitTimestamp=C;O.prototype.visitTimestampSecond=C;O.prototype.visitTimestampMillisecond=C;O.prototype.visitTimestampMicrosecond=C;O.prototype.visitTimestampNanosecond=C;O.prototype.visitTime=C;O.prototype.visitTimeSecond=C;O.prototype.visitTimeMillisecond=C;O.prototype.visitTimeMicrosecond=C;O.prototype.visitTimeNanosecond=C;O.prototype.visitDecimal=C;O.prototype.visitList=C;O.prototype.visitStruct=C;O.prototype.visitUnion=C;O.prototype.visitDenseUnion=C;O.prototype.visitSparseUnion=C;O.prototype.visitDictionary=C;O.prototype.visitInterval=C;O.prototype.visitIntervalDayTime=C;O.prototype.visitIntervalYearMonth=C;O.prototype.visitDuration=C;O.prototype.visitDurationSecond=C;O.prototype.visitDurationMillisecond=C;O.prototype.visitDurationMicrosecond=C;O.prototype.visitDurationNanosecond=C;O.prototype.visitFixedSizeList=C;O.prototype.visitMap=C;const Of=new O;var Y_;const H_={},G_={};class lt{constructor(t){var n,i,r;const s=t[0]instanceof lt?t.flatMap(o=>o.data):t;if(s.length===0||s.some(o=>!(o instanceof ft)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:c,indexOf:u}=H_[a.typeId],l=s[0];this.isValid=h=>Tf(l,h),this.get=h=>o(l,h),this.set=(h,d)=>c(l,h,d),this.indexOf=h=>u(l,h),this._offsets=[0,l.length];break}default:Object.setPrototypeOf(this,G_[a.typeId]),this._offsets=V_(s);break}this.data=s,this.type=a,this.stride=En(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return qO(this.data)}get nullCount(){return $_(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${p[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return Of.visit(this)}concat(...t){return new lt(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new lt(M_(this,t,n,({data:i,_offsets:r},s,a)=>j_(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case p.Int:case p.Float:case p.Decimal:case p.Time:case p.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o,length:c})=>(a.array.set(o.subarray(0,c*r),a.offset),a.offset+=c*r,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new lt(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return P.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(P.isDictionary(this.type)){const t=new Wc(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new lt(n)}return new Wc(this)}unmemoize(){if(P.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new lt(n)}return this}}Y_=Symbol.toStringTag;lt[Y_]=(e=>{e.type=P.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(p).map(n=>p[n]).filter(n=>typeof n=="number"&&n!==p.NONE);for(const n of t){const i=we.getVisitFnByTypeId(n),r=Je.getVisitFnByTypeId(n),s=zc.getVisitFnByTypeId(n);H_[n]={get:i,set:r,indexOf:s},G_[n]=Object.create(e,{isValid:{value:jc(Tf)},get:{value:jc(we.getVisitFnByTypeId(n))},set:{value:z_(Je.getVisitFnByTypeId(n))},indexOf:{value:W_(zc.getVisitFnByTypeId(n))}})}return"Vector"})(lt.prototype);class Wc extends lt{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const c=n.call(this,a);return s[a]=c,c}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Wc(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new lt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function KO(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${JO(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function JO(e){return typeof e!="bigint"?wr(e):`${wr(e)}n`}function Xu(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function Up(e,t=0){return e.length>=t?e.subarray(0,t):Ll(new e.constructor(t),e,0)}class Qa{constructor(t,n=0,i=1){this.length=Math.ceil(n/i),this.buffer=new t(this.length),this.stride=i,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?Xu(i*1,this.BYTES_PER_ELEMENT):Xu(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Xu(t*this.stride,this.BYTES_PER_ELEMENT);const n=Up(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=Up(this.buffer,t)}}class Xa extends Qa{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class K_ extends Xa{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class J_ extends Xa{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&i>=0&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let xe=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=En(t),this._nulls=new K_,n&&n.length>0&&(this._isValid=KO(n))}toVector(){return new lt([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,c)=>o+c.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:c,_offsets:u,_values:l,_nulls:h}=this;(n=c==null?void 0:c.flush(a))?r=u==null?void 0:u.flush(a):(r=u==null?void 0:u.flush(a))?t=l==null?void 0:l.flush(u.last()):t=l==null?void 0:l.flush(a),o>0&&(i=h==null?void 0:h.flush(a));const d=this.children.map(y=>y.flush());return this.clear(),ee({type:s,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}};xe.prototype.length=1;xe.prototype.stride=1;xe.prototype.children=null;xe.prototype.finished=!1;xe.prototype.nullValues=null;xe.prototype._isValid=()=>!0;class _i extends xe{constructor(t){super(t),this._values=new Xa(this.ArrayType,0,this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class Ds extends xe{constructor(t){super(t),this._pendingLength=0,this._offsets=new J_(t.type)}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof yu?n[sn].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(BigInt(r??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}}class Ee{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Ee).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+x),(n||new Ee).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qt.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new xn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Vl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Vl).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Wt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qt.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gt{constructor(t=[],n,i,r=qt.V5){this.fields=t||[],this.metadata=n||new Map,i||(i=jl(t)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new gt(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new gt(n,this.metadata)}assign(...t){const n=t[0]instanceof gt?t[0]:Array.isArray(t[0])?new gt(t[0]):new gt(t),i=[...this.fields],r=yo(yo(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const c=i.findIndex(u=>u.name===o.name);return~c?(i[c]=o.clone({metadata:yo(yo(new Map,i[c].metadata),o.metadata)}))&&!1:!0}),a=jl(s,new Map);return new gt([...i,...s],r,new Map([...this.dictionaries,...a]))}}gt.prototype.fields=null;gt.prototype.metadata=null;gt.prototype.dictionaries=null;class yt{static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new yt(`${n}`,i,r,s)}constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],yt.new(n,i,r,s)}}yt.prototype.type=null;yt.prototype.name=null;yt.prototype.nullable=null;yt.prototype.metadata=null;function yo(e,t){return new Map([...e||new Map,...t||new Map])}function jl(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(P.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&jl(s.children,t)}return t}var QO=au,XO=Mi;class zl{static decode(t){t=new XO(st(t));const n=Ee.getRootAsFooter(t),i=gt.decode(n.schema(),new Map,n.version());return new ZO(i,n)}static encode(t){const n=new QO,i=gt.encode(n,t.schema);Ee.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())zi.encode(n,a);const r=n.endVector();Ee.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())zi.encode(n,a);const s=n.endVector();return Ee.startFooter(n),Ee.addSchema(n,i),Ee.addVersion(n,qt.V5),Ee.addRecordBatches(n,r),Ee.addDictionaries(n,s),Ee.finishFooterBuffer(n,Ee.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=qt.V5,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class ZO extends zl{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return zi.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return zi.decode(n)}return null}}class zi{static decode(t){return new zi(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=BigInt(n.offset),s=BigInt(n.bodyLength);return Vl.createBlock(t,r,i,s)}constructor(t,n,i){this.metaDataLength=t,this.offset=Zt(i),this.bodyLength=Zt(n)}}const mo=Object.freeze({done:!0,value:void 0});class Q_{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class tN extends Q_{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(mo);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Ap.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Ap.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return A(this,void 0,void 0,function*(){return yield this.abort(t),mo})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),mo})}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(mo)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Zu extends tN{write(t){if((t=st(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Rl(this.toUint8Array(!0)):this.toUint8Array(!1).then(Rl)}toUint8Array(t=!1){return t?Pn(this._values)[0]:(()=>A(this,void 0,void 0,function*(){var n,i,r,s;const a=[];let o=0;try{for(var c=!0,u=qe(this),l;l=yield u.next(),n=l.done,!n;c=!0){s=l.value,c=!1;const h=s;a.push(h),o+=h.byteLength}}catch(h){i={error:h}}finally{try{!c&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}return Pn(a,o)[0]}))()}}class X_ extends Ds{constructor(t){super(t),this._values=new Qa(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,st(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const c=o.length;r.set(o,s),i.set(a,c),s+=c}}}class Z_ extends Ds{constructor(t){super(t),this._values=new Qa(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,st(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,BigInt(0));else{const c=o.length;r.set(o,s),i.set(a,BigInt(c)),s+=c}}}class eN extends xe{constructor(t){super(t),this._values=new K_}setValue(t,n){this._values.set(t,+n)}}class gu extends _i{}gu.prototype._setValue=a_;class tb extends gu{}tb.prototype._setValue=cf;class eb extends gu{}eb.prototype._setValue=uf;class nb extends _i{}nb.prototype._setValue=u_;class nN extends xe{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new ji(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=qc({type:this.type.indices,nullValues:n}),this.dictionary=qc({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class ib extends _i{}ib.prototype._setValue=i_;class iN extends xe{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new Is(this.type.listSize,new yt(n,t.type,!0)),i}}class _u extends _i{setValue(t,n){this._values.set(t,n)}}class rN extends _u{setValue(t,n){super.setValue(t,t_(n))}}class sN extends _u{}class aN extends _u{}class bu extends _i{}bu.prototype._setValue=f_;class rb extends bu{}rb.prototype._setValue=_f;class sb extends bu{}sb.prototype._setValue=bf;class ks extends _i{}ks.prototype._setValue=d_;class ab extends ks{}ab.prototype._setValue=vf;class ob extends ks{}ob.prototype._setValue=wf;class cb extends ks{}cb.prototype._setValue=Sf;class ub extends ks{}ub.prototype._setValue=If;class bi extends _i{setValue(t,n){this._values.set(t,n)}}class oN extends bi{}class cN extends bi{}class uN extends bi{}class lN extends bi{}class hN extends bi{}class fN extends bi{}class dN extends bi{}class pN extends bi{}class yN extends Ds{constructor(t){super(t),this._offsets=new J_(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ss(new yt(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(typeof s>"u")n.set(r,0);else{const a=s,o=a.length,c=n.set(r,o).buffer[r];for(let u=-1;++u<o;)i.set(c+u,a[u])}}}class mN extends Ds{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ma(new yt(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const c of s.entries())if(i.set(a,c),++a>=o)break}}}class gN extends xe{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class _N extends xe{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new ne([...this.type.children,new yt(n,t.type,!0)]),i}}class Cs extends _i{}Cs.prototype._setValue=o_;class lb extends Cs{}lb.prototype._setValue=lf;class hb extends Cs{}hb.prototype._setValue=hf;class fb extends Cs{}fb.prototype._setValue=ff;class db extends Cs{}db.prototype._setValue=df;class Rs extends _i{}Rs.prototype._setValue=c_;class pb extends Rs{}pb.prototype._setValue=pf;class yb extends Rs{}yb.prototype._setValue=yf;class mb extends Rs{}mb.prototype._setValue=mf;class gb extends Rs{}gb.prototype._setValue=gf;class Nf extends xe{constructor(t){super(t),this._typeIds=new Xa(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new yt(n,t.type)];return this.type=new La(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class bN extends Nf{}class vN extends Nf{constructor(t){super(t),this._offsets=new Xa(Int32Array)}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s==null||s.set(a,n)}}class _b extends Ds{constructor(t){super(t),this._values=new Qa(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,fu(n))}_flushPending(t,n){}}_b.prototype._flushPending=X_.prototype._flushPending;class bb extends Ds{constructor(t){super(t),this._values=new Qa(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,fu(n))}_flushPending(t,n){}}bb.prototype._flushPending=Z_.prototype._flushPending;class wN extends X{visitNull(){return gN}visitBool(){return eN}visitInt(){return bi}visitInt8(){return oN}visitInt16(){return cN}visitInt32(){return uN}visitInt64(){return lN}visitUint8(){return hN}visitUint16(){return fN}visitUint32(){return dN}visitUint64(){return pN}visitFloat(){return _u}visitFloat16(){return rN}visitFloat32(){return sN}visitFloat64(){return aN}visitUtf8(){return _b}visitLargeUtf8(){return bb}visitBinary(){return X_}visitLargeBinary(){return Z_}visitFixedSizeBinary(){return ib}visitDate(){return gu}visitDateDay(){return tb}visitDateMillisecond(){return eb}visitTimestamp(){return Cs}visitTimestampSecond(){return lb}visitTimestampMillisecond(){return hb}visitTimestampMicrosecond(){return fb}visitTimestampNanosecond(){return db}visitTime(){return Rs}visitTimeSecond(){return pb}visitTimeMillisecond(){return yb}visitTimeMicrosecond(){return mb}visitTimeNanosecond(){return gb}visitDecimal(){return nb}visitList(){return yN}visitStruct(){return _N}visitUnion(){return Nf}visitDenseUnion(){return vN}visitSparseUnion(){return bN}visitDictionary(){return nN}visitInterval(){return bu}visitIntervalDayTime(){return rb}visitIntervalYearMonth(){return sb}visitDuration(){return ks}visitDurationSecond(){return ab}visitDurationMillisecond(){return ob}visitDurationMicrosecond(){return cb}visitDurationNanosecond(){return ub}visitFixedSizeList(){return iN}visitMap(){return mN}}const SN=new wN;class N extends X{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ce(e,t){return t instanceof e.constructor}function xr(e,t){return e===t||ce(e,t)}function vi(e,t){return e===t||ce(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function vu(e,t){return e===t||ce(e,t)&&e.precision===t.precision}function IN(e,t){return e===t||ce(e,t)&&e.byteWidth===t.byteWidth}function Ff(e,t){return e===t||ce(e,t)&&e.unit===t.unit}function Za(e,t){return e===t||ce(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function to(e,t){return e===t||ce(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function xN(e,t){return e===t||ce(e,t)&&e.children.length===t.children.length&&Wi.compareManyFields(e.children,t.children)}function AN(e,t){return e===t||ce(e,t)&&e.children.length===t.children.length&&Wi.compareManyFields(e.children,t.children)}function Df(e,t){return e===t||ce(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Wi.compareManyFields(e.children,t.children)}function EN(e,t){return e===t||ce(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Wi.visit(e.indices,t.indices)&&Wi.visit(e.dictionary,t.dictionary)}function kf(e,t){return e===t||ce(e,t)&&e.unit===t.unit}function eo(e,t){return e===t||ce(e,t)&&e.unit===t.unit}function BN(e,t){return e===t||ce(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Wi.compareManyFields(e.children,t.children)}function TN(e,t){return e===t||ce(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Wi.compareManyFields(e.children,t.children)}N.prototype.visitNull=xr;N.prototype.visitBool=xr;N.prototype.visitInt=vi;N.prototype.visitInt8=vi;N.prototype.visitInt16=vi;N.prototype.visitInt32=vi;N.prototype.visitInt64=vi;N.prototype.visitUint8=vi;N.prototype.visitUint16=vi;N.prototype.visitUint32=vi;N.prototype.visitUint64=vi;N.prototype.visitFloat=vu;N.prototype.visitFloat16=vu;N.prototype.visitFloat32=vu;N.prototype.visitFloat64=vu;N.prototype.visitUtf8=xr;N.prototype.visitLargeUtf8=xr;N.prototype.visitBinary=xr;N.prototype.visitLargeBinary=xr;N.prototype.visitFixedSizeBinary=IN;N.prototype.visitDate=Ff;N.prototype.visitDateDay=Ff;N.prototype.visitDateMillisecond=Ff;N.prototype.visitTimestamp=Za;N.prototype.visitTimestampSecond=Za;N.prototype.visitTimestampMillisecond=Za;N.prototype.visitTimestampMicrosecond=Za;N.prototype.visitTimestampNanosecond=Za;N.prototype.visitTime=to;N.prototype.visitTimeSecond=to;N.prototype.visitTimeMillisecond=to;N.prototype.visitTimeMicrosecond=to;N.prototype.visitTimeNanosecond=to;N.prototype.visitDecimal=xr;N.prototype.visitList=xN;N.prototype.visitStruct=AN;N.prototype.visitUnion=Df;N.prototype.visitDenseUnion=Df;N.prototype.visitSparseUnion=Df;N.prototype.visitDictionary=EN;N.prototype.visitInterval=kf;N.prototype.visitIntervalDayTime=kf;N.prototype.visitIntervalYearMonth=kf;N.prototype.visitDuration=eo;N.prototype.visitDurationSecond=eo;N.prototype.visitDurationMillisecond=eo;N.prototype.visitDurationMicrosecond=eo;N.prototype.visitDurationNanosecond=eo;N.prototype.visitFixedSizeList=BN;N.prototype.visitMap=TN;const Wi=new N;function Wl(e,t){return Wi.compareSchemas(e,t)}function qc(e){const t=e.type,n=new(SN.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:c}=o,u=s(o,a);n.children.push(qc(Object.assign(Object.assign({},u),{type:c})))}}return n}function tl(e,t){return ON(e,t.map(n=>n.data.concat()))}function ON(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((h,d)=>Math.max(h,d.length),0)};let s=0,a=0,o=-1;const c=t.length;let u,l=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)l[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(l=NN(n,a,l,t,r),a>0&&(i[s++]=ee({type:new ne(n),length:a,nullCount:0,children:l.slice()})))}return[e=e.assign(n),i.map(h=>new Te(e,h))]}function NN(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const u=n[o],l=u==null?void 0:u.length;if(l>=t)l===t?n[o]=u:(n[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(u.slice(t,l-t))));else{const h=e[o];e[o]=h.clone({nullable:!0}),n[o]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ee({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var vb;class ye{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new gt([]),this._offsets=[0],this;let r,s;t[0]instanceof gt&&(r=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const a=c=>{if(c){if(c instanceof Te)return[c];if(c instanceof ye)return c.batches;if(c instanceof ft){if(c.type instanceof ne)return[new Te(new gt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(u=>a(u));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(u=>a(u));if(typeof c=="object"){const u=Object.keys(c),l=u.map(y=>new lt([c[y]])),h=r??new gt(u.map((y,g)=>new yt(String(y),l[g].type,l[g].nullable))),[,d]=tl(h,l);return d.length===0?[new Te(c)]:d}}}return[]},o=t.flatMap(c=>a(c));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new gt([]),!(r instanceof gt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of o){if(!(c instanceof Te))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Wl(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??V_(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=$_(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?Of.visit(new lt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new ye(n,i.map(r=>new Te(n,r)))}slice(t,n){const i=this.schema;[t,n]=M_({length:this.numRows},t,n);const r=j_(this.data,this._offsets,t,n);return new ye(i,r.map(s=>new Te(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=ee({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new lt(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new lt([ee({type:new li,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((c,u)=>this.getChildAt(u));[s[t],o[t]]=[a,n],[i,r]=tl(i,o)}return new ye(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new ye(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,c,u)=>{const[l,h]=o,d=n.findIndex(y=>y.name===c.name);return~d?h[d]=u:l.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,c)=>[c,r[c]]).map(([o,c])=>c===void 0?this.getChildAt(o):t.getChildAt(c)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new ye(...tl(s,a))}}vb=Symbol.toStringTag;ye[vb]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=jc(Tf),e.get=jc(we.getVisitFn(p.Struct)),e.set=z_(Je.getVisitFn(p.Struct)),e.indexOf=W_(zc.getVisitFn(p.Struct)),"Table"))(ye.prototype);var wb;let Te=class da{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ee({nullCount:0,type:new ne(this.schema.fields),children:this.schema.fields.map(n=>ee({type:n.type,nullCount:0}))})]=t,!(this.data instanceof ft))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Pp(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((c,u,l)=>(c.children[l]=n[u],c.length=Math.max(c.length,n[u].length),c.fields[l]=yt.new({name:u,type:n[u].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),a=new gt(i),o=ee({type:new ne(i),length:s,children:r,nullCount:0});[this.schema,this.data]=Pp(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Sb(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return we.visit(this.data,t)}set(t,n){return Je.visit(this.data,t,n)}indexOf(t,n){return zc.visit(this.data,t,n)}[Symbol.iterator](){return Of.visit(new lt([this.data]))}toArray(){return[...this]}concat(...t){return new ye(this.schema,[this,...t])}slice(t,n){const[i]=new lt([this.data]).slice(t,n).data;return new da(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new lt([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new lt([ee({type:new li,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new gt(s,new Map(this.schema.metadata)),r=ee({type:new ne(s),children:a})}return new da(i,r)}select(t){const n=this.schema.select(t),i=new ne(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new da(n,ee({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=ee({type:new ne(n.fields),length:this.numRows,children:i});return new da(n,r)}};wb=Symbol.toStringTag;Te[wb]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Te.prototype);function Pp(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,c]of e.fields.entries()){const u=t[o];(!u||u.length!==n)&&(r[o]=c.clone({nullable:!0}),s[o]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:ee({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),ee({type:new ne(r),length:n,children:s})]}function Sb(e,t,n=new Map){var i,r;if(((i=e==null?void 0:e.length)!==null&&i!==void 0?i:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,a=e.length;++s<a;){const{type:o}=e[s],c=t[s];for(const u of[c,...((r=c==null?void 0:c.dictionary)===null||r===void 0?void 0:r.data)||[]])Sb(o.children,u==null?void 0:u.children,n);if(P.isDictionary(o)){const{id:u}=o;if(!n.has(u))c!=null&&c.dictionary&&n.set(u,c.dictionary);else if(n.get(u)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class FN extends Te{constructor(t){const n=t.fields.map(r=>ee({type:r.type})),i=ee({type:new ne(t.fields),nullCount:0,children:n});super(t,i)}}let xi=class vn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new vn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+x),(n||new vn).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qt.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Pt.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Wt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qt.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Pt.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return vn.startMessage(t),vn.addVersion(t,n),vn.addHeaderType(t,i),vn.addHeader(t,r),vn.addBodyLength(t,s),vn.addCustomMetadata(t,a),vn.endMessage(t)}};class DN extends X{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Fp.startNull(n),Fp.endNull(n)}visitInt(t,n){return Be.startInt(n),Be.addBitWidth(n,t.bitWidth),Be.addIsSigned(n,t.isSigned),Be.endInt(n)}visitFloat(t,n){return On.startFloatingPoint(n),On.addPrecision(n,t.precision),On.endFloatingPoint(n)}visitBinary(t,n){return Ep.startBinary(n),Ep.endBinary(n)}visitLargeBinary(t,n){return Tp.startLargeBinary(n),Tp.endLargeBinary(n)}visitBool(t,n){return Bp.startBool(n),Bp.endBool(n)}visitUtf8(t,n){return Dp.startUtf8(n),Dp.endUtf8(n)}visitLargeUtf8(t,n){return Op.startLargeUtf8(n),Op.endLargeUtf8(n)}visitDecimal(t,n){return Vr.startDecimal(n),Vr.addScale(n,t.scale),Vr.addPrecision(n,t.precision),Vr.addBitWidth(n,t.bitWidth),Vr.endDecimal(n)}visitDate(t,n){return Mo.startDate(n),Mo.addUnit(n,t.unit),Mo.endDate(n)}visitTime(t,n){return $e.startTime(n),$e.addUnit(n,t.unit),$e.addBitWidth(n,t.bitWidth),$e.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return Ve.startTimestamp(n),Ve.addUnit(n,t.unit),i!==void 0&&Ve.addTimezone(n,i),Ve.endTimestamp(n)}visitInterval(t,n){return Nn.startInterval(n),Nn.addUnit(n,t.unit),Nn.endInterval(n)}visitDuration(t,n){return Uo.startDuration(n),Uo.addUnit(n,t.unit),Uo.endDuration(n)}visitList(t,n){return Np.startList(n),Np.endList(n)}visitStruct(t,n){return mr.startStruct_(n),mr.endStruct_(n)}visitUnion(t,n){pe.startTypeIdsVector(n,t.typeIds.length);const i=pe.createTypeIdsVector(n,t.typeIds);return pe.startUnion(n),pe.addMode(n,t.mode),pe.addTypeIds(n,i),pe.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return ii.startDictionaryEncoding(n),ii.addId(n,BigInt(t.id)),ii.addIsOrdered(n,t.isOrdered),i!==void 0&&ii.addIndexType(n,i),ii.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Po.startFixedSizeBinary(n),Po.addByteWidth(n,t.byteWidth),Po.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return $o.startFixedSizeList(n),$o.addListSize(n,t.listSize),$o.endFixedSizeList(n)}visitMap(t,n){return Vo.startMap(n),Vo.addKeysSorted(n,t.keysSorted),Vo.endMap(n)}}const el=new DN;function kN(e,t=new Map){return new gt(RN(e,t),zo(e.metadata),t)}function Ib(e){return new De(e.count,xb(e.columns),Ab(e.columns))}function CN(e){return new $n(Ib(e.data),e.id,e.isDelta)}function RN(e,t){return(e.fields||[]).filter(Boolean).map(n=>yt.fromJSON(n,t))}function $p(e,t){return(e.children||[]).filter(Boolean).map(n=>yt.fromJSON(n,t))}function xb(e){return(e||[]).reduce((t,n)=>[...t,new qi(n.count,LN(n.VALIDITY)),...xb(n.children)],[])}function Ab(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new kn(t.length,r.VALIDITY.length)),r.TYPE_ID&&t.push(new kn(t.length,r.TYPE_ID.length)),r.OFFSET&&t.push(new kn(t.length,r.OFFSET.length)),r.DATA&&t.push(new kn(t.length,r.DATA.length)),t=Ab(r.children,t)}return t}function LN(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function MN(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=jp(e,$p(e,t)),r=new yt(e.name,a,e.nullable,zo(e.metadata))):t.has(n=s.id)?(i=(i=s.indexType)?Vp(i):new $i,o=new ji(t.get(n),i,n,s.isOrdered),r=new yt(e.name,o,e.nullable,zo(e.metadata))):(i=(i=s.indexType)?Vp(i):new $i,t.set(n,a=jp(e,$p(e,t))),o=new ji(a,i,n,s.isOrdered),r=new yt(e.name,o,e.nullable,zo(e.metadata))),r||null}function zo(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Vp(e){return new oe(e.isSigned,e.bitWidth)}function jp(e,t){const n=e.type.name;switch(n){case"NONE":return new li;case"null":return new li;case"binary":return new Ca;case"largebinary":return new Rc;case"utf8":return new bs;case"largeutf8":return new Lc;case"bool":return new Ra;case"list":return new Ss((t||[])[0]);case"struct":return new ne(t||[]);case"struct_":return new ne(t||[])}switch(n){case"int":{const i=e.type;return new oe(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Vi(Ht[i.precision])}case"decimal":{const i=e.type;return new Mc(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new vs(Ge[i.unit])}case"time":{const i=e.type;return new hi(E[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new Uc(E[i.unit],i.timezone)}case"interval":{const i=e.type;return new ws(Ke[i.unit])}case"duration":{const i=e.type;return new Pc(E[i.unit])}case"union":{const i=e.type,[r,...s]=(i.mode+"").toLowerCase(),a=r.toUpperCase()+s.join("");return new La(ae[a],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new $c(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new Is(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new Ma((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var UN=au,PN=Mi;class Fn{static fromJSON(t,n){const i=new Fn(0,qt.V5,n);return i._createHeader=$N(t,n),i}static decode(t){t=new PN(st(t));const n=xi.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Fn(i,r,s);return a._createHeader=VN(n,s),a}static encode(t){const n=new UN;let i=-1;return t.isSchema()?i=gt.encode(n,t.header()):t.isRecordBatch()?i=De.encode(n,t.header()):t.isDictionaryBatch()&&(i=$n.encode(n,t.header())),xi.startMessage(n),xi.addVersion(n,qt.V5),xi.addHeader(n,i),xi.addHeaderType(n,t.headerType),xi.addBodyLength(n,BigInt(t.bodyLength)),xi.finishMessageBuffer(n,xi.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gt)return new Fn(0,qt.V5,Pt.Schema,t);if(t instanceof De)return new Fn(n,qt.V5,Pt.RecordBatch,t);if(t instanceof $n)return new Fn(n,qt.V5,Pt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Pt.Schema}isRecordBatch(){return this.headerType===Pt.RecordBatch}isDictionaryBatch(){return this.headerType===Pt.DictionaryBatch}constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=Zt(t)}}class De{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=Zt(t)}}class $n{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=Zt(n)}}class kn{constructor(t,n){this.offset=Zt(t),this.length=Zt(n)}}class qi{constructor(t,n){this.length=Zt(t),this.nullCount=Zt(n)}}function $N(e,t){return()=>{switch(t){case Pt.Schema:return gt.fromJSON(e);case Pt.RecordBatch:return De.fromJSON(e);case Pt.DictionaryBatch:return $n.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Pt[t]}, type: ${t} }`)}}function VN(e,t){return()=>{switch(t){case Pt.Schema:return gt.decode(e.header(new xn),new Map,e.version());case Pt.RecordBatch:return De.decode(e.header(new Zn),e.version());case Pt.DictionaryBatch:return $n.decode(e.header(new Pr),e.version())}throw new Error(`Unrecognized Message type: { name: ${Pt[t]}, type: ${t} }`)}}yt.encode=XN;yt.decode=JN;yt.fromJSON=MN;gt.encode=QN;gt.decode=jN;gt.fromJSON=kN;De.encode=ZN;De.decode=zN;De.fromJSON=Ib;$n.encode=tF;$n.decode=WN;$n.fromJSON=CN;qi.encode=eF;qi.decode=YN;kn.encode=nF;kn.decode=qN;function jN(e,t=new Map,n=qt.V5){const i=KN(e,t);return new gt(i,Wo(e),t,n)}function zN(e,t=qt.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new De(e.length(),HN(e),GN(e,t))}function WN(e,t=qt.V5){return new $n(De.decode(e.data(),t),e.id(),e.isDelta())}function qN(e){return new kn(e.offset(),e.length())}function YN(e){return new qi(e.length(),e.nullCount())}function HN(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=qi.decode(n));return t}function GN(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<qt.V4&&(i.bb_pos+=8*(r+1)),n[++s]=kn.decode(i));return n}function KN(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=yt.decode(i,t));return n}function zp(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=yt.decode(i,t));return n}function JN(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=qp(e,zp(e,t)),i=new yt(e.name(),r,e.nullable(),Wo(e))):t.has(n=Zt(o.id()))?(s=(s=o.indexType())?Wp(s):new $i,a=new ji(t.get(n),s,n,o.isOrdered()),i=new yt(e.name(),a,e.nullable(),Wo(e))):(s=(s=o.indexType())?Wp(s):new $i,t.set(n,r=qp(e,zp(e,t))),a=new ji(r,s,n,o.isOrdered()),i=new yt(e.name(),a,e.nullable(),Wo(e))),i||null}function Wo(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function Wp(e){return new oe(e.isSigned(),e.bitWidth())}function qp(e,t){const n=e.typeType();switch(n){case wt.NONE:return new li;case wt.Null:return new li;case wt.Binary:return new Ca;case wt.LargeBinary:return new Rc;case wt.Utf8:return new bs;case wt.LargeUtf8:return new Lc;case wt.Bool:return new Ra;case wt.List:return new Ss((t||[])[0]);case wt.Struct_:return new ne(t||[])}switch(n){case wt.Int:{const i=e.type(new Be);return new oe(i.isSigned(),i.bitWidth())}case wt.FloatingPoint:{const i=e.type(new On);return new Vi(i.precision())}case wt.Decimal:{const i=e.type(new Vr);return new Mc(i.scale(),i.precision(),i.bitWidth())}case wt.Date:{const i=e.type(new Mo);return new vs(i.unit())}case wt.Time:{const i=e.type(new $e);return new hi(i.unit(),i.bitWidth())}case wt.Timestamp:{const i=e.type(new Ve);return new Uc(i.unit(),i.timezone())}case wt.Interval:{const i=e.type(new Nn);return new ws(i.unit())}case wt.Duration:{const i=e.type(new Uo);return new Pc(i.unit())}case wt.Union:{const i=e.type(new pe);return new La(i.mode(),i.typeIdsArray()||[],t||[])}case wt.FixedSizeBinary:{const i=e.type(new Po);return new $c(i.byteWidth())}case wt.FixedSizeList:{const i=e.type(new $o);return new Is(i.listSize(),(t||[])[0])}case wt.Map:{const i=e.type(new Vo);return new Ma((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${wt[n]}" (${n})`)}function QN(e,t){const n=t.fields.map(s=>yt.encode(e,s));xn.startFieldsVector(e,n.length);const i=xn.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?xn.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),c=e.createString(`${a}`);return Wt.startKeyValue(e),Wt.addKey(e,o),Wt.addValue(e,c),Wt.endKeyValue(e)})):-1;return xn.startSchema(e),xn.addFields(e,i),xn.addEndianness(e,iF?_s.Little:_s.Big),r!==-1&&xn.addCustomMetadata(e,r),xn.endSchema(e)}function XN(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;P.isDictionary(s)?(a=s.dictionary.typeId,r=el.visit(s,e),i=el.visit(s.dictionary,e)):i=el.visit(s,e);const o=(s.children||[]).map(l=>yt.encode(e,l)),c=Me.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?Me.createCustomMetadataVector(e,[...t.metadata].map(([l,h])=>{const d=e.createString(`${l}`),y=e.createString(`${h}`);return Wt.startKeyValue(e),Wt.addKey(e,d),Wt.addValue(e,y),Wt.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Me.startField(e),Me.addType(e,i),Me.addTypeType(e,a),Me.addChildren(e,c),Me.addNullable(e,!!t.nullable),n!==-1&&Me.addName(e,n),r!==-1&&Me.addDictionary(e,r),u!==-1&&Me.addCustomMetadata(e,u),Me.endField(e)}function ZN(e,t){const n=t.nodes||[],i=t.buffers||[];Zn.startNodesVector(e,n.length);for(const a of n.slice().reverse())qi.encode(e,a);const r=e.endVector();Zn.startBuffersVector(e,i.length);for(const a of i.slice().reverse())kn.encode(e,a);const s=e.endVector();return Zn.startRecordBatch(e),Zn.addLength(e,BigInt(t.length)),Zn.addNodes(e,r),Zn.addBuffers(e,s),Zn.endRecordBatch(e)}function tF(e,t){const n=De.encode(e,t.data);return Pr.startDictionaryBatch(e),Pr.addId(e,BigInt(t.id)),Pr.addIsDelta(e,t.isDelta),Pr.addData(e,n),Pr.endDictionaryBatch(e)}function eF(e,t){return B0.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function nF(e,t){return E0.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const iF=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),ql="ARROW1",Cf=new Uint8Array(ql.length);for(let e=0;e<ql.length;e+=1)Cf[e]=ql.codePointAt(e);Cf.length;class Dt extends X{static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Te?s.data.children:s.data),i=new Dt;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof lt)return this.visitMany(t.data),this;const{type:n}=t;if(!P.isDictionary(n)){const{length:i}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(P.isUnion(n))this.nodes.push(new qi(i,0));else{const{nullCount:r}=t;P.isNull(n)||cn.call(this,r<=0?new Uint8Array(0):Vc(t.offset,i,t.nullBitmap)),this.nodes.push(new qi(i,r))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function cn(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new kn(this._byteLength,t)),this._byteLength+=t,this}function rF(e){var t;const{type:n,length:i,typeIds:r,valueOffsets:s}=e;if(cn.call(this,r),n.mode===ae.Sparse)return Yl.call(this,e);if(n.mode===ae.Dense){if(e.offset<=0)return cn.call(this,s),Yl.call(this,e);{const a=new Int32Array(i),o=Object.create(null),c=Object.create(null);for(let u,l,h=-1;++h<i;)(u=r[h])!==void 0&&((l=o[u])===void 0&&(l=o[u]=s[h]),a[h]=s[h]-l,c[u]=((t=c[u])!==null&&t!==void 0?t:0)+1);cn.call(this,a),this.visitMany(e.children.map((u,l)=>{const h=n.typeIds[l],d=o[h],y=c[h];return u.slice(d,Math.min(i,y))}))}}return this}function sF(e){let t;return e.nullCount>=e.length?cn.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?cn.call(this,Vc(e.offset,e.length,t)):cn.call(this,P_(e.values))}function wi(e){return cn.call(this,e.values.subarray(0,e.length*e.stride))}function wu(e){const{length:t,values:n,valueOffsets:i}=e,r=Zt(i[0]),s=Zt(i[t]),a=Math.min(s-r,n.byteLength-r);return cn.call(this,A0(-r,t+1,i)),cn.call(this,n.subarray(r,r+a)),this}function Rf(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:i,[t]:r}=n;return cn.call(this,A0(-i,t+1,n)),this.visit(e.children[0].slice(i,r-i))}return this.visit(e.children[0])}function Yl(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Dt.prototype.visitBool=sF;Dt.prototype.visitInt=wi;Dt.prototype.visitFloat=wi;Dt.prototype.visitUtf8=wu;Dt.prototype.visitLargeUtf8=wu;Dt.prototype.visitBinary=wu;Dt.prototype.visitLargeBinary=wu;Dt.prototype.visitFixedSizeBinary=wi;Dt.prototype.visitDate=wi;Dt.prototype.visitTimestamp=wi;Dt.prototype.visitTime=wi;Dt.prototype.visitDecimal=wi;Dt.prototype.visitList=Rf;Dt.prototype.visitStruct=Yl;Dt.prototype.visitUnion=rF;Dt.prototype.visitInterval=wi;Dt.prototype.visitDuration=wi;Dt.prototype.visitFixedSizeList=Rf;Dt.prototype.visitMap=Rf;class Eb extends Q_{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Zu,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Xi(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return du(t)?t.then(n=>this.writeAll(n)):pu(t)?Pf(this,t):Uf(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Zu?this._sink=t:(this._sink=new Zu,t&&wT(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&ST(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Wl(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof ye&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Te&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Wl(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Te?t instanceof FN||this._writeRecordBatch(t):t instanceof ye?this.writeAll(t.batches):Hh(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=Fn.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,c=o-s-a;return t.headerType===Pt.RecordBatch?this._recordBatchBlocks.push(new zi(o,t.bodyLength,this._position)):t.headerType===Pt.DictionaryBatch&&this._dictionaryBlocks.push(new zi(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(c)}_write(t){if(this._started){const n=st(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Fn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Cf)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=Dt.assemble(t),a=new De(t.numRows,i,r),o=Fn.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Dt.assemble(new lt([t])),c=new De(t.length,s,a),u=new $n(c,n,i),l=Fn.from(u,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class Lf extends Eb{static writeAll(t,n){const i=new Lf(n);return du(t)?t.then(r=>i.writeAll(r)):pu(t)?Pf(i,t):Uf(i,t)}}class Mf extends Eb{static writeAll(t){const n=new Mf;return du(t)?t.then(i=>n.writeAll(i)):pu(t)?Pf(n,t):Uf(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=zl.encode(new zl(t,qt.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Uf(e,t){let n=t;t instanceof ye&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function Pf(e,t){var n,i,r,s,a,o,c;return A(this,void 0,void 0,function*(){try{for(n=!0,i=qe(t);r=yield i.next(),s=r.done,!s;n=!0){c=r.value,n=!1;const u=c;e.write(u)}}catch(u){a={error:u}}finally{try{!n&&!s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a.error}}return e.finish()})}function aF(e,t="stream"){return(t==="stream"?Lf:Mf).writeAll(e).toUint8Array(!0)}function $f(e,t=1){return(e*t+63&-64||64)/t}function Yi(e,t,n=e.BYTES_PER_ELEMENT){return new e($f(t,n))}function Vf(e){return e instanceof ft?e:new ft(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function oF(e){return new lt([Vf(e)])}const jf=new TextEncoder;function cF(e,t,n){const i=jf.encode(n);return e.set(i,t),i.length}function uF(e,t,n){return jf.encodeInto(n,e.subarray(t)).written}const lF=jf.encodeInto?uF:cF;function Yp(e,t){const n=Yi(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function hF(e,t){const n=Yi(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function fF(e,t){const n=Yi(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function dF(e,t){const n=Yi(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function pF(e){const t=qc({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function yF(e,t,n){const i=Yi(Int32Array,t+1),r=Yi(Uint8Array,3*n);let s=0;return{set(a,o){s+=lF(r,s,a),i[o+1]=s},data:()=>{const a=$f(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function mF(e,t){const n=[],i=Yi(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,c){const u=String(o);let l=r[u];l===void 0&&(a+=u.length,r[u]=l=++s,n.push(u)),i[c]=l},data:()=>({type:e,length:t,buffers:[null,i],dict:gF(e.dictionary,n,a)})}}function gF(e,t,n){const i=yF(e,t.length,n);return t.forEach(i.set),oF(i.data())}function _F(e,t){const n=Yi(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function bF(e,t,n=!0){let i;switch(e.typeId){case p.Int:i=e.bitWidth<64?Yp:null;break;case p.Float:i=e.precision>0?Yp:null;break;case p.Dictionary:i=e.dictionary.typeId===p.Utf8&&e.indices.typeId===p.Int&&e.indices.bitWidth<64?mF:null;break;case p.Bool:i=hF;break;case p.Date:i=e.unit?dF:fF;break}return i==null?pF(e):n?_F(i(e,t),t):i(e,t)}function vF(e,t){const n=e.length,i=$f(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),Vf({type:t,length:n,buffers:[null,r]})}function Bb(e,t,n,i,r=!0){const s=bF(i,e,r);return t(n,s.set),Vf(s.data())}function zf(e){if(e instanceof P||e==null)return e;switch(e){case p.Binary:return new Ca;case p.Bool:return new Ra;case p.DateDay:return new MT;case p.DateMillisecond:case p.Date:return new UT;case p.Dictionary:return new ji(new bs,new $i);case p.Float16:return new Q0;case p.Float32:return new rf;case p.Float64:case p.Float:return new sf;case p.Int8:return new Jh;case p.Int16:return new Qh;case p.Int32:case p.Int:return new $i;case p.Int64:return new Xh;case p.IntervalDayTime:return new zT;case p.Interval:case p.IntervalYearMonth:return new WT;case p.Null:return new li;case p.TimeMicrosecond:return new VT;case p.TimeMillisecond:case p.Time:return new $T;case p.TimeNanosecond:return new jT;case p.TimeSecond:return new PT;case p.Uint8:return new Zh;case p.Uint16:return new tf;case p.Uint32:return new ef;case p.Uint64:return new nf;case p.Utf8:return new bs;default:J(`Unsupported type code: ${Un(e)}. Use a data type constructor instead?`)}}function wF(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Tb(e,t){const n=Hl();return e(t,n.add),n}function Hl(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(ui(t))++e.dates,wF(t)&&++e.utcdays;else if(yr(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=Hl());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=Hl())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return zf(SF(e))}};return e}function SF(e){const t=e.count-e.nulls;if(t===0)return p.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?p.Float64:n<128?p.Int8:n<32768?p.Int16:p.Int32:n>=2**32?p.Float64:n<256?p.Uint8:n<65536?p.Uint16:p.Uint32}else{if(e.nums===t)return p.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?p.Int64:J(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?p.Uint64:J(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return p.Bool;if(e.utcdays===t)return p.DateDay;if(e.dates===t)return p.DateMillisecond;if(e.arrays===t){const n=yt.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Is(e.minlen,n):new Ss(n)}else if(e.structs===t){const n=e.struct_prof;return new ne(Object.keys(n).map(i=>yt.new(i,n[i].type(),!0)))}else{if(e.strings>0)return p.Dictionary;J("Type inference failure")}}}}function IF(e,t,n,i,r,s=!0){if(r=zf(r),!r){const a=Tb(i,t);s=a.nulls>0,r=a.type()}return Bb(n,i,t,r,s)}function xF(e,t,n,i,r,s=!0){r=zf(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),c=AF(a);if(c&&o&&Hp(c.type,r))return c;const u=a.data;if(Ka(u)){const l=EF(u);if(o&&l&&Hp(l,r))return vF(u,l);r=r||l,s=!1}if(!r){const l=Tb(i,a);s=l.nulls>0,r=l.type()}return Bb(n,i,a,r,s)}function AF(e){return e instanceof lt?e:e.vector instanceof lt?e.vector:null}function EF(e){const n={Float32Array:rf,Float64Array:sf,Int8Array:Jh,Int16Array:Qh,Int32Array:$i,Uint8Array:Zh,Uint16Array:tf,Uint32Array:ef,BigInt64Array:Xh,BigUint64Array:nf}[e.constructor.name];return n?new n:null}function Hp(e,t){return!e||!t?!0:e.compareTo(t)}function BF(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function TF(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&yr(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const OF=()=>J("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function NF(){try{return ye}catch{OF()}}function Ob(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=FF(e,t),o={};r.forEach(u=>{const l=i(e,u,s,a,n[u]);l.length!==s&&J("Column length mismatch"),o[u]=l});const c=NF();return new c(o)}function FF(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=xt(n)?n(e):ut(n)?n:null;if(ut(e))return{dataFrom:IF,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:BF(e,i,r)};if(DF(e))return{dataFrom:xF,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:TF(e,i,r)};J("Unsupported input data type")}function DF(e){return e&&xt(e.reify)}function kF(e,t={}){const{format:n,...i}=t,r=n||"stream";if(!["stream","file"].includes(r))throw Error("Unrecognised output format");return aF(Ob(e,i),n)}function CF(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function RF(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(c=>{if(++n,c==null){++i;return}const u=typeof c;if(u==="object"&&ui(c))++r,CF(c)&&++s;else if(u==="number"&&(++a,c===c&&(c|0)!==c)){const l=c+"",h=l.indexOf(".");if(h>=0){const d=l.indexOf("e"),y=d>0?d:l.length;o=Math.max(o,y-h-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function Su(e,t){return xt(t)?t(e):t||e.columnNames()}function Nb(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const c=RF(LF(e,o),n);a[o]=r[o]||c.align,s[o]=i[o]||c.format}),{align:a,format:s}}function LF(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function Wf(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let c=0;c<a;++c){const u=t[c];r.cell(s[t[c]].get(o),u,c)}},!0,n,i)}function MF(e,t={}){const n=Su(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=u=>u==null?"":ui(u)?lu(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,o=n.map(a);let c="";return Wf(e,n,t.limit||1/0,t.offset,{row(){c+=o.join(r)+`
`},cell(u,l,h){o[h]=a(i[l]?i[l](u):u)}}),c+o.join(r)}function Fb(e,t={}){if(xt(t))return t(e)+"";const n=typeof e;if(n==="object"){if(ui(e))return t.utc?lu(e):Qg(e);{const i=JSON.stringify(e,(s,a)=>Ka(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+"…"+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function Iu(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function UF(e,t={}){const n=Su(e,t.columns),{align:i,format:r}=Nb(e,n,t),s=PF(t),a=t.null,o=_=>_==="c"?"center":_==="r"?"right":"left",c=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(_,b)=>c(Fb(_,b)),l=a?(_,b)=>_==null?a(_):u(_,b):u;let h=-1,d=-1;const y=(_,b,w)=>{const U=w?o(i[b]):"",ht=s[_]&&s[_](b,d,h)||"",F=(U?`text-align: ${U};`+(ht?" ":""):"")+ht;return`<${_}${F?` style="${F}"`:""}>`};let g=y("table")+y("thead")+y("tr",h)+n.map(_=>`${y("th",_,1)}${_}</th>`).join("")+"</tr></thead>"+y("tbody");return Wf(e,n,t.limit,t.offset,{row(_){h=_,g+=(++d?"</tr>":"")+y("tr")},cell(_,b){g+=y("td",b,1)+l(_,r[b])+"</td>"}}),g+"</tr></tbody></table>"}function PF(e){return Iu(e.style,t=>xt(t)?t:()=>t)}function $F(e,t=!0,n=!1){return e===void 0||e?t:n}const VF=e=>ui(e)?lu(e,!0):e;function jF(e,t={}){const n=$F(t.schema),i=t.format||{},r=Su(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const c=e.column(a),u=i[a]||VF;let l=-1;e.scan(h=>{const d=c.get(h);s+=(++l?",":"")+JSON.stringify(u(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function zF(e,t={}){const n=Su(e,t.columns),{align:i,format:r}=Nb(e,n,t),s=c=>c==="c"?":-:":c==="r"?"-:":":-",a=c=>c.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(c=>s(i[c])).join("|")+"|";return Wf(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(c,u){o+=a(Fb(c,r[u]))+"|"}}),o+`
`}function Db(e,t){for(const[n,i]of hu(t))e.set(n,i);return e}function WF(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function fi(e,t,n=new Map){return t=se(t)?e.columnName(t):t,te(t)?n.set(t,t):ut(t)?t.forEach(i=>fi(e,i,n)):xt(t)?fi(e,t(e),n):ie(t)?Db(n,t):J(`Invalid column selection: ${Un(t)}`),n}function xu(e,t){return e.toObject=t,e}function kb(e){return ut(e)?e.map(kb):e&&e.toObject?e.toObject():e}function xs(){return xu(e=>e.columnNames(),()=>({all:[]}))}function Cb(...e){return e=e.flat(),xu(t=>{const n=fi(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:kb(e)}))}function qF(e,t){return xu(n=>{let i=se(e)?e:n.columnIndex(e),r=se(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function YF(e){return te(e)&&(e=RegExp(WF(e))),xu(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function HF(e){return Ka(e.data)?e.data.constructor:Array}class ri extends vB{static from(t,n){return new ri(IB(t,n),n)}static new(t,n){if(t instanceof ri)return t;const i={},r=[];for(const[s,a]of hu(t))i[s]=a,r.push(s);return new ri(i,n||r)}constructor(t,n,i,r,s,a){Iu(t,SB,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new ri(t||this._data,n||(t?null:this._names),a,r!==void 0?r:XB(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=ke(i).groupby(i.groups());return t.forEach(s=>{s=ri.new(s),s.numRows()!==n&&J("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):J(`Unrecognized column: ${t}`)}object(t=0){return Gp(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=fi(this,t.columns||xs()),a=S0(s),o=[];if(this.scan((c,u)=>o.push(a(c,u)),!0,i,r),n&&this.isGrouped()){const c=[];return this.scan(u=>c.push(u),!0,i,r),tT(this,c,o,n)}return o}*[Symbol.iterator](){const t=Gp(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?c=>t.forEach(c):c=>this.scan(c,!0),o=i.length;r={};for(let c=0;c<o;++c){const u=i[c],l=this.column(u),h=r[u]=new(HF(l))(n);let d=-1;a(y=>h[++d]=l.get(y))}this.isGrouped()&&(s=ZB(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return Ob(this,t)}toArrowBuffer(t){return kF(this,t)}toCSV(t){return MF(this,t)}toHTML(t){return UF(this,t)}toJSON(t){return jF(this,t)}toMarkdown(t){return zF(this,t)}}function Gp(e){let t=e._builder;if(!t){const n=S0(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class GF{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function at(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=KF[e.type];s&&s(e,t,n)}const go=(e,t,n)=>{at(e.argument,t,n,e)},nl=(e,t,n)=>{at(e.left,t,n,e),at(e.right,t,n,e)},Kp=(e,t,n)=>{at(e.test,t,n,e),at(e.consequent,t,n,e),e.alternate&&at(e.alternate,t,n,e)},il=(e,t,n)=>{An(e.params,t,n,e),at(e.body,t,n,e)},Jp=(e,t,n)=>{at(e.callee,t,n,e),An(e.arguments,t,n,e)},An=(e,t,n,i)=>{e.forEach(r=>at(r,t,n,i))},KF={TemplateLiteral:(e,t,n)=>{An(e.expressions,t,n,e),An(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{at(e.object,t,n,e),at(e.property,t,n,e)},CallExpression:Jp,NewExpression:Jp,ArrayExpression:(e,t,n)=>{An(e.elements,t,n,e)},AssignmentExpression:nl,AwaitExpression:go,BinaryExpression:nl,LogicalExpression:nl,UnaryExpression:go,UpdateExpression:go,ConditionalExpression:Kp,ObjectExpression:(e,t,n)=>{An(e.properties,t,n,e)},Property:(e,t,n)=>{at(e.key,t,n,e),at(e.value,t,n,e)},ArrowFunctionExpression:il,FunctionExpression:il,FunctionDeclaration:il,VariableDeclaration:(e,t,n)=>{An(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{at(e.id,t,n,e),at(e.init,t,n,e)},SpreadElement:(e,t,n)=>{at(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{An(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{at(e.expression,t,n,e)},IfStatement:Kp,ForStatement:(e,t,n)=>{at(e.init,t,n,e),at(e.test,t,n,e),at(e.update,t,n,e),at(e.body,t,n,e)},WhileStatement:(e,t,n)=>{at(e.test,t,n,e),at(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{at(e.body,t,n,e),at(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{at(e.discriminant,t,n,e),An(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&at(e.test,t,n,e),An(e.consequent,t,n,e)},ReturnStatement:go,Program:(e,t,n)=>{at(e.body[0],t,n,e)}};function Rb(e){delete e.start,delete e.end,delete e.optional}function Qp(e){Rb(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function JF(e){return at(e,null,{Column:Qp,Constant:Qp,Default:Rb}),e}function Yt(e,t){return t&&t.type===e}function QF(e){return Yt(iT,e)||Yt(nT,e)}function XF(e){return xt(e)?e:()=>e}const ZF="Escaped functions are not valid as rollup or pivot values.";function tD(e,t,n){e.aggronly&&J(ZF);const i="(row,data)=>fn("+w0(e.table.columnNames())+",$)";return{escape:Yh.escape(i,XF(t.expr),n)}}var eD=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Lb=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nD="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",Mb="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",rl={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},sl="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",iD={5:sl,"5module":sl+" export import",6:sl+" const class extends export import super"},rD=/^in(stanceof)?$/,sD=new RegExp("["+Mb+"]"),aD=new RegExp("["+Mb+nD+"]");function Gl(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}return!1}function di(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&sD.test(String.fromCharCode(e)):t===!1?!1:Gl(e,Lb)}function As(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&aD.test(String.fromCharCode(e)):t===!1?!1:Gl(e,Lb)||Gl(e,eD)}var ot=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Ce(e,t){return new ot(e,{beforeExpr:!0,binop:t})}var Re={beforeExpr:!0},le={startsExpr:!0},qf={};function et(e,t){return t===void 0&&(t={}),t.keyword=e,qf[e]=new ot(e,t)}var f={num:new ot("num",le),regexp:new ot("regexp",le),string:new ot("string",le),name:new ot("name",le),privateId:new ot("privateId",le),eof:new ot("eof"),bracketL:new ot("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ot("]"),braceL:new ot("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ot("}"),parenL:new ot("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ot(")"),comma:new ot(",",Re),semi:new ot(";",Re),colon:new ot(":",Re),dot:new ot("."),question:new ot("?",Re),questionDot:new ot("?."),arrow:new ot("=>",Re),template:new ot("template"),invalidTemplate:new ot("invalidTemplate"),ellipsis:new ot("...",Re),backQuote:new ot("`",le),dollarBraceL:new ot("${",{beforeExpr:!0,startsExpr:!0}),eq:new ot("=",{beforeExpr:!0,isAssign:!0}),assign:new ot("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ot("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ot("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ce("||",1),logicalAND:Ce("&&",2),bitwiseOR:Ce("|",3),bitwiseXOR:Ce("^",4),bitwiseAND:Ce("&",5),equality:Ce("==/!=/===/!==",6),relational:Ce("</>/<=/>=",7),bitShift:Ce("<</>>/>>>",8),plusMin:new ot("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ce("%",10),star:Ce("*",10),slash:Ce("/",10),starstar:new ot("**",{beforeExpr:!0}),coalesce:Ce("??",1),_break:et("break"),_case:et("case",Re),_catch:et("catch"),_continue:et("continue"),_debugger:et("debugger"),_default:et("default",Re),_do:et("do",{isLoop:!0,beforeExpr:!0}),_else:et("else",Re),_finally:et("finally"),_for:et("for",{isLoop:!0}),_function:et("function",le),_if:et("if"),_return:et("return",Re),_switch:et("switch"),_throw:et("throw",Re),_try:et("try"),_var:et("var"),_const:et("const"),_while:et("while",{isLoop:!0}),_with:et("with"),_new:et("new",{beforeExpr:!0,startsExpr:!0}),_this:et("this",le),_super:et("super",le),_class:et("class",le),_extends:et("extends",Re),_export:et("export"),_import:et("import",le),_null:et("null",le),_true:et("true",le),_false:et("false",le),_in:et("in",{beforeExpr:!0,binop:7}),_instanceof:et("instanceof",{beforeExpr:!0,binop:7}),_typeof:et("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:et("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:et("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Qe=/\r\n?|\n|\u2028|\u2029/,oD=new RegExp(Qe.source,"g");function Ls(e){return e===10||e===13||e===8232||e===8233}function Ub(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(Ls(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var Pb=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,je=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,$b=Object.prototype,cD=$b.hasOwnProperty,uD=$b.toString,no=Object.hasOwn||function(e,t){return cD.call(e,t)},Xp=Array.isArray||function(e){return uD.call(e)==="[object Array]"},Zp=Object.create(null);function Di(e){return Zp[e]||(Zp[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Hi(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var lD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ua=function(t,n){this.line=t,this.column=n};Ua.prototype.offset=function(t){return new Ua(this.line,this.column+t)};var Au=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function Vb(e,t){for(var n=1,i=0;;){var r=Ub(e,i,t);if(r<0)return new Ua(n,t-i);++n,i=r}}var Kl={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ty=!1;function hD(e){var t={};for(var n in Kl)t[n]=e&&no(e,n)?e[n]:Kl[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ty&&typeof console=="object"&&console.warn&&(ty=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Xp(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return Xp(t.onComment)&&(t.onComment=fD(t,t.onComment)),t}function fD(e,t){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(c.loc=new Au(this,a,o)),e.ranges&&(c.range=[r,s]),t.push(c)}}var Pa=1,Ms=2,Yf=4,jb=8,zb=16,Wb=32,Hf=64,qb=128,io=256,Gf=Pa|Ms|io;function Kf(e,t){return Ms|(e?Yf:0)|(t?jb:0)}var Yc=0,Jf=1,Si=2,Yb=3,Hb=4,Gb=5,Gt=function(t,n,i){this.options=t=hD(t),this.sourceFile=t.sourceFile,this.keywords=Di(iD[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=rl[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=Di(r);var s=(r?r+" ":"")+rl.strict;this.reservedWordsStrict=Di(s),this.reservedWordsStrictBind=Di(s+" "+rl.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Qe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=f.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Pa),this.regexpState=null,this.privateNameStack=[]},zn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Gt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zn.inFunction.get=function(){return(this.currentVarScope().flags&Ms)>0};zn.inGenerator.get=function(){return(this.currentVarScope().flags&jb)>0&&!this.currentVarScope().inClassFieldInit};zn.inAsync.get=function(){return(this.currentVarScope().flags&Yf)>0&&!this.currentVarScope().inClassFieldInit};zn.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&io)return!1;if(t.flags&Ms)return(t.flags&Yf)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zn.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Hf)>0||n||this.options.allowSuperOutsideMethod};zn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&qb)>0};zn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zn.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Ms|io))>0||n};zn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&io)>0};Gt.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};Gt.parse=function(t,n){return new this(n,t).parse()};Gt.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};Gt.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Gt.prototype,zn);var ue=Gt.prototype,dD=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;ue.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){je.lastIndex=e,e+=je.exec(this.input)[0].length;var t=dD.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){je.lastIndex=e+t[0].length;var n=je.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||Qe.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,je.lastIndex=e,e+=je.exec(this.input)[0].length,this.input[e]===";"&&e++}};ue.eat=function(e){return this.type===e?(this.next(),!0):!1};ue.isContextual=function(e){return this.type===f.name&&this.value===e&&!this.containsEsc};ue.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ue.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ue.canInsertSemicolon=function(){return this.type===f.eof||this.type===f.braceR||Qe.test(this.input.slice(this.lastTokEnd,this.start))};ue.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ue.semicolon=function(){!this.eat(f.semi)&&!this.insertSemicolon()&&this.unexpected()};ue.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ue.expect=function(e){this.eat(e)||this.unexpected()};ue.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Eu=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ue.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ue.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};ue.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ue.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var I=Gt.prototype;I.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==f.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Qf={kind:"loop"},pD={kind:"switch"};I.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;je.lastIndex=this.pos;var t=je.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92)return!0;if(e)return!1;if(i===123||i>55295&&i<56320)return!0;if(di(i,!0)){for(var r=n+1;As(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!rD.test(s))return!0}return!1};I.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;je.lastIndex=this.pos;var e=je.exec(this.input),t=this.pos+e[0].length,n;return!Qe.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(As(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};I.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=f._var,s="let"),i){case f._break:case f._continue:return this.parseBreakContinueStatement(r,i.keyword);case f._debugger:return this.parseDebuggerStatement(r);case f._do:return this.parseDoStatement(r);case f._for:return this.parseForStatement(r);case f._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case f._class:return e&&this.unexpected(),this.parseClass(r,!0);case f._if:return this.parseIfStatement(r);case f._return:return this.parseReturnStatement(r);case f._switch:return this.parseSwitchStatement(r);case f._throw:return this.parseThrowStatement(r);case f._try:return this.parseTryStatement(r);case f._const:case f._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case f._while:return this.parseWhileStatement(r);case f._with:return this.parseWithStatement(r);case f.braceL:return this.parseBlock(!0,r);case f.semi:return this.parseEmptyStatement(r);case f._export:case f._import:if(this.options.ecmaVersion>10&&i===f._import){je.lastIndex=this.pos;var a=je.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(c===40||c===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===f._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var u=this.value,l=this.parseExpression();return i===f.name&&l.type==="Identifier"&&this.eat(f.colon)?this.parseLabeledStatement(r,u,l,e):this.parseExpressionStatement(r,l)}};I.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(f.semi)||this.insertSemicolon()?e.label=null:this.type!==f.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};I.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};I.parseDoStatement=function(e){return this.next(),this.labels.push(Qf),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(f._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(f.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};I.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Qf),this.enterScope(0),this.expect(f.parenL),this.type===f.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===f._var||this.type===f._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===f._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=this.containsEsc,c=new Eu,u=this.start,l=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===f._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===f._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(l.start===u&&!o&&l.type==="Identifier"&&l.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,c),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))};I.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ga|(n?0:Jl),!1,t)};I.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(f._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};I.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(f.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};I.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(f.braceL),this.labels.push(pD),this.enterScope(0);for(var t,n=!1;this.type!==f.braceR;)if(this.type===f._case||this.type===f._default){var i=this.type===f._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(f.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};I.parseThrowStatement=function(e){return this.next(),Qe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var yD=[];I.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?Wb:0),this.checkLValPattern(e,t?Hb:Si),this.expect(f.parenR),e};I.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===f._catch){var t=this.startNode();this.next(),this.eat(f.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(f._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};I.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};I.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Qf),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};I.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};I.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};I.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===f._switch?"switch":null,c=this.labels.length-1;c>=0;c--){var u=this.labels[c];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};I.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};I.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(f.braceL),e&&this.enterScope(0);this.type!==f.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};I.parseFor=function(e,t){return e.init=t,this.expect(f.semi),e.test=this.type===f.semi?null:this.parseExpression(),this.expect(f.semi),e.update=this.type===f.parenR?null:this.parseExpression(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};I.parseForIn=function(e,t){var n=this.type===f._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(f.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};I.parseVar=function(e,t,n,i){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(f.eq)?r.init=this.parseMaybeAssign(t):!i&&n==="const"&&!(this.type===f._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!i&&r.id.type!=="Identifier"&&!(t&&(this.type===f._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(f.comma))break}return e};I.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Jf:Si,!1)};var ga=1,Jl=2,Kb=4;I.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===f.star&&t&Jl&&this.unexpected(),e.generator=this.eat(f.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&ga&&(e.id=t&Kb&&this.type!==f.name?null:this.parseIdent(),e.id&&!(t&Jl)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Jf:Si:Yb));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kf(e.async,e.generator)),t&ga||(e.id=this.type===f.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&ga?"FunctionDeclaration":"FunctionExpression")};I.parseFunctionParams=function(e){this.expect(f.parenL),e.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};I.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(f.braceL);this.type!==f.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&mD(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};I.parseClassElement=function(e){if(this.eat(f.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(f.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===f.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===f.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(f.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===f.parenL||a!=="method"||r||s){var u=!n.static&&Hc(n,"constructor"),l=u&&e;u&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,r,s,l)}else this.parseClassField(n);return n};I.isClassElementNameStart=function(){return this.type===f.name||this.type===f.privateId||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword};I.parseClassElementName=function(e){this.type===f.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};I.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&Hc(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};I.parseClassField=function(e){if(Hc(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Hc(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(f.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};I.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(io|Hf);this.type!==f.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};I.parseClassId=function(e,t){this.type===f.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Si,!1)):(t===!0&&this.unexpected(),e.id=null)};I.parseClassSuper=function(e){e.superClass=this.eat(f._extends)?this.parseExprSubscripts(null,!1):null};I.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};I.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];no(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function mD(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function Hc(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}I.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};I.parseExport=function(e,t){if(this.next(),this.eat(f.star))return this.parseExportAllDeclaration(e,t);if(this.eat(f._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==f.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,i=e.specifiers;n<i.length;n+=1){var r=i[n];this.checkUnreserved(r.local),this.checkLocalExport(r.local),r.local.type==="Literal"&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};I.parseExportDeclaration=function(e){return this.parseStatement(null)};I.parseExportDefaultDeclaration=function(){var e;if(this.type===f._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,ga|Kb,!1,e)}else if(this.type===f._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var i=this.parseMaybeAssign();return this.semicolon(),i}};I.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),no(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};I.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(e,c)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};I.checkVariableExport=function(e,t){if(e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};I.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};I.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};I.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(f.braceL);!this.eat(f.braceR);){if(n)n=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;t.push(this.parseExportSpecifier(e))}return t};I.parseImport=function(e){return this.next(),this.type===f.string?(e.specifiers=yD,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===f.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};I.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Si),this.finishNode(e,"ImportSpecifier")};I.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Si),this.finishNode(e,"ImportDefaultSpecifier")};I.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Si),this.finishNode(e,"ImportNamespaceSpecifier")};I.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===f.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(f.comma)))return e;if(this.type===f.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(f.braceL);!this.eat(f.braceR);){if(t)t=!1;else if(this.expect(f.comma),this.afterTrailingComma(f.braceR))break;e.push(this.parseImportSpecifier())}return e};I.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===f.string){var e=this.parseLiteral(this.value);return lD.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};I.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};I.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Xe=Gt.prototype;Xe.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Xe.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Xe.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Xe.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==f.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Xe.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case f.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(f.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case f.braceL:return this.parseObj(!0)}return this.parseIdent()};Xe.parseBindingList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(f.comma),t&&this.type===f.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===f.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else r.push(this.parseAssignableListItem(i))}return r};Xe.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Xe.parseBindingListItem=function(e){return e};Xe.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(f.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};Xe.checkLValSimple=function(e,t,n){t===void 0&&(t=Yc);var i=t!==Yc;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===Si&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(no(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==Gb&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};Xe.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Yc),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,t,n)}break;default:this.checkLValSimple(e,t,n)}};Xe.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Yc),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Ze=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},At={b_stat:new Ze("{",!1),b_expr:new Ze("{",!0),b_tmpl:new Ze("${",!1),p_stat:new Ze("(",!1),p_expr:new Ze("(",!0),q_tmpl:new Ze("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Ze("function",!1),f_expr:new Ze("function",!0),f_expr_gen:new Ze("function",!0,!1,null,!0),f_gen:new Ze("function",!1,!1,null,!0)},Us=Gt.prototype;Us.initialContext=function(){return[At.b_stat]};Us.curContext=function(){return this.context[this.context.length-1]};Us.braceIsBlock=function(e){var t=this.curContext();return t===At.f_expr||t===At.f_stat?!0:e===f.colon&&(t===At.b_stat||t===At.b_expr)?!t.isExpr:e===f._return||e===f.name&&this.exprAllowed?Qe.test(this.input.slice(this.lastTokEnd,this.start)):e===f._else||e===f.semi||e===f.eof||e===f.parenR||e===f.arrow?!0:e===f.braceL?t===At.b_stat:e===f._var||e===f._const||e===f.name?!1:!this.exprAllowed};Us.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Us.updateContext=function(e){var t,n=this.type;n.keyword&&e===f.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Us.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};f.parenR.updateContext=f.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===At.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};f.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?At.b_stat:At.b_expr),this.exprAllowed=!0};f.dollarBraceL.updateContext=function(){this.context.push(At.b_tmpl),this.exprAllowed=!0};f.parenL.updateContext=function(e){var t=e===f._if||e===f._for||e===f._with||e===f._while;this.context.push(t?At.p_stat:At.p_expr),this.exprAllowed=!0};f.incDec.updateContext=function(){};f._function.updateContext=f._class.updateContext=function(e){e.beforeExpr&&e!==f._else&&!(e===f.semi&&this.curContext()!==At.p_stat)&&!(e===f._return&&Qe.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===f.colon||e===f.braceL)&&this.curContext()===At.b_stat)?this.context.push(At.f_expr):this.context.push(At.f_stat),this.exprAllowed=!1};f.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};f.backQuote.updateContext=function(){this.curContext()===At.q_tmpl?this.context.pop():this.context.push(At.q_tmpl),this.exprAllowed=!1};f.star.updateContext=function(e){if(e===f._function){var t=this.context.length-1;this.context[t]===At.f_expr?this.context[t]=At.f_expr_gen:this.context[t]=At.f_gen}this.exprAllowed=!0};f.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==f.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var M=Gt.prototype;M.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};M.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===f.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(f.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};M.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Eu,i=!0);var o=this.start,c=this.startLoc;(this.type===f.parenL||this.type===f.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,c)),this.type.isAssign){var l=this.startNodeAt(o,c);return l.operator=this.value,this.type===f.eq&&(u=this.toAssignable(u,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===f.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),u};M.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(f.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(f.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};M.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};M.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==f._in)&&s>i){var a=this.type===f.logicalOR||this.type===f.logicalAND,o=this.type===f.coalesce;o&&(s=f.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,l,s,r),d=this.buildBinary(t,n,e,h,c,a||o);return(a&&this.type===f.coalesce||o&&(this.type===f.logicalOR||this.type===f.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,i,r)}return e};M.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};M.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===f.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&Jb(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&Ql(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===f.privateId)(i||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==f._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(f.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function Jb(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&Jb(e.expression)}function Ql(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Ql(e.expression)||e.type==="ParenthesizedExpression"&&Ql(e.expression)}M.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};M.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var c=this.startNodeAt(t,n);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}e=o}};M.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(f.arrow)};M.parseSubscriptAsyncArrow=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,i)};M.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(f.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(f.bracketL);if(u||c&&this.type!==f.parenL&&this.type!==f.backQuote||this.eat(f.dot)){var l=this.startNodeAt(t,n);l.object=e,u?(l.property=this.parseExpression(),this.expect(f.bracketR)):this.type===f.privateId&&e.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!u,o&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!i&&this.eat(f.parenL)){var h=new Eu,d=this.yieldPos,y=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var _=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=y,this.awaitIdentPos=g,this.parseSubscriptAsyncArrow(t,n,_,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=y||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var b=this.startNodeAt(t,n);b.callee=e,b.arguments=_,o&&(b.optional=c),e=this.finishNode(b,"CallExpression")}else if(this.type===f.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var w=this.startNodeAt(t,n);w.tag=e,w.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(w,"TaggedTemplateExpression")}return e};M.parseExprAtom=function(e,t,n){this.type===f.slash&&this.readRegexp();var i,r=this.potentialArrowAt===this.start;switch(this.type){case f._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type===f.parenL&&!this.allowDirectSuper&&this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==f.dot&&this.type!==f.bracketL&&this.type!==f.parenL&&this.unexpected(),this.finishNode(i,"Super");case f._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case f.name:var s=this.start,a=this.startLoc,o=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&c.name==="async"&&!this.canInsertSemicolon()&&this.eat(f._function))return this.overrideContext(At.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(f.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[c],!1,t);if(this.options.ecmaVersion>=8&&c.name==="async"&&this.type===f.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return c=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(f.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[c],!0,t)}return c;case f.regexp:var u=this.value;return i=this.parseLiteral(u.value),i.regex={pattern:u.pattern,flags:u.flags},i;case f.num:case f.string:return this.parseLiteral(this.value);case f._null:case f._true:case f._false:return i=this.startNode(),i.value=this.type===f._null?null:this.type===f._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case f.parenL:var l=this.start,h=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),h;case f.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(f.bracketR,!0,!0,e),this.finishNode(i,"ArrayExpression");case f.braceL:return this.overrideContext(At.b_expr),this.parseObj(!1,e);case f._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case f._class:return this.parseClass(this.startNode(),!1);case f._new:return this.parseNew();case f.backQuote:return this.parseTemplate();case f._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};M.parseExprAtomDefault=function(){this.unexpected()};M.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===f.parenL&&!e)return this.parseDynamicImport(t);if(this.type===f.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};M.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(f.parenR)){var t=this.start;this.eat(f.comma)&&this.eat(f.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};M.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};M.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};M.parseParenExpression=function(){this.expect(f.parenL);var e=this.parseExpression();return this.expect(f.parenR),e};M.shouldParseArrow=function(e){return!this.canInsertSemicolon()};M.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,c=[],u=!0,l=!1,h=new Eu,d=this.yieldPos,y=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==f.parenR;)if(u?u=!1:this.expect(f.comma),s&&this.afterTrailingComma(f.parenR,!0)){l=!0;break}else if(this.type===f.ellipsis){g=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else c.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var _=this.lastTokEnd,b=this.lastTokEndLoc;if(this.expect(f.parenR),e&&this.shouldParseArrow(c)&&this.eat(f.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=y,this.parseParenArrowList(n,i,c,t);(!c.length||l)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=y||this.awaitPos,c.length>1?(r=this.startNodeAt(a,o),r.expressions=c,this.finishNodeAt(r,"SequenceExpression",_,b)):r=c[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var w=this.startNodeAt(n,i);return w.expression=r,this.finishNode(w,"ParenthesizedExpression")}else return r};M.parseParenItem=function(e){return e};M.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var gD=[];M.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===f.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),i,r,!0,!1),this.eat(f.parenL)?e.arguments=this.parseExprList(f.parenR,this.options.ecmaVersion>=8,!1):e.arguments=gD,this.finishNode(e,"NewExpression")};M.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===f.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===f.backQuote,this.finishNode(n,"TemplateElement")};M.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===f.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(f.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(f.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};M.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===f.name||this.type===f.num||this.type===f.string||this.type===f.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===f.star)&&!Qe.test(this.input.slice(this.lastTokEnd,this.start))};M.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(f.braceR);){if(i)i=!1;else if(this.expect(f.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(f.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};M.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(f.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===f.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===f.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(f.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(f.star),this.parsePropertyName(n)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};M.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};M.parsePropertyValue=function(e,t,n,i,r,s,a,o){(n||i)&&this.type===f.colon&&this.unexpected(),this.eat(f.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===f.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i)):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==f.comma&&this.type!==f.braceR&&this.type!==f.eq?((n||i)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===f.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};M.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(f.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(f.bracketR),e.key;e.computed=!1}return e.key=this.type===f.num||this.type===f.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};M.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};M.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Kf(t,i.generator)|Hf|(n?qb:0)),this.expect(f.parenL),i.params=this.parseBindingList(f.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};M.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Kf(n,!1)|zb),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};M.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==f.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,Gb),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=c}this.exitScope()};M.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};M.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,Jf,t?null:n)}};M.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(f.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===f.comma?a=null:this.type===f.ellipsis?(a=this.parseSpread(i),i&&this.type===f.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};M.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};M.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};M.parseIdentNode=function(){var e=this.startNode();return this.type===f.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=f.name):this.unexpected(),e};M.parsePrivateIdent=function(){var e=this.startNode();return this.type===f.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};M.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===f.semi||this.canInsertSemicolon()||this.type!==f.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(f.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};M.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Gc=Gt.prototype;Gc.raise=function(e,t){var n=Vb(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};Gc.raiseRecoverable=Gc.raise;Gc.curPosition=function(){if(this.options.locations)return new Ua(this.curLine,this.pos-this.lineStart)};var tr=Gt.prototype,_D=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};tr.enterScope=function(e){this.scopeStack.push(new _D(e))};tr.exitScope=function(){this.scopeStack.pop()};tr.treatFunctionsAsVarInScope=function(e){return e.flags&Ms||!this.inModule&&e.flags&Pa};tr.declareName=function(e,t,n){var i=!1;if(t===Si){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&Pa&&delete this.undefinedExports[e]}else if(t===Hb){var s=this.currentScope();s.lexical.push(e)}else if(t===Yb){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var c=this.scopeStack[o];if(c.lexical.indexOf(e)>-1&&!(c.flags&Wb&&c.lexical[0]===e)||!this.treatFunctionsAsVarInScope(c)&&c.functions.indexOf(e)>-1){i=!0;break}if(c.var.push(e),this.inModule&&c.flags&Pa&&delete this.undefinedExports[e],c.flags&Gf)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};tr.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};tr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};tr.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Gf)return t}};tr.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Gf&&!(t.flags&zb))return t}};var Bu=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new Au(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ro=Gt.prototype;ro.startNode=function(){return new Bu(this,this.start,this.startLoc)};ro.startNodeAt=function(e,t){return new Bu(this,e,t)};function Qb(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}ro.finishNode=function(e,t){return Qb.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ro.finishNodeAt=function(e,t,n,i){return Qb.call(this,e,t,n,i)};ro.copyNode=function(e){var t=new Bu(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Xb="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Zb=Xb+" Extended_Pictographic",tv=Zb,ev=tv+" EBase EComp EMod EPres ExtPict",nv=ev,bD=nv,vD={9:Xb,10:Zb,11:tv,12:ev,13:nv,14:bD},wD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",SD={9:"",10:"",11:"",12:"",13:"",14:wD},ey="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",iv="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",rv=iv+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",sv=rv+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",av=sv+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ov=av+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ID=ov+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",xD={9:iv,10:rv,11:sv,12:av,13:ov,14:ID},cv={};function AD(e){var t=cv[e]={binary:Di(vD[e]+" "+ey),binaryOfStrings:Di(SD[e]),nonBinary:{General_Category:Di(ey),Script:Di(xD[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var al=0,ny=[9,10,11,12,13,14];al<ny.length;al+=1){var ED=ny[al];AD(ED)}var S=Gt.prototype,Kc=function(t,n){this.parent=t,this.base=n||this};Kc.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var i=t;i;i=i.parent)if(n.base===i.base&&n!==i)return!0;return!1};Kc.prototype.sibling=function(){return new Kc(this.parent,this.base)};var Wn=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=cv[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Wn.prototype.reset=function(t,n,i){var r=i.indexOf("v")!==-1,s=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Wn.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Wn.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Wn.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Wn.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Wn.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Wn.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Wn.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Wn.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var i=this.pos,r=0,s=t;r<s.length;r+=1){var a=s[r],o=this.at(i,n);if(o===-1||o!==a)return!1;i=this.nextIndex(i,n)}return this.pos=i,!0};S.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=!1,r=!1,s=0;s<n.length;s++){var a=n.charAt(s);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),a==="u"&&(i=!0),a==="v"&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(e.start,"Invalid regular expression flag")};function BD(e){for(var t in e)return!0;return!1}S.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&BD(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};S.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames[i]||e.raise("Invalid named capture referenced")}};S.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new Kc(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};S.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};S.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};S.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};S.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};S.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};S.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};S.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};S.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};S.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};S.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};S.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};S.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};S.regexp_eatSyntaxCharacter=function(e){var t=e.current();return uv(t)?(e.lastIntValue=t,e.advance(),!0):!1};function uv(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}S.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!uv(n);)e.advance();return e.pos!==t};S.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};S.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var i=0,r=n;i<r.length;i+=1){var s=r[i];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};S.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};S.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Hi(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Hi(e.lastIntValue);return!0}return!1};S.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),TD(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function TD(e){return di(e,!0)||e===36||e===95}S.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),OD(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function OD(e){return As(e,!0)||e===36||e===95||e===8204||e===8205}S.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};S.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};S.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};S.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};S.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};S.regexp_eatZero=function(e){return e.current()===48&&!Tu(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};S.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};S.regexp_eatControlLetter=function(e){var t=e.current();return lv(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function lv(e){return e>=65&&e<=90||e>=97&&e<=122}S.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&ND(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function ND(e){return e>=0&&e<=1114111}S.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};S.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var hv=0,pi=1,ze=2;S.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(FD(t))return e.lastIntValue=-1,e.advance(),pi;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var i;if(e.eat(123)&&(i=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&i===ze&&e.raise("Invalid property name"),i;e.raise("Invalid property name")}return hv};function FD(e){return e===100||e===68||e===115||e===83||e===119||e===87}S.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),pi}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r)}return hv};S.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){no(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};S.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return pi;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ze;e.raise("Invalid property name")};S.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";fv(t=e.current());)e.lastStringValue+=Hi(t),e.advance();return e.lastStringValue!==""};function fv(e){return lv(e)||e===95}S.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";DD(t=e.current());)e.lastStringValue+=Hi(t),e.advance();return e.lastStringValue!==""};function DD(e){return fv(e)||Tu(e)}S.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};S.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ze&&e.raise("Negated character class may contain strings"),!0}return!1};S.regexp_classContents=function(e){return e.current()===93?pi:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),pi)};S.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};S.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||yv(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};S.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};S.regexp_classSetExpression=function(e){var t=pi,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ze&&(t=ze);for(var i=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ze&&(t=pi);continue}e.raise("Invalid character in character class")}if(i!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(i!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ze&&(t=ze)}};S.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var i=e.lastIntValue;return n!==-1&&i!==-1&&n>i&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};S.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?pi:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};S.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),i=this.regexp_classContents(e);if(e.eat(93))return n&&i===ze&&e.raise("Negated character class may contain strings"),i;e.pos=t}if(e.eat(92)){var r=this.regexp_eatCharacterClassEscape(e);if(r)return r;e.pos=t}return null};S.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};S.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ze&&(t=ze);return t};S.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?pi:ze};S.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&kD(n)||CD(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function kD(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function CD(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}S.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return RD(t)?(e.lastIntValue=t,e.advance(),!0):!1};function RD(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}S.regexp_eatClassControlLetter=function(e){var t=e.current();return Tu(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};S.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};S.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Tu(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Tu(e){return e>=48&&e<=57}S.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;dv(n=e.current());)e.lastIntValue=16*e.lastIntValue+pv(n),e.advance();return e.pos!==t};function dv(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function pv(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}S.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};S.regexp_eatOctalDigit=function(e){var t=e.current();return yv(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function yv(e){return e>=48&&e<=55}S.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!dv(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+pv(r),e.advance()}return!0};var Xf=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Au(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},tt=Gt.prototype;tt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xf(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};tt.getToken=function(){return this.next(),new Xf(this)};typeof Symbol<"u"&&(tt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===f.eof,value:t}}}});tt.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(f.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};tt.readToken=function(e){return di(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};tt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};tt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=Ub(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};tt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ls(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};tt.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&Pb.test(String.fromCharCode(e)))++this.pos;else break t}}};tt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};tt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(f.ellipsis)):(++this.pos,this.finishToken(f.dot))};tt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(f.assign,2):this.finishOp(f.slash,1)};tt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?f.star:f.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=f.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(f.assign,n+1):this.finishOp(i,n)};tt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(f.assign,3)}return this.finishOp(e===124?f.logicalOR:f.logicalAND,2)}return t===61?this.finishOp(f.assign,2):this.finishOp(e===124?f.bitwiseOR:f.bitwiseAND,1)};tt.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(f.assign,2):this.finishOp(f.bitwiseXOR,1)};tt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Qe.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(f.incDec,2):t===61?this.finishOp(f.assign,2):this.finishOp(f.plusMin,1)};tt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(f.assign,n+1):this.finishOp(f.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(f.relational,n))};tt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(f.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(f.arrow)):this.finishOp(e===61?f.eq:f.prefix,1)};tt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(f.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(f.assign,3)}return this.finishOp(f.coalesce,2)}}return this.finishOp(f.question,1)};tt.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),di(t,!0)||t===92))return this.finishToken(f.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Hi(t)+"'")};tt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(f.parenL);case 41:return++this.pos,this.finishToken(f.parenR);case 59:return++this.pos,this.finishToken(f.semi);case 44:return++this.pos,this.finishToken(f.comma);case 91:return++this.pos,this.finishToken(f.bracketL);case 93:return++this.pos,this.finishToken(f.bracketR);case 123:return++this.pos,this.finishToken(f.braceL);case 125:return++this.pos,this.finishToken(f.braceR);case 58:return++this.pos,this.finishToken(f.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(f.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(f.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Hi(e)+"'")};tt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};tt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Qe.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Wn(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch{}return this.finishToken(f.regexp,{pattern:r,flags:a,value:c})};tt.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,c=0,u=t??1/0;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),h=void 0;if(i&&l===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),c===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?h=l-97+10:l>=65?h=l-65+10:l>=48&&l<=57?h=l-48:h=1/0,h>=e)break;o=l,a=a*e+h}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function LD(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function mv(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}tt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=mv(this.input.slice(t,this.pos)),++this.pos):di(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,n)};tt.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=mv(this.input.slice(t,this.pos));return++this.pos,di(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(f.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),di(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=LD(this.input.slice(t,this.pos),n);return this.finishToken(f.num,s)};tt.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};tt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ls(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(f.string,t)};var gv={};tt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===gv)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};tt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw gv;this.raise(e,t)};tt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===f.template||this.type===f.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(f.dollarBraceL)):(++this.pos,this.finishToken(f.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(f.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ls(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};tt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(f.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};tt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Hi(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Ls(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};tt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};tt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(As(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?di:As)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Hi(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};tt.readWord=function(){var e=this.readWord1(),t=f.name;return this.keywords.test(e)&&(t=qf[e]),this.finishToken(t,e)};var MD="8.12.1";Gt.acorn={Parser:Gt,version:MD,defaultOptions:Kl,Position:Ua,SourceLocation:Au,getLineInfo:Vb,Node:Bu,TokenType:ot,tokTypes:f,keywordTypes:qf,TokContext:Ze,tokContexts:At,isIdentifierChar:As,isIdentifierStart:di,Token:Xf,isNewLine:Ls,lineBreak:Qe,lineBreakG:oD,nonASCIIwhitespace:Pb};function UD(e,t){return Gt.parse(e,t)}const Zf={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},PD={ecmaVersion:11},iy="$",$D="d",VD="d1",jD="d2",Qt=e=>(t,n)=>n.error(t,e+" not allowed"),zD=Qt("Aggregate function"),WD=Qt("Window function"),qD="Invalid argument",td="Invalid column reference",YD=td+" (must be input to an aggregate function)",_v="Invalid function call",HD="Invalid member expression",GD="Invalid operator parameter",KD="Invalid param reference",JD="Invalid variable reference",QD="Variable not accessible in operator call",XD="Unsupported variable declaration",ZD="Unsupported destructuring pattern",bv="Table expressions do not support closures",vv="Use aq.escape(fn) to use a function as-is (including closures)",tk="use table.params({ name: value }) to define dynamic parameters",ek="use aq.addFunction(name, fn) to add new op functions",nk=`
Note: ${bv}. ${vv}, or ${tk}.`,wv=`
Note: ${bv}. ${vv}, or ${ek}.`,ik=`The ${b0} method is not valid in multi-table expressions.`;function rk(e,t){const n=sk(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,QF(i)?(ok(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=VD),e.scope.add(e.tuple2=jD),e.scope.add(e.$param=iy)):(e.scope.add(e.tuple=$D),e.scope.add(e.$param=iy)),at(i,e,ed),e.root}function sk(e){try{const t=e.field?ak(e):ut(e)?Un(e):e;return UD(`expr=(${t})`,PD).body[0].expression.right}catch{J(`Expression parse error: ${e+""}`)}}function ak(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const ed={FunctionDeclaration:Qt("Function definitions"),ForStatement:Qt("For loops"),ForOfStatement:Qt("For-of loops"),ForInStatement:Qt("For-in loops"),WhileStatement:Qt("While loops"),DoWhileStatement:Qt("Do-while loops"),AwaitExpression:Qt("Await expressions"),ArrowFunctionExpression:Qt("Function definitions"),AssignmentExpression:Qt("Assignments"),FunctionExpression:Qt("Function definitions"),NewExpression:Qt('Use of "new"'),UpdateExpression:Qt("Update expressions"),VariableDeclarator(e,t){th(e.id,t)},Identifier(e,t,n){xv(e,t,n)&&!t.scope.has(e.name)&&t.error(e,JD,nk)},CallExpression(e,t){const n=Sv(e.callee),i=m0(n)||g0(n);if(i){if((t.join||t.aggregate===!1)&&Wh(n)&&zD(e,t),(t.join||t.window===!1)&&qh(n)&&WD(e,t),t.$op=1,t.ast)Zl(e,n,t),e.arguments.forEach(r=>at(r,t,Xl));else{const r=t.op(ck(t,i,n,e.arguments));Object.assign(e,{type:h0,name:r.id})}return t.$op=0,!1}else y0(n)?Zl(e,n,t):t.error(e,_v,wv)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!Yt(ki,i))return;const{name:s}=i;if(Iv(e)&&Yt(ki,r)&&hn(Zf,r.name)){Bv(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return ry(e,a,t,Av,n);if(s===t.$param)return ry(e,a,t,lk);t.paramsRef.has(s)?$a(e,t.paramsRef.get(s)):t.columnRef.has(s)?Ev(i,s,t,e):hn(t.params,s)&&$a(i,s)}};function ry(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(Yt(Ns,s))o=s.value;else try{at(s,n,ed,e),o=n.param(s)}catch{n.error(e,HD)}return i(e,o,t,n,r),!1}const Xl={...ed,VariableDeclarator:Qt("Variable declaration in operator call"),Identifier(e,t,n){xv(e,t,n)&&t.error(e,QD)},CallExpression(e,t){const n=Sv(e.callee);y0(n)?Zl(e,n,t):t.error(e,_v,wv)}};function ok(e,t){e.generator&&Qt("Generator functions")(e,t),e.async&&Qt("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,c)=>t.columnRef.set(o,[c,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(Hs(t,n[0],"tuple1",r(1)),i>1&&Hs(t,n[1],"tuple2",r(2)),i>2&&Hs(t,n[2],"$param",s)):(Hs(t,n[0],"tuple",r(0)),i>1&&Hs(t,n[1],"$param",s))),t.root=e.body}function Hs(e,t,n,i){Yt(ki,t)?(e.scope.add(t.name),e[n]=t.name):Yt(u0,t)&&t.properties.forEach(r=>{const s=Yt(ki,r.key)?r.key.name:Yt(Ns,r.key)?r.key.value:e.error(r,qD);Yt(ki,r.value)||e.error(r.value,ZD),i(r.value.name,s)})}function ck(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((c,u)=>{u<a?(at(c,e,Xl),r.push(e.field(c))):u<o?(at(c,e,Xl),s.push(e.param(c))):e.error(c,GD)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function Sv(e){return Yt(ki,e)?e.name:Yt(c0,e)?Iv(e)?uk(e.property.name):e.property.name:null}function Iv(e){return Yt(ki,e.object)&&e.object.name==="Math"}function uk(e){return e==="max"?"greatest":e==="min"?"least":e}function xv(e,t,n){const{name:i}=e;if(!(Yt(c0,n)&&n.property===e)){if(!(Yt(l0,n)&&n.key===e))if(t.paramsRef.has(i))$a(e,t.paramsRef.get(i));else if(t.columnRef.has(i))Ev(e,i,t,n);else if(hn(t.params,i))$a(e,i);else if(hn(Zf,i))Bv(e,i);else return!0}}function Av(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,td),i.aggronly&&!i.$op&&i.error(e,YD),_0(e,t,n,a,r)}function Ev(e,t,n,i){const[r,s]=n.columnRef.get(t);Av(e,r,s,n,i)}function lk(e,t,n,i){i.params&&!hn(i.params,t)&&i.error(e,KD),$a(e,t)}function $a(e,t){e.type=cT,e.name=t}function Bv(e,t){e.type=sT,e.name=t,e.raw=Zf[t]}function Zl(e,t,n){if(t===b0){const i=n.table;i||n.error(e,ik),v0(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=se(s)?i.columnName(s):s;return i.column(a)||n.error(r,td),a}):i.columnNames())}else e.callee={type:oT,name:t}}function th(e,t){Yt(ki,e)?t.scope.add(e.name):Yt(eT,e)?e.elements.forEach(n=>th(n,t)):Yt(u0,e)?e.properties.forEach(n=>th(n.value,t)):t.error(e.id,XD)}const hk={[Ja]:1,[h0]:1};function Se(e,t={}){const n=t.generate||Nc,i=t.compiler||Yh,r=dk(t),s={},a={},o=[],c=[];let u=0,l=-1;const h=t.join?i.join:t.index==1?i.expr2:i.expr,d={op(_){const b=fk(_);return a[b]||(_.id=++l,a[b]=_)},field(_){const b=n(_);return s[b]||(s[b]=++u)},param(_){return Yt(Ns,_)?_.value:i.param(n(_),r)},value(_,b){o.push(_);const w=b.escape||(t.ast?JF(b):h(n(b),r));c.push(w),hk[b.type]&&w!==b&&ie(w)&&(w.field=b.name)},error(_,b,w=""){const U=_.start-6,ht=_.end-6,F=String(d.spec).slice(U,ht);J(`${b}: "${F}"${w}`)}};Object.assign(d,t,{params:r});for(const[_,b]of hu(e))d.value(_+"",b.escape?tD(d,b,r):rk(d,b));if(t.ast)return{names:o,exprs:c};const y=[];for(const _ in s)y[s[_]]=i.expr(_,r);const g=Object.values(a);return g.forEach(_=>_.fields=_.fields.map(b=>y[b])),{names:o,exprs:c,ops:g}}function fk(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1);t+=`[${n},${!!e.peers}]`}return t}function dk(e){return(e.table?ol(e.table):e.join?{...ol(e.join[1]),...ol(e.join[0])}:{})||{}}function ol(e){return e&&xt(e.params)?e.params():{}}const Tv="Expr",tn="ExprList",Ov="ExprNumber",pa="ExprObject",Jr="JoinKeys",Jc="JoinValues",Ue="Options",nd="OrderKeys",Ti="SelectionList",dr="TableRef",Qr="TableRefList",pk="Descending",yk="Query",mk="Selection",gk="Verb",_k="Window";function id(e,t){return e&&e.expr?new sy({...e,...t}):new sy(t,e)}class sy{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...xt(this.expr)?{func:!0}:{}}}}function bk(e){return id(e,{desc:!0})}function Sr(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return id(e,t?{expr:t,...i}:i)}function vk(e,t,n){return id(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function wk(e){const t=n=>n;return t.toString=()=>e,t}function ay(e,t){return t=t&&xt(t.query)?t.query():t,t&&xt(t.evaluate)?t.evaluate(null,e):e(t)}function Nv(e){return ie(e)&&(ut(e.all)||ut(e.matches)||ut(e.not)||ut(e.range))}function Va(e){return e&&xt(e.toObject)?e.toObject():xt(e)?{expr:String(e),func:!0}:ut(e)?e.map(Va):ie(e)?Iu(e,t=>Va(t)):e}function rd(e){return ut(e)?e.map(rd):ie(e)?ut(e.verbs)?so.from(e):ut(e.all)?xs():ut(e.range)?qF(...e.range):ut(e.match)?YF(RegExp(...e.match)):ut(e.not)?Cb(e.not.map(Va)):Sk(e):e}function Sk(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Sr(n):e.func===!0&&(t=n=wk(n)),ie(e.window)){const{frame:i,peers:r}=e.window;t=n=vk(n,i,r)}e.desc===!0&&(t=bk(n))}return e===t?Iu(e,i=>rd(i)):t}function Ik(e){return ut(e)?e.map(xk):e}function xk(e){const t=[];return ve(e).forEach(n=>{se(n)?t.push(n):te(n)?t.push(Sr(n,null)):ie(n)&&n.expr||xt(n)?t.push(n):J(`Invalid key value: ${n+""}`)}),t}function Ak(e){return ut(e)?e.map(Ek):e}function Ek(e,t){return t<2?ve(e):e}function Bk(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(ie(i)&&!xt(i))for(const r in i)t.push(i[r]);else n=se(i)?i:te(i)?Sr(n):xt(i)?n:J(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Tk={[Tv]:Cv,[tn]:Es,[Ov]:Ck,[pa]:Gi,[Jr]:Rk,[Jc]:Lk,[nd]:Es,[Ti]:Dk};function Ok(e,t,n){return t===dr?oy(e):t===Qr?e.map(oy):Fv(Va(e),t,n)}function Fv(e,t,n){return t===Ue?e&&Nk(e,n):Tk[t](e)}function Nk(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?Fv(r,t[i]):r}return n}function Fk(e,t){return Se({expr:e},{...t,ast:!0}).exprs[0]}function sd(e){return{type:Ja,name:e}}function Dv(e){return{type:Ja,index:e}}function Gi(e,t){if(te(e))return Fk(e,t);if(e.expr){let n;if(e.field===!0?n=sd(e.expr):e.func===!0&&(n=Gi(e.expr,t)),n)return e.desc&&(n={type:pk,expr:n}),e.window&&(n={type:_k,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Gi(e[n],t),as:n}))}function kv(e){const t=mk;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Es(e.not)}:e.range?{type:t,operator:"range",arguments:Es(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:J("Invalid input")}function Dk(e){return ve(e).map(kk).flat()}function kk(e){return Nv(e)?kv(e):se(e)?Dv(e):te(e)?sd(e):ie(e)?Object.keys(e).map(t=>({type:Ja,name:t,as:e[t]})):J("Invalid input")}function Cv(e){return Nv(e)?kv(e):se(e)?Dv(e):te(e)?sd(e):ie(e)?Gi(e):J("Invalid input")}function Es(e){return ve(e).map(Cv).flat()}function Ck(e){return se(e)?e:Gi(e)}function Rk(e){return ut(e)?e.map(Es):Gi(e,{join:!0})}function Lk(e){return ut(e)?e.map((t,n)=>n<2?Es(t):Gi(t,{join:!0})):Gi(e,{join:!0})}function oy(e){return e&&xt(e.toAST)?e.toAST():e}class Rv{constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],c=a===Jr?Ik(o):a===Jc?Ak(o):a===nd?Bk(o):o;this[r.name]=c!==void 0?c:r.default})}static from(t){const n=eh[t.verb],i=(n.schema||[]).map(({name:r})=>rd(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===dr?ay(n,a):s===Qr?a.map(o=>ay(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=Va(this[n])}),t}toAST(){const t={type:gk,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=Ok(this[n],i,r)}),t}}function bt(e,t){return Object.assign((...n)=>new Rv(e,t,n),{schema:t})}const eh={count:bt("count",[{name:"options",type:Ue}]),derive:bt("derive",[{name:"values",type:pa},{name:"options",type:Ue,props:{before:Ti,after:Ti}}]),filter:bt("filter",[{name:"criteria",type:pa}]),groupby:bt("groupby",[{name:"keys",type:tn}]),orderby:bt("orderby",[{name:"keys",type:nd}]),relocate:bt("relocate",[{name:"columns",type:Ti},{name:"options",type:Ue,props:{before:Ti,after:Ti}}]),rename:bt("rename",[{name:"columns",type:Ti}]),rollup:bt("rollup",[{name:"values",type:pa}]),sample:bt("sample",[{name:"size",type:Ov},{name:"options",type:Ue,props:{weight:Tv}}]),select:bt("select",[{name:"columns",type:Ti}]),ungroup:bt("ungroup"),unorder:bt("unorder"),reify:bt("reify"),dedupe:bt("dedupe",[{name:"keys",type:tn,default:[]}]),impute:bt("impute",[{name:"values",type:pa},{name:"options",type:Ue,props:{expand:tn}}]),fold:bt("fold",[{name:"values",type:tn},{name:"options",type:Ue}]),pivot:bt("pivot",[{name:"keys",type:tn},{name:"values",type:tn},{name:"options",type:Ue}]),spread:bt("spread",[{name:"values",type:tn},{name:"options",type:Ue}]),unroll:bt("unroll",[{name:"values",type:tn},{name:"options",type:Ue,props:{drop:tn}}]),lookup:bt("lookup",[{name:"table",type:dr},{name:"on",type:Jr},{name:"values",type:tn}]),join:bt("join",[{name:"table",type:dr},{name:"on",type:Jr},{name:"values",type:Jc},{name:"options",type:Ue}]),cross:bt("cross",[{name:"table",type:dr},{name:"values",type:Jc},{name:"options",type:Ue}]),semijoin:bt("semijoin",[{name:"table",type:dr},{name:"on",type:Jr}]),antijoin:bt("antijoin",[{name:"table",type:dr},{name:"on",type:Jr}]),concat:bt("concat",[{name:"tables",type:Qr}]),union:bt("union",[{name:"tables",type:Qr}]),intersect:bt("intersect",[{name:"tables",type:Qr}]),except:bt("except",[{name:"tables",type:Qr}])};class so extends Kg{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new so(t.map(Rv.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return cy(this,"toObject")}toJSON(){return this.toObject()}toAST(){return cy(this,"toAST",{type:yk})}}function cy(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Mk(e,t){return new so(e._verbs.concat(t),e._params,e._table)}for(const e in eh){const t=eh[e];so.prototype["__"+e]=function(n,...i){return Mk(n,t(...i))}}function Ps(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,c)=>`${i[a]}${c} = ${i[a]}[${c}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}function Uk(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function ad(e,t){const n=ke();return t.forEach((i,r)=>{const s=te(i)?i:r;if(s){const a=e.column(r)||J(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function Lv(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||J("relocate requires a before or after option."),r&&s&&J("relocate accepts only one of the before or after options."),t=fi(e,t);const a=[...fi(e,r?n:i).keys()],o=r?a[0]:a.pop(),c=new Map;return e.columnNames().forEach(u=>{const l=!t.has(u);if(u===o){s&&l&&c.set(u,u);for(const[h,d]of t)c.set(h,d);if(s)return}l&&c.set(u,u)}),ad(e,c)}function ao(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function od(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pk(e,t=0,n=e.length){let i=n?e[t++]:ct;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function $k(e,t=0,n=e.length){let i=n?e[t++]:ct;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function _o(e){return Fa(e)?e:+e}function Vk(e,t){const n=e.length;if(!n)return ct;if((t=+t)<=0||n<2)return _o(e[0]);if(t>=1)return _o(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=_o(e[r]);return Fa(s)?s:s+(_o(e[r+1])-s)*(i-r)}class jk{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Pk(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:$k(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(od)),Vk(this._sorted,t)}}const Qc=(e,t,n)=>Ps(t,"{"+ao(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function zk(e,t){const{ops:n,output:i}=Wk(e,t),r=e[0].fields,s=r.length,a=s===0?cd:s===1?qk:s===2?Yk:J("Unsupported field count: "+s);return new a(r,n,i,t)}function Wk(e,t){const n={},i=[];function r(a,o=[]){const c=a+":"+o;if(n[c])return n[c];const u=m0(a),l=u.create(...o);return t<0&&u.stream&&u.stream.forEach(h=>r(h,[])),u.req&&u.req.forEach(h=>r(h,[])),n[c]=l,i.push(l),l}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class cd extends GF{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new jk),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class qk extends cd{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Qc(n,s,"add"),this._rem=Qc(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,an(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,an(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class Yk extends cd{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=Qc(n,s,"add"),this._rem=Qc(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,an(r)&&an(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,an(r)&&an(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function Ar(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=$s(e,t),a=r?(o,c)=>s[o][r[c]]:o=>s[o][0];n=n.map(o=>c=>o(c,i,a))}return n}function $s(e,t,n){if(!t.length)return n;const i=Mv(t),r=e.groups(),s=r?r.size:1;return n=n||uu(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=Pv(e,a,r);for(let c=0;c<s;++c)a.write(o[c],n,c)}):i.forEach(a=>{const o=Uv(e,a);a.write(o,n,0)}),n}function Mv(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(zk(i[r],t));return n}function Uv(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function Pv(e,t,n){const{keys:i,size:r}=n,s=uu(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),c=o.length;for(let u=0;u<c;++u){const l=o[u];t.add(s[i[l]],l,a)}}else if(e.isFiltered()){const o=e.mask();for(let c=o.next(0);c>=0;c=o.next(c+1))t.add(s[i[c]],c,a)}else{const o=e.totalRows();for(let c=0;c<o;++c)t.add(s[i[c]],c,a)}return s}function $v(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const c=e.add(i[o],Array(s)),u=n[o];for(let l=0;l<s;++l)c[l]=u(r[l])}}function Vv(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const uy=Vv(od);function Hk(e,t,n,i,r){let s,a,o,c,u;const l=_=>a[_-1]===a[_],h=i.length,d=r.length,y=i.length?Ps(["w","r","k"],"{"+ao(i,(_,b)=>`r[_${b}.id][k]=_${b}.value(w,_${b}.get);`)+"}",i):()=>{},g={i0:0,i1:0,index:0,size:0,peer:l,init(_,b,w,U){g.index=g.i0=g.i1=0,g.size=b.length,s=_,a=b,c=w,u=U,o=r?r.map(ht=>ht.init()):null;for(let ht=0;ht<h;++ht)i[ht].init();return g},value(_,b){return b(s[_],e)},step(_){const[b,w]=t,U=g.size,ht=g.i0,F=g.i1;g.i0=b!=null?Math.max(0,_-Math.abs(b)):0,g.i1=w!=null?Math.min(U,_+Math.abs(w)+1):U,g.index=_,n&&(g.i0>0&&l(g.i0)&&(g.i0=uy.left(a,a[g.i0])),g.i1<U&&l(g.i1)&&(g.i1=uy.right(a,a[g.i1-1])));for(let It=0;It<d;++It){const Z=r[It],Jt=o[It];for(let _t=ht;_t<g.i0;++_t)Z.rem(Jt,s[_t],e);for(let _t=F;_t<g.i1;++_t)Z.add(Jt,s[_t],e);Z.write(Jt,c,u)}return y(g,c,u),c}};return g}const Gk=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Kk=e=>!!e.peers;function Jk(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=g0(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function Qk(e,t,n,i={},r){const s=e.data(),a=Xk(r,s),o=a.length,c=Ps(["r","d","op"],"{"+ao(t,(u,l)=>`_${l}[r] = $${l}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,l)=>{const h=u.length,d=Zk(e,u);for(let g=0;g<o;++g)a[g].init(u,d,i,l);const y=g=>i[g][l];for(let g=0;g<h;++g){for(let _=0;_<o;++_)a[_].step(g);c(u[g],s,y)}})}function Xk(e,t){const n={};return e.forEach(i=>{const r=Gk(i),s=Kk(i),a=`${r},${s}`,{aggOps:o,winOps:c}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});Wh(i.name)?o.push(i):c.push(Jk(i))}),Object.values(n).map(i=>Hk(t,i.frame,i.peers,i.winOps,Mv(i.aggOps,i.frame[0]!=null?-1:1)))}function Zk(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function tC(e){return qh(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function ud(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=ke(r.drop?null:e),o=t.map(d=>a.add(d,Array(s))),[c,u]=eC(i),l=e.isGrouped()?e.groups().size:1,h=$s(e,c,uu(i.length,()=>Array(l)));return u.length?Qk(e,o,n,h,u):nC(e,o,n,h),e.create(a)}function eC(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(tC(s)?n:t).push(s)}return[t,n]}function nC(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(u,l)=>i[u][a[l]]:u=>i[u][0],c=t.length;for(let u=0;u<c;++u){const l=n[u],h=t[u];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))h[d]=l(d,s,o);else{const d=e.totalRows();for(let y=0;y<d;++y)h[y]=l(y,s,o)}}}function iC(e,t,n={}){const i=ud(e,Se(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:Lv(i,Object.keys(t).filter(r=>!e.column(r)),n)}function rC(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const bo=2147483648,sC=4294967295;class jv{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&bo>>>t}set(t){this._bits[t>>5]|=bo>>>t}clear(t){this._bits[t>>5]&=~(bo>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&sC>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=bo>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function aC(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new jv(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function oC(e,t){const n=Se({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=ud(e,n,{drop:!0}).column("p");i=s=>r[s]}return aC(e,i)}function zv(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),c=Ar(e,i,n),u=ke(),l=new Set(t),h=[],d=[],y=[];e.columnNames().forEach(F=>{if(!o.has(F)){const It=u.add(F,[]);l.has(F)||(h.push(e.column(F)),d.push(It))}}),t.forEach(F=>{o.has(F)||(u.has(F)||u.add(F,[]),y.push(u.data[F]))});const g=a?u.add(a,[]):null;let _=0;const b=h.length,w=y.length,U=(F,It)=>{for(let Z=0;Z<b;++Z)d[Z].length=_+It,d[Z].fill(h[Z].get(F),_,_+It)},ht=g?(F,It)=>{for(let Z=0;Z<It;++Z)g[F+Z]=Z}:()=>{};if(w===1){const F=c[0],It=y[0];e.scan((Z,Jt)=>{const _t=ve(F(Z,Jt)),Ae=Math.min(_t.length,s);U(Z,Ae);for(let mn=0;mn<Ae;++mn)It[_+mn]=_t[mn];ht(_,Ae),_+=Ae})}else e.scan((F,It)=>{let Z=0;const Jt=c.map(_t=>{const Ae=ve(_t(F,It));return Z=Math.min(Math.max(Z,Ae.length),s),Ae});U(F,Z);for(let _t=0;_t<w;++_t){const Ae=y[_t],mn=Jt[_t];for(let er=0;er<Z;++er)Ae[_+er]=mn[er]}ht(_,Z),_+=Z});return e.create(u.new())}function cC(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=Ar(e,i,n);return zv(e,{names:[s,a],exprs:[()=>t,(c,u)=>o.map(l=>l(c,u))]},{...r,drop:t})}function fn(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=se(a)?t.columnName(a):a,te(a)?r.set(a,Sr(a)):xt(a)?fi(t,a).forEach(s):ie(a)?Db(r,a):J(`Invalid ${e} value: ${a+""}`)};return ve(n).forEach(s),i.preparse&&i.preparse(r),Se(r,{table:t,...i})}function uC(e,t,n){return cC(e,fn("fold",e,t),n)}function ly(e,t,n,i){const r=n&&n.length;return lC(r?hC(e,n,i):e,t,r)}function lC(e,{names:t,exprs:n,ops:i},r){const s=Ar(e,i,n),a=r?null:ke(e),o=e.totalRows();return t.forEach((c,u)=>{const l=e.column(c),h=r?l.data:a.add(c,Array(o)),d=s[u];e.scan(y=>{const g=l.get(y);h[y]=an(g)?g:d(y)})}),r?e:e.create(a)}function hC(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(g=>e.getter(g))),o=new Set,c=Fc(a);e.scan((g,_)=>o.add(c(g,_)));const u=e.columnNames(),l=ke(),h=u.map(g=>l.add(g,[]));u.forEach((g,_)=>{const b=r[g],w=h[_];e.scan(U=>w.push(b.get(U)))});const d=Fc(a.map((g,_)=>b=>b[_])),y=Ps("v","{"+h.map((g,_)=>`_${_}.push(v[$${_}]);`).join("")+"}",h,u.map(g=>s.indexOf(g)));if(i){let g=i.keys.length;const _=n.reduce((w,U)=>w*U.length,i.size),b=new Uint32Array(_+(g-o.size));b.set(i.keys),hy(i,n,(w,U)=>{o.has(d(w))||(y(w),b[g++]=U[0])}),l.groupby({...i,keys:b})}else hy(i,n,g=>{o.has(d(g))||y(g)});return e.create(l.new())}function hy(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(e){const{get:l,rows:h,size:d}=e;a[0]=d,c.push((y,g)=>{const _=h[g];for(let b=0;b<i;++b)y[b]=l[b](_)})}t.forEach((l,h)=>{const d=h+i;a[h+r]=l.length,c.push((y,g)=>y[d]=l[g])});const u=Array(i+t.length);for(let l=0;l<s;++l)c[l](u,0);n(u,o);for(let l=s-1;l>=0;){const h=++o[l];h<a[l]?(c[l](u,h),n(u,o),l=s-1):(o[l]=0,c[l](u,0),--l)}}function ld(e,{names:t,exprs:n,ops:i}){const r=ke(),s=e.groups();return s&&$v(r,s),fC(t,n,s,$s(e,i),r),e.create(r.new())}function fC(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(c,u)=>i[c][u],o=e.length;for(let c=0;c<o;++c){const u=t[c];if(u.field!=null)r.add(e[c],i[u.field]);else if(s>1){const l=r.add(e[c],Array(s));for(let h=0;h<s;++h)l[h]=u(h,null,a)}else r.add(e[c],[u(0,null,a)])}}function dC(e,t,n={}){if(t=Se(t,{table:e}),t.names.forEach(i=>e.column(i)?0:J(`Invalid impute column ${Un(i)}`)),n.expand){const i={preparse:pC,aggronly:!0},r=fn("impute",e,n.expand,i),s=ld(e.ungroup(),r);return ly(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return ly(e,t)}function pC(e){e.forEach((t,n)=>t.field?e.set(n,r0(t+"")):0)}function yC(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function Wv(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function mC(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function gC(e,t){const n=["i","a","j","b"];return Ps(n,"{"+ao(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function _C(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),c=o.length,u=new Int32Array(c),l=t.data(),h=t.indices(!1),d=h.length,y=new Int32Array(d),g=i.length,_=ke(),b=Array(g),w=Array(g);for(let F=0;F<i.length;++F)b[F]=_.add(i[F],[]),w[F]=r[F];const U=gC(b,w);if((ut(n)?vC:bC)(U,n,a,l,o,h,u,y,c,d),s.left)for(let F=0;F<c;++F)u[F]||U(o[F],a,-1,l);if(s.right)for(let F=0;F<d;++F)y[F]||U(-1,a,h[F],l);return e.create(_.new())}function bC(e,t,n,i,r,s,a,o,c,u){for(let l=0;l<c;++l){const h=r[l];for(let d=0;d<u;++d){const y=s[d];t(h,n,y,i)&&(e(h,n,y,i),a[l]=1,o[d]=1)}}}function vC(e,[t,n],i,r,s,a,o,c,u,l){let h,d,y,g,_,b,w,U,ht=e;u>=l?(h=i,d=t,y=o,g=s,_=r,b=n,w=c,U=a):(h=r,d=n,y=c,g=a,_=i,b=t,w=o,U=s,ht=(Z,Jt,_t,Ae)=>e(_t,Ae,Z,Jt));const F=mC(U,_,b),It=g.length;for(let Z=0;Z<It;++Z){const Jt=g[Z],_t=F.get(d(Jt,h));if(_t){const Ae=_t.length;for(let mn=0;mn<Ae;++mn){const er=_t[mn];ht(Jt,h,U[er],_),w[er]=1}y[Z]=1}}}function Xc(e,t,n){const i=new Map;ve(n).forEach((s,a)=>{s=se(s)?t.columnName(s):s,te(s)?i.set(a,Sr(s)):xt(s)||ie(s)&&s.expr?i.set(a,s):J(`Invalid ${e} key value: ${s+""}`)});const r=Se(i,{table:t,aggregate:!1,window:!1});return Fc(r.exprs,!0)}function wC(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function hd(e,t,n){if(n)te(n)?n=[n,n]:ut(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=wC(e.columnNames(),t.columnNames());i.length||J("Natural join requires shared column names."),n=[i,i]}return n}function qv(e,t,n,i){return n.length!==i.length&&J("Mismatched number of join keys"),[Xc("join",e,n),Xc("join",t,i)]}const SC={aggregate:!1,window:!1},IC={...SC,index:1};function fy(e,t,n,i,r={}){n=hd(e,t,n);const s={join:[e,t]};let a;if(ut(n)){const[o,c]=n.map(ve);a=qv(e,t,o,c),i||(i=xC(e,o,c,r))}else a=Se({on:n},s).exprs[0],i||(i=[xs(),xs()]);return _C(e,t,a,AC(e,t,i,s,r&&r.suffix),r)}function xC(e,t,n,i){const r=[];t.forEach((a,o)=>te(a)&&a===n[o]?r.push(a):0);const s=Cb(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const c=`[${Un(o)}]`;return a.has(o)?{[o]:`(a, b) => a${c} == null ? b${c} : a${c}`}:o}),s]}return i.right?[s,xs()]:[xs(),s]}function AC(e,t,n,i,r=[]){if(ut(n)){let s,a,o,c=n.length;s=a=o={names:[],exprs:[]},c--&&(s=fn("join",e,n[0],i)),c--&&(a=fn("join",t,n[1],IC)),c--&&(o=Se(n[2],i));const u=new Set,l=new Set(s.names);return a.names.forEach(h=>{l.has(h)&&u.add(h)}),u.size&&(r[0]!==""&&dy(s.names,u,r[0]||"_1"),r[1]!==""&&dy(a.names,u,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return Se(n,i)}function dy(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function EC(e,t,n,i={}){const r=new jv(e.totalRows());return(ut(n)?BC:TC)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function BC(e,t,n,[i,r]){const s=Wv(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function TC(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const c=t.indices(!1),u=n.indices(!1);for(let l=0;l<r;++l){const h=c[l];for(let d=0;d<s;++d)if(i(h,a,u[d],o)){e.set(h);break}}}else for(let c=0;c<r;++c)for(let u=0;u<s;++u)if(i(c,a,u,o)){e.set(c);break}}function py(e,t,n,i){n=hd(e,t,n);const r=ut(n)?qv(e,t,...n.map(ve)):Se({on:n},{join:[e,t]}).exprs[0];return EC(e,t,r,i)}function OC(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=ke(e),c=e.totalRows();r.forEach(d=>o.add(d,Array(c).fill(ct)));const u=Wv(t,i),l=Ps(["lr","rr","data"],"{"+ao(r,(d,y)=>`_[${y}][lr] = $[${y}](rr, data);`)+"}",r.map(d=>o.data[d]),Ar(t,a,s)),h=t.data();return e.scan((d,y)=>{const g=u.get(n(d,y));g>=0&&l(d,g,h)}),e.create(o)}function NC(e,t,n,i){return n=hd(e,t,n),OC(e,t,[Xc("lookup",e,n[0]),Xc("lookup",t,n[1])],fn("lookup",t,i))}const nh=(e,t)=>e??t;function FC(e,t,n,i={}){const{keys:r,keyColumn:s}=DC(e,t,i),a=nh(i.valueSeparator,"_"),o=n.names.length>1?(u,l)=>l+a+r[u]:u=>r[u],c=r.map(u=>$s(e,n.ops.map(l=>{if(l.name==="count"){const d=y=>u===s[y]?1:NaN;return d.toString=()=>u+":1",{...l,name:"sum",fields:[d]}}const h=l.fields.map(d=>{const y=(g,_)=>u===s[g]?d(g,_):NaN;return y.toString=()=>u+":"+d,y});return{...l,fields:h}})));return e.create(kC(n,o,e.groups(),c))}function DC(e,t,n){const i=n.limit>0?+n.limit:1/0,r=nh(n.sort,!0),s=nh(n.keySeparator,"_"),a=Ar(e,t.ops,t.exprs),o=a.length===1?a[0]:(h,d)=>a.map(y=>y(h,d)).join(s),c=Array(e.totalRows());e.scan((h,d)=>c[h]=o(h,d));const u=$s(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>c[h]],params:[]}])[0][0],l=r?u.sort():u;return{keys:Number.isFinite(i)?l.slice(0,i):l,keyColumn:c}}function kC({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=ke(),o=r.length,c=e.length;let u;const l=(h,d)=>u[h][d];i&&$v(a,i);for(let h=0;h<c;++h){const d=t[h];if(d.field!=null)for(let y=0;y<o;++y)a.add(n(y,e[h]),r[y][d.field]);else if(s>1)for(let y=0;y<o;++y){u=r[y];const g=a.add(n(y,e[h]),Array(s));for(let _=0;_<s;++_)g[_]=d(_,null,l)}else for(let y=0;y<o;++y)u=r[y],a.add(n(y,e[h]),[d(0,null,l)])}return a.new()}function CC(e,t,n,i){return FC(e,fn("fold",e,t),fn("fold",e,n,{preparse:RC,aggronly:!0}),i)}function RC(e){e.forEach((t,n)=>t.field?e.set(n,e0(t+"")):0)}function LC(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),ad(e,fi(e,t,n))}function yy(e,t){return ld(e,Se(t,{table:e,aggronly:!0,window:!1}))}function MC(e,t,n,i){return(t?i?PC:UC:i?VC:$C)(e.length,e,n,i)}function UC(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*Os()|0];return t}function PC(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let c=0;c<r;++c)s[c]=a+=i(n[c]);const o=Vv(od).right;for(let c=0;c<e;++c)t[c]=n[o(s,a*Os())];return t}function $C(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*Os();s<e&&(t[s|0]=n[r])}return t}function VC(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(Os())/i(n[o]);a.sort((o,c)=>s[o]-s[c]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function jC(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=Os()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function zC(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((l,h)=>{let d=t(h);return o+=d=r?d:Math.min(l.length,d),d});const c=new Uint32Array(o);let u=0;return a.forEach((l,h)=>{const d=t[h],y=c.subarray(u,u+=d);!r&&d===l.length?y.set(l):MC(y,r,l,n)}),s!==!1&&(a.length>1||!r)&&jC(c),e.reify(c)}function WC(e,t,n={}){return zC(e,qC(e,t),YC(e,n.weight),n)}const Yv=e=>t=>e.get(t)||0;function qC(e,t){return se(t)?()=>t:Yv(ld(e,Se({size:t},{table:e,window:!1})).column("size"))}function YC(e,t){return t==null?null:(t=se(t)?e.columnName(t):t,Yv(te(t)?e.column(t):ud(e,Se({w:t},{table:e}),{drop:!0}).column("w")))}function HC(e,t){return ad(e,fi(e,t))}function GC(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),c=Ar(e,i,n),u=ke(),l=t.reduce((d,y,g)=>d.set(y,g),new Map),h=(d,y)=>{const g=KC(e,c[d],o),_=g.length;for(let b=0;b<_;++b)u.add(s[b]||`${y}_${b+1}`,g[b])};return e.columnNames().forEach(d=>{l.has(d)?(a||u.add(d,e.column(d)),h(l.get(d),d),l.delete(d)):u.add(d,e.column(d))}),l.forEach(h),e.create(u)}function KC(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=ve(t(s,a)),c=Math.min(o.length,n);for(;r.length<c;)r.push(Array(i).fill(ct));for(let u=0;u<c;++u)r[u][s]=o[u]}),r}function JC(e,t,n){return GC(e,fn("spread",e,t),n)}function QC(e,t){return e.concat(t).dedupe()}function XC(e,t,n){return zv(e,fn("unroll",e,t),n&&n.drop?{...n,drop:fn("unroll",e,n.drop).names}:n)}function ZC(e,t){return e.create({groups:tR(e,t)})}function tR(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const y=e.column(n[0].field);if(y.groups)return y.groups(t)}let s=Ar(e,i,n);const a=Fc(s),o=e.totalRows(),c=new Uint32Array(o),u={},l=[],h=e.data(),d=e.mask();if(d)for(let y=d.next(0);y>=0;y=d.next(y+1)){const g=a(y,h)+"",_=u[g];c[y]=_??(u[g]=l.push(y)-1)}else for(let y=0;y<o;++y){const g=a(y,h)+"",_=u[g];c[y]=_??(u[g]=l.push(y)-1)}return i.length||(s=s.map(y=>g=>y(g,h))),{keys:c,get:s,names:t,rows:l,size:l.length}}function eR(e,t){return ZC(e,fn("groupby",e,t))}function nR(e,t){return e.create({order:t})}const iR=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function rR(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:c}=Se(t,{table:e,value:(y,g)=>{if(n.push(y),g.escape){const _=b=>`fn[${r.length}](${b}, data)`;i.push([_("a"),_("b")]),r.push(g.escape)}else i.push([Nc(g,{index:"a",op:a}),Nc(g,{index:"b",op:o})])},window:!1}),u=$s(e,c),l=(y,g)=>u[y][g],h=n.length;let d="return (a, b) => {"+(l&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let y=0;y<h;++y){const g=t.get(n[y]).desc?-1:1,[_,b]=i[y];d+=iR(_,b,-g,g)}return d+="0;};",Function("op","keys","fn","data",d)(l,s,r,e.data())}function sR(e,t){return nR(e,aR(e,t))}function aR(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ie(a)&&!xt(a))for(const o in a)r(a[o]);else r(se(a)?Sr(s,e.columnName(a)):te(a)?Sr(s):xt(a)?s:J(`Invalid orderby field: ${s+""}`))}),rR(e,i)}function oR(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=ke();return e.columnNames().forEach(a=>{const o=Array(i);let c=0;r.forEach(u=>{const l=u.column(a)||{get:()=>ct};u.scan(h=>o[c++]=l.get(h))}),s.add(a,o)}),e.create(s.new())}function cR(e,t){const n=ke(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach(d=>n.add(d,null));const u=i?Pv(e,t,i):[Uv(e,t)];t.outputs().map(d=>n.add(d,[]));const l=c.length-1;let h=0;for(let d=0;d<l;++d)h+=c[d+1]=t.write(u[d],n.data,c[d]);if(i){const d=e.data();s.forEach((y,g)=>{const _=n.data[y]=Array(h),b=r[g];for(let w=0,U=0;w<o;++w)_.fill(b(a[w],d),U,U+=c[w+1])})}return e.create(n.new())}function uR(e){return e.isGrouped()?e.create({groups:null}):e}function lR(e){return e.isOrdered()?e.create({order:null}):e}const hR={__antijoin:(e,t,n)=>py(e,t,n,{anti:!0}),__count:(e,t={})=>yy(e,{[t.as||"count"]:n0()}),__cross:(e,t,n,i)=>fy(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:oR,__dedupe:Uk,__derive:iC,__except:rC,__filter:oC,__fold:uC,__impute:dC,__intersect:yC,__join:fy,__lookup:NC,__pivot:CC,__relocate:Lv,__rename:LC,__rollup:yy,__sample:WC,__select:HC,__semijoin:py,__spread:JC,__union:QC,__unroll:XC,__groupby:eR,__orderby:sR,__ungroup:uR,__unorder:lR,__reduce:cR};Object.assign(ri.prototype,hR);function fR(e,t){return ri.from(e,t)}ri.prototype;class dR extends jn{constructor(t){super(),this.function_store=t.matching,this.func_elected=t.default_func,this.ignore_cols=t.ignore_cols,this.backend=t.backend,this.params=t.defaults??{}}snapshot(){return{params:Yo(this.params),func_elected:Yo(this.func_elected)}}restoreSnapshot(t){this.params=t.params,this.func_elected=t.func_elected}async _execute(t=null){if(qo(t))return;t.length==1&&P1("func_elected",t[0])?this.func_elected=t[0].func_elected:q1(t)||t.forEach(c=>{this.params=oh(this.params,c)});let n=await this.backend.execute(this.params),i=fR(n),r=i.columnNames();r=N1(r,this.ignore_cols);let s=sw(r,r),a=this.function_store[0][this.func_elected],o=[];s.forEach(([c,u])=>{let l=a(c,i.array(c),u,i.array(u));o.push({x:c,y:u,value:l})}),this.emit("data",o,"matching_table")}}class pR extends jn{constructor(){super(),this.overlays={}}snapshot(){return Yo(this.overlays)}restoreSnapshot(t){this.overlays=t}async _execute(t,n){t.forEach(r=>{this.overlays=K1(this.overlays,r)});let i=[];Ay(({left:r,right:s},a)=>{i.push({key:a,left:r,right:s})},this.overlays),this.emit("data",i,"overlay")}}class yR extends jn{constructor(t){super(),this.backend=t.backend,this.name=t.name,this.params=t.params}async execute(t){this.params=t??this.params;const n=await this.backend.execute(this.params);let i=[];for(const s of n){let a=JSON.parse(s.feature);i.push(a)}const r={type:"FeatureCollection",name:this.name,features:i};return this.emit("data",r,this.name),r}}let my={array:Px,url:$x,duckdb:dB,cdt:yB,identity:mB,random:gB,query:_B,matching:dR,overlay:pR,map:yR},mR=0;class xL extends Map{get backends(){return wy(this)}registerClass(t,n){my[t]=n}createBackends(t){for(const n of t)this.createBackend(n)}createBackend(t){t.id=t.id??`_backendid_${mR++}`;let n=my[t.type];if(!n)throw new Error(`Backend type ${t.type} not found`);let i=new n(t);return i.id=t.id,this[t.id]=i,console.info("createBackend",t.id,i),i}}export{By as $,si as A,xL as B,Zc as C,T1 as D,I1 as E,N1 as F,$S as G,lh as H,Py as I,za as J,QS as K,Ko as L,dR as M,ba as N,pR as O,hh as P,_B as Q,me as R,un as S,Oi as T,wa as U,kd as V,oI as W,ZS as X,jy as Y,bR as Z,$t as _,SR as a,bI as a0,vR as a1,Jo as a2,Ty as a3,xd as a4,jn as a5,Yo as a6,iw as a7,Lx as b,Mt as c,ah as d,q1 as e,Ay as f,Q1 as g,wy as h,b1 as i,B1 as j,_a as k,qo as l,oh as m,Tt as n,rh as o,fd as p,Qv as q,by as r,gy as s,Kv as t,a1 as u,wR as v,tu as w,_y as x,u1 as y,ul as z};
