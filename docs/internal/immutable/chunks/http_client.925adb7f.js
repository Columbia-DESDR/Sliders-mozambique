import{D as Xo,S as We,i as Ve,U as J,s as He,e as ot,c as st,b as ct,d as V,h as W,k as pt,l as et,n as It,x as Nr,$ as uu,a0 as Wp,a as Gt,f as Zt,a1 as at,R as vt,T as kn,r as Nt,a2 as so,a3 as fo,t as jt,g as Wt,C as ue,J as co,a4 as lu,v as Kr,G as Vp,w as ma,E as Hp,a5 as Yp,y as nh,z as rh,A as ih,B as ah,Y as Fn,V as Xp,W as Gp,X as Zp,o as ge,m as oh,P as Jp,a6 as du,a7 as Kp,Q as hu}from"./index.ff7e3b01.js";import{c as Mt,n as gu,o as sh,_ as pi,p as Bn,q as uo,r as gr,k as vn,s as zs,t as Qp,u as fh,h as Ln,w as qs,x as tb,y as eb,j as nb,z as ch,l as Dt,A as rb,C as ib,D as uh,i as js,E as ab,F as pa,S as mu,G as ob,H as Yf,I as Xf,R as lo,J as Gf,K as lh,L as pu,N as bu,P as sb,T as Mn,U as yu,V as ii,W as fb,X as _u,Y as te,Z as Zf,$ as cb,a0 as wu,a1 as ub,a2 as ba,a3 as dh,a4 as ya,d as Jt,f as tn,e as Kt,a5 as lb,m as db,g as vu,a6 as hb,a7 as gb}from"./index.4950b6c0.js";import{w as ee}from"./paths.c46c409c.js";var mb=Mt(function(e,n){return Number(e)+Number(n)});function hh(t,e,n){return function(){for(var r=[],i=0,a=t,s=0;s<e.length||i<arguments.length;){var f;s<e.length&&(!gu(e[s])||i>=arguments.length)?f=e[s]:(f=arguments[i],i+=1),r[s]=f,gu(f)||(a-=1),s+=1}return a<=0?n.apply(this,r):sh(a,hh(t,r,n))}}var mr=Mt(function(e,n){return e===1?pi(n):sh(e,hh(e,[],n))});function pb(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var bb=Mt(function(e,n){return n>e?n:e});function ca(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}var yb=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=Bn.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),_b=Mt(function(e,n){return new yb(e,n)}),wb=Mt(uo(["fantasy-land/map","map"],_b,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return mr(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return gr(function(r,i){return r[i]=e(n[i]),r},{},vn(n));default:return ca(e,n)}}));const Sn=wb,vb=Number.isInteger||function(e){return e<<0===e};var Mb=Mt(function(e,n){var r=e<0?n.length+e:e;return zs(n)?n.charAt(r):n[r]});const gh=Mb;var Sb=Mt(function(e,n){if(n!=null)return vb(e)?gh(e,n):n[e]});const Ws=Sb;var xb=Mt(function(e,n){return Sn(Ws(e),n)});const Jf=xb;var Tb=function(){function t(e,n){this.xf=n,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=pb(this.xf["@@transducer/step"](e,!0))),e},t}(),Ab=Mt(function(e,n){return new Tb(e,n)}),kb=Mt(uo(["any"],Ab,function(e,n){for(var r=0;r<n.length;){if(e(n[r]))return!0;r+=1}return!1}));const mh=kb;var Eb=Mt(function(e,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(n):typeof e=="function"?function(r){return e(r)(n(r))}:gr(function(r,i){return Qp(r,Sn(i,n))},[],e)}),Cb=Mt(function(e,n){return e.apply(this,n)});function Mu(t,e){return qs(e)?e.map(t):vn(e).reduce(function(n,r){return n[r]=t(e[r]),n},{})}var Nb=pi(function t(e){return e=Mu(function(n){return typeof n=="function"?n:t(n)},e),mr(fh(bb,0,Jf("length",Ln(e))),function(){var n=arguments;return Mu(function(r){return Cb(r,n)},e)})});const Su=Nb;function Vs(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Db=Mt(function(e,n){var r=mr(e,n);return mr(e,function(){return gr(Eb,Sn(r,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Ib=pi(function(e){return Db(e.length,e)});function Lb(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var Ob=function(t){return{"@@transducer/init":Bn.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?Lb(r):r}}},Pb=function(e){var n=Ob(e);return{"@@transducer/init":Bn.init,"@@transducer/result":function(r){return n["@@transducer/result"](r)},"@@transducer/step":function(r,i){return tb(i)?gr(n,r,i):gr(n,r,[i])}}},Fb=Mt(function(e,n){return Sn(e,Pb(n))}),$b=Mt(uo(["fantasy-land/chain","chain"],Fb,function(e,n){return typeof n=="function"?function(r){return e(n(r))(r)}:eb(!1)(Sn(e,n))}));const ph=$b;function Go(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var $r=function(e){return(e<10?"0":"")+e},Rb=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+$r(e.getUTCMonth()+1)+"-"+$r(e.getUTCDate())+"T"+$r(e.getUTCHours())+":"+$r(e.getUTCMinutes())+":"+$r(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Bb(t){return function(){return!t.apply(this,arguments)}}var Ub=Mt(function(e,n){return nb(Bb(e),n)});const zb=Ub;function bh(t,e){var n=function(s){var f=e.concat([t]);return ch(s,f)?"<Circular>":bh(s,f)},r=function(a,s){return ca(function(f){return Go(f)+": "+n(a[f])},s.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+ca(n,t).join(", ")+"))";case"[object Array]":return"["+ca(n,t).concat(r(t,zb(function(a){return/^\d+$/.test(a)},vn(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):Go(Rb(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":Go(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var i=t.toString();if(i!=="[object Object]")return i}return"{"+r(t,vn(t)).join(", ")+"}"}}var Zo=pi(function(e){return bh(e,[])}),qb=Mt(function(e,n){if(qs(e)){if(qs(n))return e.concat(n);throw new TypeError(Zo(n)+" is not an array")}if(zs(e)){if(zs(n))return e+n;throw new TypeError(Zo(n)+" is not a string")}if(e!=null&&Vs(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&Vs(e.concat))return e.concat(n);throw new TypeError(Zo(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const _a=qb;var jb=gh(-1);const Jo=jb;var Wb=Mt(function(e,n){return e||n}),Vb=Mt(function(e,n){return Vs(e)?function(){return e.apply(this,arguments)||n.apply(this,arguments)}:Ib(Wb)(e,n)});const Hb=Vb;var Yb=pi(function(e){return mr(e.length,function(n,r){var i=Array.prototype.slice.call(arguments,0);return i[0]=r,i[1]=n,e.apply(this,i)})}),Xb=Mt(function(e,n){if(e.length===0||Dt(n))return!1;for(var r=n,i=0;i<e.length;)if(!Dt(r)&&rb(e[i],r))r=r[e[i]],i+=1;else return!1;return!0}),Gb=Mt(function(e,n){return Xb([e],n)});const wa=Gb;var Zb=ib(function(e,n,r){return mr(Math.max(e.length,n.length,r.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):r.apply(this,arguments)})});const xu=Zb;var Jb=function(){function t(e,n){this.xf=n,this.f=e,this.set=new uh}return t.prototype["@@transducer/init"]=Bn.init,t.prototype["@@transducer/result"]=Bn.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),Kb=Mt(function(e,n){return new Jb(e,n)}),Qb=Mt(uo([],Kb,function(t,e){for(var n=new uh,r=[],i=0,a,s;i<e.length;)s=e[i],a=t(s),n.add(a)&&r.push(s),i+=1;return r})),t2=Qb(js),e2=Mt(function(e,n){var r,i;return e.length>n.length?(r=e,i=n):(r=n,i=e),t2(ab(Yb(ch)(r),i))});const n2=e2;var r2=Mt(function(e,n){return gr(function(r,i){return r[i]=e(n[i],i,n),r},{},vn(n))});const i2=r2;var a2=fh(mb,0);const o2=a2;var s2=Mt(function(e,n){for(var r={},i=0;i<e.length;)e[i]in n&&(r[e[i]]=n[e[i]]),i+=1;return r});const f2=s2;var c2=Mt(function(e,n){return Array.prototype.slice.call(n,0).sort(e)});const u2=c2;var l2=Mt(function(e,n){return _a(pa(e,n),pa(n,e))});const d2=l2;function ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ho(t){let e,n,r;t.length!==2?(e=ne,n=(f,c)=>ne(t(f),c),r=(f,c)=>t(f)-c):(e=t===ne||t===bi?t:h2,n=t,r=t);function i(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const h=u+l>>>1;n(f[h],c)<0?u=h+1:l=h}while(u<l)}return u}function a(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const h=u+l>>>1;n(f[h],c)<=0?u=h+1:l=h}while(u<l)}return u}function s(f,c,u=0,l=f.length){const h=i(f,c,u,l-1);return h>u&&r(f[h-1],c)>-r(f[h],c)?h-1:h}return{left:i,center:s,right:a}}function h2(){return 0}function yh(t){return t===null?NaN:+t}function*g2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const m2=ho(ne),p2=m2.right;ho(yh).center;const Kf=p2;function b2(t){return t.length|0}function y2(t){return!(t>0)}function _2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function w2(t){return e=>t(...e)}function v2(...t){const e=typeof t[t.length-1]=="function"&&w2(t.pop());t=t.map(_2);const n=t.map(b2),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(y2))return a;for(;;){a.push(i.map((f,c)=>t[c][f]));let s=r;for(;++i[s]===n[s];){if(s===0)return e?a.map(e):a;i[s--]=0}}}function M2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function _h(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i));else{let s=-1;for(let f of t)(f=e(f,++s,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,a+=r*(f-i))}if(n>1)return a/(n-1)}function S2(t,e){const n=_h(t,e);return n&&Math.sqrt(n)}function _n(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Un{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],s=e+a,f=Math.abs(e)<Math.abs(a)?e-(s-a):a-(s-e);f&&(n[r++]=f),e=s}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,s=0;if(n>0){for(s=e[--n];n>0&&(r=s,i=e[--n],s=r+i,a=i-(s-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=s+i,i==r-s&&(s=r))}return s}}class zn extends Map{constructor(e,n=Mh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Hs(this,e))}has(e){return super.has(Hs(this,e))}set(e,n){return super.set(wh(this,e),n)}delete(e){return super.delete(vh(this,e))}}class go extends Set{constructor(e,n=Mh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Hs(this,e))}add(e){return super.add(wh(this,e))}delete(e){return super.delete(vh(this,e))}}function Hs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function wh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function vh({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Mh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ys(t){return t}function Qf(t,...e){return tc(t,Ys,Ys,e)}function Qr(t,e,...n){return tc(t,Ys,e,n)}function x2(t,e,...n){return tc(t,Array.from,e,n)}function tc(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const f=new zn,c=r[s++];let u=-1;for(const l of a){const h=c(l,++u,a),d=f.get(h);d?d.push(l):f.set(h,[l])}for(const[l,h]of f)f.set(l,i(h,s));return e(f)}(t,0)}function T2(t,e){return Array.from(e,n=>t[n])}function Xs(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const s of e){const f=va(s[i],s[a]);if(f)return f}})):(n=t.map(n),r.sort((i,a)=>va(n[i],n[a]))),T2(t,r)}return t.sort(Sh(n))}function Sh(t=ne){if(t===ne)return va;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function va(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function ec(t,e,n){return(e.length!==2?Xs(Qr(t,e,n),([r,i],[a,s])=>ne(i,s)||ne(r,a)):Xs(Qf(t,n),([r,i],[a,s])=>e(i,s)||ne(r,a))).map(([r])=>r)}const A2=Math.sqrt(50),k2=Math.sqrt(10),E2=Math.sqrt(2);function Ma(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=A2?10:a>=k2?5:a>=E2?2:1;let f,c,u;return i<0?(u=Math.pow(10,-i)/s,f=Math.round(t*u),c=Math.round(e*u),f/u<t&&++f,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,f=Math.round(t/u),c=Math.round(e/u),f*u<t&&++f,c*u>e&&--c),c<f&&.5<=n&&n<2?Ma(t,e,n*2):[f,c,u]}function Sa(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Ma(e,t,n):Ma(t,e,n);if(!(a>=i))return[];const f=a-i+1,c=new Array(f);if(r)if(s<0)for(let u=0;u<f;++u)c[u]=(a-u)/-s;else for(let u=0;u<f;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<f;++u)c[u]=(i+u)/-s;else for(let u=0;u<f;++u)c[u]=(i+u)*s;return c}function Gs(t,e,n){return e=+e,t=+t,n=+n,Ma(t,e,n)[2]}function Zs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Gs(e,t,n):Gs(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function se(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function C2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ue(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function N2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function xh(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?va:Sh(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,l=Math.log(c),h=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*h*(c-h)/c)*(u-c/2<0?-1:1),g=Math.max(n,Math.floor(e-u*h/c+d)),p=Math.min(r,Math.floor(e+(c-u)*h/c+d));xh(t,e,g,p,i)}const a=t[e];let s=n,f=r;for(Rr(t,n,e),i(t[r],a)>0&&Rr(t,n,r);s<f;){for(Rr(t,s,f),++s,--f;i(t[s],a)<0;)++s;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Rr(t,n,f):(++f,Rr(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Rr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Th(t,e=ne){let n,r=!1;if(e.length===1){let i;for(const a of t){const s=e(a);(r?ne(s,i)>0:ne(s,s)===0)&&(n=a,i=s,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function xa(t,e,n){if(t=Float64Array.from(g2(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ue(t);if(e>=1)return se(t);var r,i=(r-1)*e,a=Math.floor(i),s=se(xh(t,a).subarray(0,a+1)),f=Ue(t.subarray(a+1));return s+(f-s)*(i-a)}}function D2(t,e,n=yh){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return s+(f-s)*(i-a)}}function I2(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Js(t,e){return xa(t,.5,e)}function*L2(t){for(const e of t)yield*e}function Ah(t){return Array.from(L2(t))}function O2(t,e){const n=new zn;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&s>=s&&n.set(s,(n.get(s)||0)+1)}let r,i=0;for(const[a,s]of n)s>i&&(i=s,r=a);return r}function P2(t,e=F2){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function F2(t,e){return[t,e]}function Ks(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function qn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Ta(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function $2(t){return t}var Ko=1,Qo=2,Qs=3,Ui=4,Tu=1e-6;function R2(t){return"translate("+t+",0)"}function B2(t){return"translate(0,"+t+")"}function U2(t){return e=>+t(e)}function z2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function q2(){return!this.__axis}function j2(t,e){var n=[],r=null,i=null,a=6,s=6,f=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Ko||t===Ui?-1:1,l=t===Ui||t===Qo?"x":"y",h=t===Ko||t===Qs?R2:B2;function d(g){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):$2),b=Math.max(a,0)+f,y=e.range(),_=+y[0]+c,M=+y[y.length-1]+c,w=(e.bandwidth?z2:U2)(e.copy(),c),v=g.selection?g.selection():g,S=v.selectAll(".domain").data([null]),k=v.selectAll(".tick").data(p,e).order(),x=k.exit(),E=k.enter().append("g").attr("class","tick"),D=k.select("line"),A=k.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(E),D=D.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),A=A.merge(E.append("text").attr("fill","currentColor").attr(l,u*b).attr("dy",t===Ko?"0em":t===Qs?"0.71em":"0.32em")),g!==v&&(S=S.transition(g),k=k.transition(g),D=D.transition(g),A=A.transition(g),x=x.transition(g).attr("opacity",Tu).attr("transform",function(N){return isFinite(N=w(N))?h(N+c):this.getAttribute("transform")}),E.attr("opacity",Tu).attr("transform",function(N){var $=this.parentNode.__axis;return h(($&&isFinite($=$(N))?$:w(N))+c)})),x.remove(),S.attr("d",t===Ui||t===Qo?s?"M"+u*s+","+_+"H"+c+"V"+M+"H"+u*s:"M"+c+","+_+"V"+M:s?"M"+_+","+u*s+"V"+c+"H"+M+"V"+u*s:"M"+_+","+c+"H"+M),k.attr("opacity",1).attr("transform",function(N){return h(w(N)+c)}),D.attr(l+"2",u*a),A.attr(l,u*b).text(m),v.filter(q2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Qo?"start":t===Ui?"end":"middle"),v.each(function(){this.__axis=w})}return d.scale=function(g){return arguments.length?(e=g,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),d):n.slice()},d.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),d):r&&r.slice()},d.tickFormat=function(g){return arguments.length?(i=g,d):i},d.tickSize=function(g){return arguments.length?(a=s=+g,d):a},d.tickSizeInner=function(g){return arguments.length?(a=+g,d):a},d.tickSizeOuter=function(g){return arguments.length?(s=+g,d):s},d.tickPadding=function(g){return arguments.length?(f=+g,d):f},d.offset=function(g){return arguments.length?(c=+g,d):c},d}function W2(t){return j2(Qs,t)}function Ht(t){return typeof t=="string"?new mu([[document.querySelector(t)]],[document.documentElement]):new mu([[t]],ob)}function V2(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tf(t,e){if(t=V2(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ef={capture:!0,passive:!1};function nf(t){t.preventDefault(),t.stopImmediatePropagation()}function H2(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",nf,ef);"onselectstart"in e?n.on("selectstart.drag",nf,ef):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Y2(t,e){var n=t.document.documentElement,r=Ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",nf,ef),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const kh=Math.PI/180,Eh=180/Math.PI,Aa=18,Ch=.96422,Nh=1,Dh=.82521,Ih=4/29,ur=6/29,Lh=3*ur*ur,X2=ur*ur*ur;function Oh(t){if(t instanceof Be)return new Be(t.l,t.a,t.b,t.opacity);if(t instanceof nn)return Ph(t);t instanceof lo||(t=lh(t));var e=rs(t.r),n=rs(t.g),r=rs(t.b),i=ts((.2225045*e+.7168786*n+.0606169*r)/Nh),a,s;return e===n&&n===r?a=s=i:(a=ts((.4360747*e+.3850649*n+.1430804*r)/Ch),s=ts((.0139322*e+.0971045*n+.7141733*r)/Dh)),new Be(116*i-16,500*(a-i),200*(i-s),t.opacity)}function rf(t,e,n,r){return arguments.length===1?Oh(t):new Be(t,e,n,r??1)}function Be(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Yf(Be,rf,Xf(Gf,{brighter(t){return new Be(this.l+Aa*(t??1),this.a,this.b,this.opacity)},darker(t){return new Be(this.l-Aa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Ch*es(e),t=Nh*es(t),n=Dh*es(n),new lo(ns(3.1338561*e-1.6168667*t-.4906146*n),ns(-.9787684*e+1.9161415*t+.033454*n),ns(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function ts(t){return t>X2?Math.pow(t,1/3):t/Lh+Ih}function es(t){return t>ur?t*t*t:Lh*(t-Ih)}function ns(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rs(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function G2(t){if(t instanceof nn)return new nn(t.h,t.c,t.l,t.opacity);if(t instanceof Be||(t=Oh(t)),t.a===0&&t.b===0)return new nn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Eh;return new nn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ka(t,e,n,r){return arguments.length===1?G2(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ph(t){if(isNaN(t.h))return new Be(t.l,0,0,t.opacity);var e=t.h*kh;return new Be(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Yf(nn,ka,Xf(Gf,{brighter(t){return new nn(this.h,this.c,this.l+Aa*(t??1),this.opacity)},darker(t){return new nn(this.h,this.c,this.l-Aa*(t??1),this.opacity)},rgb(){return Ph(this).rgb()}}));var Fh=-.14861,nc=1.78277,rc=-.29227,mo=-.90649,ai=1.97294,Au=ai*mo,ku=ai*nc,Eu=nc*rc-mo*Fh;function Z2(t){if(t instanceof $n)return new $n(t.h,t.s,t.l,t.opacity);t instanceof lo||(t=lh(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Eu*r+Au*e-ku*n)/(Eu+Au-ku),a=r-i,s=(ai*(n-i)-rc*a)/mo,f=Math.sqrt(s*s+a*a)/(ai*i*(1-i)),c=f?Math.atan2(s,a)*Eh-120:NaN;return new $n(c<0?c+360:c,f,i,t.opacity)}function ze(t,e,n,r){return arguments.length===1?Z2(t):new $n(t,e,n,r??1)}function $n(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yf($n,ze,Xf(Gf,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new $n(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bu:Math.pow(bu,t),new $n(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*kh,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new lo(255*(e+n*(Fh*r+nc*i)),255*(e+n*(rc*r+mo*i)),255*(e+n*(ai*r)),this.opacity)}}));function J2(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function K2(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Q2(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Dr(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(f){for(s=0;s<r;++s)a[s]=i[s](f);return a}}function ty(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ey(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function Dr(t,e){var n=typeof e,r;return e==null||n==="boolean"?sb(e):(n==="number"?Mn:n==="string"?(r=yu(e))?(e=r,ii):fb:e instanceof yu?ii:e instanceof Date?ty:K2(e)?J2:Array.isArray(e)?Q2:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ey:Mn)(t,e)}function ic(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ny(t){return function(e,n){var r=t((e=_u(e)).h,(n=_u(n)).h),i=te(e.s,n.s),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const ry=ny(Zf);function iy(t,e){var n=te((t=rf(t)).l,(e=rf(e)).l),r=te(t.a,e.a),i=te(t.b,e.b),a=te(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=r(s),t.b=i(s),t.opacity=a(s),t+""}}function ay(t){return function(e,n){var r=t((e=ka(e)).h,(n=ka(n)).h),i=te(e.c,n.c),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const oy=ay(Zf);function $h(t){return function e(n){n=+n;function r(i,a){var s=t((i=ze(i)).h,(a=ze(a)).h),f=te(i.s,a.s),c=te(i.l,a.l),u=te(i.opacity,a.opacity);return function(l){return i.h=s(l),i.s=f(l),i.l=c(Math.pow(l,n)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}$h(Zf);var ac=$h(te);function po(t,e){e===void 0&&(e=t,t=Dr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var f=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[f](s-f)}}function Ae(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const is=t=>()=>t;function sy(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function fy(t){t.stopImmediatePropagation()}function as(t){t.preventDefault(),t.stopImmediatePropagation()}var Cu={name:"drag"},os={name:"space"},tr={name:"handle"},er={name:"center"};const{abs:Nu,max:Ut,min:zt}=Math;function Du(t){return[+t[0],+t[1]]}function Iu(t){return[Du(t[0]),Du(t[1])]}var ua={name:"x",handles:["w","e"].map(Ea),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ss={name:"y",handles:["n","s"].map(Ea),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ge={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ou={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},cy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},uy={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ea(t){return{type:t}}function ly(t){return!t.ctrlKey&&!t.button}function dy(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function hy(){return navigator.maxTouchPoints||"ontouchstart"in this}function fs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function gy(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function my(){return py(ua)}function py(t){var e=dy,n=ly,r=hy,i=!0,a=cb("start","brush","end"),s=6,f;function c(b){var y=b.property("__brush",m).selectAll(".overlay").data([Ea("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ge.overlay).merge(y).each(function(){var M=fs(this).extent;Ht(this).attr("x",M[0][0]).attr("y",M[0][1]).attr("width",M[1][0]-M[0][0]).attr("height",M[1][1]-M[0][1])}),b.selectAll(".selection").data([Ea("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ge.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=b.selectAll(".handle").data(t.handles,function(M){return M.type});_.exit().remove(),_.enter().append("rect").attr("class",function(M){return"handle handle--"+M.type}).attr("cursor",function(M){return Ge[M.type]}),b.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(b,y,_){b.tween?b.on("start.brush",function(M){l(this,arguments).beforestart().start(M)}).on("interrupt.brush end.brush",function(M){l(this,arguments).end(M)}).tween("brush",function(){var M=this,w=M.__brush,v=l(M,arguments),S=w.selection,k=t.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),x=Dr(S,k);function E(D){w.selection=D===1&&k===null?null:x(D),u.call(M),v.brush()}return S!==null&&k!==null?E:E(1)}):b.each(function(){var M=this,w=arguments,v=M.__brush,S=t.input(typeof y=="function"?y.apply(M,w):y,v.extent),k=l(M,w).beforestart();wu(M),v.selection=S===null?null:S,u.call(M),k.start(_).brush(_).end(_)})},c.clear=function(b,y){c.move(b,null,y)};function u(){var b=Ht(this),y=fs(this).selection;y?(b.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?y[1][1]-y[0][1]+s:s})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(b,y,_){var M=b.__brush.emitter;return M&&(!_||!M.clean)?M:new h(b,y,_)}function h(b,y,_){this.that=b,this.args=y,this.state=b.__brush,this.active=0,this.clean=_}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(b,y){return this.starting?(this.starting=!1,this.emit("start",b,y)):this.emit("brush",b),this},brush:function(b,y){return this.emit("brush",b,y),this},end:function(b,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",b,y)),this},emit:function(b,y,_){var M=Ht(this.that).datum();a.call(b,this.that,new sy(b,{sourceEvent:y,target:c,selection:t.output(this.state.selection),mode:_,dispatch:a}),M)}};function d(b){if(f&&!b.touches||!n.apply(this,arguments))return;var y=this,_=b.target.__data__.type,M=(i&&b.metaKey?_="overlay":_)==="selection"?Cu:i&&b.altKey?er:tr,w=t===ss?null:cy[_],v=t===ua?null:uy[_],S=fs(y),k=S.extent,x=S.selection,E=k[0][0],D,A,N=k[0][1],$,R,T=k[1][0],O,L,q=k[1][1],X,B,U=0,z=0,H,I=w&&v&&i&&b.shiftKey,tt,nt,j=Array.from(b.touches||[b],Z=>{const wt=Z.identifier;return Z=tf(Z,y),Z.point0=Z.slice(),Z.identifier=wt,Z});wu(y);var Q=l(y,arguments,!0).beforestart();if(_==="overlay"){x&&(H=!0);const Z=[j[0],j[1]||j[0]];S.selection=x=[[D=t===ss?E:zt(Z[0][0],Z[1][0]),$=t===ua?N:zt(Z[0][1],Z[1][1])],[O=t===ss?T:Ut(Z[0][0],Z[1][0]),X=t===ua?q:Ut(Z[0][1],Z[1][1])]],j.length>1&&mt(b)}else D=x[0][0],$=x[0][1],O=x[1][0],X=x[1][1];A=D,R=$,L=O,B=X;var F=Ht(y).attr("pointer-events","none"),Y=F.selectAll(".overlay").attr("cursor",Ge[_]);if(b.touches)Q.moved=P,Q.ended=rt;else{var G=Ht(b.view).on("mousemove.brush",P,!0).on("mouseup.brush",rt,!0);i&&G.on("keydown.brush",yt,!0).on("keyup.brush",St,!0),H2(b.view)}u.call(y),Q.start(b,M.name);function P(Z){for(const wt of Z.changedTouches||[Z])for(const ae of j)ae.identifier===wt.identifier&&(ae.cur=tf(wt,y));if(I&&!tt&&!nt&&j.length===1){const wt=j[0];Nu(wt.cur[0]-wt[0])>Nu(wt.cur[1]-wt[1])?nt=!0:tt=!0}for(const wt of j)wt.cur&&(wt[0]=wt.cur[0],wt[1]=wt.cur[1]);H=!0,as(Z),mt(Z)}function mt(Z){const wt=j[0],ae=wt.point0;var Le;switch(U=wt[0]-ae[0],z=wt[1]-ae[1],M){case os:case Cu:{w&&(U=Ut(E-D,zt(T-O,U)),A=D+U,L=O+U),v&&(z=Ut(N-$,zt(q-X,z)),R=$+z,B=X+z);break}case tr:{j[1]?(w&&(A=Ut(E,zt(T,j[0][0])),L=Ut(E,zt(T,j[1][0])),w=1),v&&(R=Ut(N,zt(q,j[0][1])),B=Ut(N,zt(q,j[1][1])),v=1)):(w<0?(U=Ut(E-D,zt(T-D,U)),A=D+U,L=O):w>0&&(U=Ut(E-O,zt(T-O,U)),A=D,L=O+U),v<0?(z=Ut(N-$,zt(q-$,z)),R=$+z,B=X):v>0&&(z=Ut(N-X,zt(q-X,z)),R=$,B=X+z));break}case er:{w&&(A=Ut(E,zt(T,D-U*w)),L=Ut(E,zt(T,O+U*w))),v&&(R=Ut(N,zt(q,$-z*v)),B=Ut(N,zt(q,X+z*v)));break}}L<A&&(w*=-1,Le=D,D=O,O=Le,Le=A,A=L,L=Le,_ in Lu&&Y.attr("cursor",Ge[_=Lu[_]])),B<R&&(v*=-1,Le=$,$=X,X=Le,Le=R,R=B,B=Le,_ in Ou&&Y.attr("cursor",Ge[_=Ou[_]])),S.selection&&(x=S.selection),tt&&(A=x[0][0],L=x[1][0]),nt&&(R=x[0][1],B=x[1][1]),(x[0][0]!==A||x[0][1]!==R||x[1][0]!==L||x[1][1]!==B)&&(S.selection=[[A,R],[L,B]],u.call(y),Q.brush(Z,M.name))}function rt(Z){if(fy(Z),Z.touches){if(Z.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else Y2(Z.view,H),G.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),Y.attr("cursor",Ge.overlay),S.selection&&(x=S.selection),gy(x)&&(S.selection=null,u.call(y)),Q.end(Z,M.name)}function yt(Z){switch(Z.keyCode){case 16:{I=w&&v;break}case 18:{M===tr&&(w&&(O=L-U*w,D=A+U*w),v&&(X=B-z*v,$=R+z*v),M=er,mt(Z));break}case 32:{(M===tr||M===er)&&(w<0?O=L-U:w>0&&(D=A-U),v<0?X=B-z:v>0&&($=R-z),M=os,Y.attr("cursor",Ge.selection),mt(Z));break}default:return}as(Z)}function St(Z){switch(Z.keyCode){case 16:{I&&(tt=nt=I=!1,mt(Z));break}case 18:{M===er&&(w<0?O=L:w>0&&(D=A),v<0?X=B:v>0&&($=R),M=tr,mt(Z));break}case 32:{M===os&&(Z.altKey?(w&&(O=L-U*w,D=A+U*w),v&&(X=B-z*v,$=R+z*v),M=er):(w<0?O=L:w>0&&(D=A),v<0?X=B:v>0&&($=R),M=tr),Y.attr("cursor",Ge[_]),mt(Z));break}default:return}as(Z)}}function g(b){l(this,arguments).moved(b)}function p(b){l(this,arguments).ended(b)}function m(){var b=this.__brush||{selection:null};return b.extent=Iu(e.apply(this,arguments)),b.dim=t,b}return c.extent=function(b){return arguments.length?(e=typeof b=="function"?b:is(Iu(b)),c):e},c.filter=function(b){return arguments.length?(n=typeof b=="function"?b:is(!!b),c):n},c.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:is(!!b),c):r},c.handleSize=function(b){return arguments.length?(s=+b,c):s},c.keyModifiers=function(b){return arguments.length?(i=!!b,c):i},c.on=function(){var b=a.on.apply(a,arguments);return b===a?c:b},c}const af=Math.PI,of=2*af,In=1e-6,by=of-In;function Rh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yy(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Rh;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Bh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Rh:yy(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,f=this._y1,c=r-e,u=i-n,l=s-e,h=f-n,d=l*l+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>In)if(!(Math.abs(h*c-u*l)>In)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,p=i-f,m=c*c+u*u,b=g*g+p*p,y=Math.sqrt(m),_=Math.sqrt(d),M=a*Math.tan((af-Math.acos((m+d-b)/(2*y*_)))/2),w=M/_,v=M/y;Math.abs(w-1)>In&&this._append`L${e+w*l},${n+w*h}`,this._append`A${a},${a},0,0,${+(h*g>l*p)},${this._x1=e+v*c},${this._y1=n+v*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),c=r*Math.sin(i),u=e+f,l=n+c,h=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>In||Math.abs(this._y1-l)>In)&&this._append`L${u},${l}`,r&&(d<0&&(d=d%of+of),d>by?this._append`A${r},${r},0,1,${h},${e-f},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=l}`:d>In&&this._append`A${r},${r},0,${+(d>=af)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function mn(t=3){return new Bh(+t)}function _y(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ca(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pr(t){return t=Ca(Math.abs(t)),t?t[1]:NaN}function wy(t,e){return function(n,r){for(var i=n.length,a=[],s=0,f=t[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),a.push(n.substring(i-=f,i+f)),!((c+=f+1)>r));)f=t[s=(s+1)%t.length];return a.reverse().join(e)}}function vy(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var My=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oi(t){if(!(e=My.exec(t)))throw new Error("invalid format: "+t);var e;return new oc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}oi.prototype=oc.prototype;function oc(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sy(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Uh;function xy(t,e){var n=Ca(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Uh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ca(t,Math.max(0,e+a-1))[0]}function Pu(t,e){var n=Ca(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Fu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_y,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Pu(t*100,e),r:Pu,s:xy,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $u(t){return t}var Ru=Array.prototype.map,Bu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ty(t){var e=t.grouping===void 0||t.thousands===void 0?$u:wy(Ru.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$u:vy(Ru.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=oi(h);var d=h.fill,g=h.align,p=h.sign,m=h.symbol,b=h.zero,y=h.width,_=h.comma,M=h.precision,w=h.trim,v=h.type;v==="n"?(_=!0,v="g"):Fu[v]||(M===void 0&&(M=12),w=!0,v="g"),(b||d==="0"&&g==="=")&&(b=!0,d="0",g="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",k=m==="$"?r:/[%p]/.test(v)?s:"",x=Fu[v],E=/[defgprs%]/.test(v);M=M===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function D(A){var N=S,$=k,R,T,O;if(v==="c")$=x(A)+$,A="";else{A=+A;var L=A<0||1/A<0;if(A=isNaN(A)?c:x(Math.abs(A),M),w&&(A=Sy(A)),L&&+A==0&&p!=="+"&&(L=!1),N=(L?p==="("?p:f:p==="-"||p==="("?"":p)+N,$=(v==="s"?Bu[8+Uh/3]:"")+$+(L&&p==="("?")":""),E){for(R=-1,T=A.length;++R<T;)if(O=A.charCodeAt(R),48>O||O>57){$=(O===46?i+A.slice(R+1):A.slice(R))+$,A=A.slice(0,R);break}}}_&&!b&&(A=e(A,1/0));var q=N.length+A.length+$.length,X=q<y?new Array(y-q+1).join(d):"";switch(_&&b&&(A=e(X+A,X.length?y-$.length:1/0),X=""),g){case"<":A=N+A+$+X;break;case"=":A=N+X+A+$;break;case"^":A=X.slice(0,q=X.length>>1)+N+A+$+X.slice(q);break;default:A=X+N+A+$;break}return a(A)}return D.toString=function(){return h+""},D}function l(h,d){var g=u((h=oi(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(pr(d)/3)))*3,m=Math.pow(10,-p),b=Bu[8+p/3];return function(y){return g(m*y)+b}}return{format:u,formatPrefix:l}}var zi,Ir,zh;Ay({thousands:",",grouping:[3],currency:["$",""]});function Ay(t){return zi=Ty(t),Ir=zi.format,zh=zi.formatPrefix,zi}function ky(t){return Math.max(0,-pr(Math.abs(t)))}function Ey(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pr(e)/3)))*3-pr(Math.abs(t)))}function Cy(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pr(e)-pr(t))+1}var dt=1e-6,qh=1e-12,gt=Math.PI,Ct=gt/2,Uu=gt/4,fe=gt*2,Vt=180/gt,Et=gt/180,_t=Math.abs,Lr=Math.atan,fn=Math.atan2,ht=Math.cos,jh=Math.exp,Na=Math.log,cs=Math.pow,ut=Math.sin,me=Math.sign||function(t){return t>0?1:t<0?-1:0},re=Math.sqrt,sc=Math.tan;function Wh(t){return t>1?0:t<-1?gt:Math.acos(t)}function we(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function pe(){}function Da(t,e){t&&qu.hasOwnProperty(t.type)&&qu[t.type](t,e)}var zu={Feature:function(t,e){Da(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Da(n[r].geometry,e)}},qu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){sf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)sf(n[r],e,0)},Polygon:function(t,e){ju(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ju(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Da(n[r],e)}};function sf(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function ju(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)sf(t[n],e,1);e.polygonEnd()}function On(t,e){t&&zu.hasOwnProperty(t.type)?zu[t.type](t,e):Da(t,e)}function ff(t){return[fn(t[1],t[0]),we(t[2])]}function br(t){var e=t[0],n=t[1],r=ht(n);return[r*ht(e),r*ut(e),ut(n)]}function qi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ia(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function us(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ji(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cf(t){var e=re(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function uf(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function lf(t,e){return _t(t)>gt&&(t-=Math.round(t/fe)*fe),[t,e]}lf.invert=lf;function Vh(t,e,n){return(t%=fe)?e||n?uf(Vu(t),Hu(e,n)):Vu(t):e||n?Hu(e,n):lf}function Wu(t){return function(e,n){return e+=t,_t(e)>gt&&(e-=Math.round(e/fe)*fe),[e,n]}}function Vu(t){var e=Wu(t);return e.invert=Wu(-t),e}function Hu(t,e){var n=ht(t),r=ut(t),i=ht(e),a=ut(e);function s(f,c){var u=ht(c),l=ht(f)*u,h=ut(f)*u,d=ut(c),g=d*n+l*r;return[fn(h*i-g*a,l*n-d*r),we(g*i+h*a)]}return s.invert=function(f,c){var u=ht(c),l=ht(f)*u,h=ut(f)*u,d=ut(c),g=d*i-h*a;return[fn(h*i+d*a,l*n+g*r),we(g*n-l*r)]},s}function Ny(t){t=Vh(t[0]*Et,t[1]*Et,t.length>2?t[2]*Et:0);function e(n){return n=t(n[0]*Et,n[1]*Et),n[0]*=Vt,n[1]*=Vt,n}return e.invert=function(n){return n=t.invert(n[0]*Et,n[1]*Et),n[0]*=Vt,n[1]*=Vt,n},e}function Dy(t,e,n,r,i,a){if(n){var s=ht(e),f=ut(e),c=r*n;i==null?(i=e+r*fe,a=e-c/2):(i=Yu(s,i),a=Yu(s,a),(r>0?i<a:i>a)&&(i+=r*fe));for(var u,l=i;r>0?l>a:l<a;l-=c)u=ff([s,-f*ht(l),-f*ut(l)]),t.point(u[0],u[1])}}function Yu(t,e){e=br(e),e[0]-=t,cf(e);var n=Wh(-e[1]);return((-e[2]<0?-n:n)+fe-dt)%fe}function Hh(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:pe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function la(t,e){return _t(t[0]-e[0])<dt&&_t(t[1]-e[1])<dt}function Wi(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yh(t,e,n,r,i){var a=[],s=[],f,c;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,b=p[0],y=p[m],_;if(la(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),f=0;f<m;++f)i.point((b=p[f])[0],b[1]);i.lineEnd();return}y[0]+=2*dt}a.push(_=new Wi(b,p,null,!0)),s.push(_.o=new Wi(b,null,_,!1)),a.push(_=new Wi(y,p,null,!1)),s.push(_.o=new Wi(y,null,_,!0))}}),!!a.length){for(s.sort(e),Xu(a),Xu(s),f=0,c=s.length;f<c;++f)s[f].e=n=!n;for(var u=a[0],l,h;;){for(var d=u,g=!0;d.v;)if((d=d.n)===u)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(g)for(f=0,c=l.length;f<c;++f)i.point((h=l[f])[0],h[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(g)for(l=d.p.z,f=l.length-1;f>=0;--f)i.point((h=l[f])[0],h[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,l=d.z,g=!g}while(!d.v);i.lineEnd()}}}function Xu(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function ls(t){return _t(t[0])<=gt?t[0]:me(t[0])*((_t(t[0])+gt)%fe-gt)}function Iy(t,e){var n=ls(e),r=e[1],i=ut(r),a=[ut(n),-ht(n),0],s=0,f=0,c=new Un;i===1?r=Ct+dt:i===-1&&(r=-Ct-dt);for(var u=0,l=t.length;u<l;++u)if(d=(h=t[u]).length)for(var h,d,g=h[d-1],p=ls(g),m=g[1]/2+Uu,b=ut(m),y=ht(m),_=0;_<d;++_,p=w,b=S,y=k,g=M){var M=h[_],w=ls(M),v=M[1]/2+Uu,S=ut(v),k=ht(v),x=w-p,E=x>=0?1:-1,D=E*x,A=D>gt,N=b*S;if(c.add(fn(N*E*ut(D),y*k+N*ht(D))),s+=A?x+E*fe:x,A^p>=n^w>=n){var $=Ia(br(g),br(M));cf($);var R=Ia(a,$);cf(R);var T=(A^x>=0?-1:1)*we(R[2]);(r>T||r===T&&($[0]||$[1]))&&(f+=A^x>=0?1:-1)}}return(s<-dt||s<dt&&c<-qh)^f&1}function Xh(t,e,n,r){return function(i){var a=e(i),s=Hh(),f=e(s),c=!1,u,l,h,d={point:g,lineStart:m,lineEnd:b,polygonStart:function(){d.point=y,d.lineStart=_,d.lineEnd=M,l=[],u=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=b,l=Ah(l);var w=Iy(u,r);l.length?(c||(i.polygonStart(),c=!0),Yh(l,Oy,w,n,i)):w&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(w,v){t(w,v)&&i.point(w,v)}function p(w,v){a.point(w,v)}function m(){d.point=p,a.lineStart()}function b(){d.point=g,a.lineEnd()}function y(w,v){h.push([w,v]),f.point(w,v)}function _(){f.lineStart(),h=[]}function M(){y(h[0][0],h[0][1]),f.lineEnd();var w=f.clean(),v=s.result(),S,k=v.length,x,E,D;if(h.pop(),u.push(h),h=null,!!k){if(w&1){if(E=v[0],(x=E.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),S=0;S<x;++S)i.point((D=E[S])[0],D[1]);i.lineEnd()}return}k>1&&w&2&&v.push(v.pop().concat(v.shift())),l.push(v.filter(Ly))}}return d}}function Ly(t){return t.length>1}function Oy(t,e){return((t=t.x)[0]<0?t[1]-Ct-dt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-dt:Ct-e[1])}const Gu=Xh(function(){return!0},Py,$y,[-gt,-Ct]);function Py(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,s){var f=a>0?gt:-gt,c=_t(a-e);_t(c-gt)<dt?(t.point(e,n=(n+s)/2>0?Ct:-Ct),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(a,n),i=0):r!==f&&c>=gt&&(_t(e-r)<dt&&(e-=r*dt),_t(a-f)<dt&&(a-=f*dt),n=Fy(e,n,a,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=a,n=s),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Fy(t,e,n,r){var i,a,s=ut(t-n);return _t(s)>dt?Lr((ut(e)*(a=ht(r))*ut(n)-ut(r)*(i=ht(e))*ut(t))/(i*a*s)):(e+r)/2}function $y(t,e,n,r){var i;if(t==null)i=n*Ct,r.point(-gt,i),r.point(0,i),r.point(gt,i),r.point(gt,0),r.point(gt,-i),r.point(0,-i),r.point(-gt,-i),r.point(-gt,0),r.point(-gt,i);else if(_t(t[0]-e[0])>dt){var a=t[0]<e[0]?gt:-gt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Ry(t){var e=ht(t),n=2*Et,r=e>0,i=_t(e)>dt;function a(l,h,d,g){Dy(g,t,n,d,l,h)}function s(l,h){return ht(l)*ht(h)>e}function f(l){var h,d,g,p,m;return{lineStart:function(){p=g=!1,m=1},point:function(b,y){var _=[b,y],M,w=s(b,y),v=r?w?0:u(b,y):w?u(b+(b<0?gt:-gt),y):0;if(!h&&(p=g=w)&&l.lineStart(),w!==g&&(M=c(h,_),(!M||la(h,M)||la(_,M))&&(_[2]=1)),w!==g)m=0,w?(l.lineStart(),M=c(_,h),l.point(M[0],M[1])):(M=c(h,_),l.point(M[0],M[1],2),l.lineEnd()),h=M;else if(i&&h&&r^w){var S;!(v&d)&&(S=c(_,h,!0))&&(m=0,r?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1],3)))}w&&(!h||!la(h,_))&&l.point(_[0],_[1]),h=_,g=w,d=v},lineEnd:function(){g&&l.lineEnd(),h=null},clean:function(){return m|(p&&g)<<1}}}function c(l,h,d){var g=br(l),p=br(h),m=[1,0,0],b=Ia(g,p),y=qi(b,b),_=b[0],M=y-_*_;if(!M)return!d&&l;var w=e*y/M,v=-e*_/M,S=Ia(m,b),k=ji(m,w),x=ji(b,v);us(k,x);var E=S,D=qi(k,E),A=qi(E,E),N=D*D-A*(qi(k,k)-1);if(!(N<0)){var $=re(N),R=ji(E,(-D-$)/A);if(us(R,k),R=ff(R),!d)return R;var T=l[0],O=h[0],L=l[1],q=h[1],X;O<T&&(X=T,T=O,O=X);var B=O-T,U=_t(B-gt)<dt,z=U||B<dt;if(!U&&q<L&&(X=L,L=q,q=X),z?U?L+q>0^R[1]<(_t(R[0]-T)<dt?L:q):L<=R[1]&&R[1]<=q:B>gt^(T<=R[0]&&R[0]<=O)){var H=ji(E,(-D+$)/A);return us(H,k),[R,ff(H)]}}}function u(l,h){var d=r?t:gt-t,g=0;return l<-d?g|=1:l>d&&(g|=2),h<-d?g|=4:h>d&&(g|=8),g}return Xh(s,f,a,r?[0,-t]:[-gt,t-gt])}function By(t,e,n,r,i,a){var s=t[0],f=t[1],c=e[0],u=e[1],l=0,h=1,d=c-s,g=u-f,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>l&&(l=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<h&&(h=p)}if(p=r-f,!(!g&&p>0)){if(p/=g,g<0){if(p<l)return;p<h&&(h=p)}else if(g>0){if(p>h)return;p>l&&(l=p)}if(p=a-f,!(!g&&p<0)){if(p/=g,g<0){if(p>h)return;p>l&&(l=p)}else if(g>0){if(p<l)return;p<h&&(h=p)}return l>0&&(t[0]=s+l*d,t[1]=f+l*g),h<1&&(e[0]=s+h*d,e[1]=f+h*g),!0}}}}}var Hr=1e9,Vi=-Hr;function Gh(t,e,n,r){function i(u,l){return t<=u&&u<=n&&e<=l&&l<=r}function a(u,l,h,d){var g=0,p=0;if(u==null||(g=s(u,h))!==(p=s(l,h))||c(u,l)<0^h>0)do d.point(g===0||g===3?t:n,g>1?r:e);while((g=(g+h+4)%4)!==p);else d.point(l[0],l[1])}function s(u,l){return _t(u[0]-t)<dt?l>0?0:3:_t(u[0]-n)<dt?l>0?2:1:_t(u[1]-e)<dt?l>0?1:0:l>0?3:2}function f(u,l){return c(u.x,l.x)}function c(u,l){var h=s(u,1),d=s(l,1);return h!==d?h-d:h===0?l[1]-u[1]:h===1?u[0]-l[0]:h===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,h=Hh(),d,g,p,m,b,y,_,M,w,v,S,k={point:x,lineStart:N,lineEnd:$,polygonStart:D,polygonEnd:A};function x(T,O){i(T,O)&&l.point(T,O)}function E(){for(var T=0,O=0,L=g.length;O<L;++O)for(var q=g[O],X=1,B=q.length,U=q[0],z,H,I=U[0],tt=U[1];X<B;++X)z=I,H=tt,U=q[X],I=U[0],tt=U[1],H<=r?tt>r&&(I-z)*(r-H)>(tt-H)*(t-z)&&++T:tt<=r&&(I-z)*(r-H)<(tt-H)*(t-z)&&--T;return T}function D(){l=h,d=[],g=[],S=!0}function A(){var T=E(),O=S&&T,L=(d=Ah(d)).length;(O||L)&&(u.polygonStart(),O&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),L&&Yh(d,f,T,a,u),u.polygonEnd()),l=u,d=g=p=null}function N(){k.point=R,g&&g.push(p=[]),v=!0,w=!1,_=M=NaN}function $(){d&&(R(m,b),y&&w&&h.rejoin(),d.push(h.result())),k.point=x,w&&l.lineEnd()}function R(T,O){var L=i(T,O);if(g&&p.push([T,O]),v)m=T,b=O,y=L,v=!1,L&&(l.lineStart(),l.point(T,O));else if(L&&w)l.point(T,O);else{var q=[_=Math.max(Vi,Math.min(Hr,_)),M=Math.max(Vi,Math.min(Hr,M))],X=[T=Math.max(Vi,Math.min(Hr,T)),O=Math.max(Vi,Math.min(Hr,O))];By(q,X,t,e,n,r)?(w||(l.lineStart(),l.point(q[0],q[1])),l.point(X[0],X[1]),L||l.lineEnd(),S=!1):L&&(l.lineStart(),l.point(T,O),S=!1)}_=T,M=O,w=L}return k}}const df=t=>t;var ds=new Un,hf=new Un,Zh,Jh,gf,mf,hn={point:pe,lineStart:pe,lineEnd:pe,polygonStart:function(){hn.lineStart=Uy,hn.lineEnd=qy},polygonEnd:function(){hn.lineStart=hn.lineEnd=hn.point=pe,ds.add(_t(hf)),hf=new Un},result:function(){var t=ds/2;return ds=new Un,t}};function Uy(){hn.point=zy}function zy(t,e){hn.point=Kh,Zh=gf=t,Jh=mf=e}function Kh(t,e){hf.add(mf*t-gf*e),gf=t,mf=e}function qy(){Kh(Zh,Jh)}const Zu=hn;var yr=1/0,La=yr,si=-yr,Oa=si,jy={point:Wy,lineStart:pe,lineEnd:pe,polygonStart:pe,polygonEnd:pe,result:function(){var t=[[yr,La],[si,Oa]];return si=Oa=-(La=yr=1/0),t}};function Wy(t,e){t<yr&&(yr=t),t>si&&(si=t),e<La&&(La=e),e>Oa&&(Oa=e)}const Pa=jy;var pf=0,bf=0,Yr=0,Fa=0,$a=0,fr=0,yf=0,_f=0,Xr=0,Qh,t0,Pe,Fe,xe={point:jn,lineStart:Ju,lineEnd:Ku,polygonStart:function(){xe.lineStart=Yy,xe.lineEnd=Xy},polygonEnd:function(){xe.point=jn,xe.lineStart=Ju,xe.lineEnd=Ku},result:function(){var t=Xr?[yf/Xr,_f/Xr]:fr?[Fa/fr,$a/fr]:Yr?[pf/Yr,bf/Yr]:[NaN,NaN];return pf=bf=Yr=Fa=$a=fr=yf=_f=Xr=0,t}};function jn(t,e){pf+=t,bf+=e,++Yr}function Ju(){xe.point=Vy}function Vy(t,e){xe.point=Hy,jn(Pe=t,Fe=e)}function Hy(t,e){var n=t-Pe,r=e-Fe,i=re(n*n+r*r);Fa+=i*(Pe+t)/2,$a+=i*(Fe+e)/2,fr+=i,jn(Pe=t,Fe=e)}function Ku(){xe.point=jn}function Yy(){xe.point=Gy}function Xy(){e0(Qh,t0)}function Gy(t,e){xe.point=e0,jn(Qh=Pe=t,t0=Fe=e)}function e0(t,e){var n=t-Pe,r=e-Fe,i=re(n*n+r*r);Fa+=i*(Pe+t)/2,$a+=i*(Fe+e)/2,fr+=i,i=Fe*t-Pe*e,yf+=i*(Pe+t),_f+=i*(Fe+e),Xr+=i*3,jn(Pe=t,Fe=e)}const Qu=xe;function n0(t){this._context=t}n0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,fe);break}}},result:pe};var wf=new Un,hs,r0,i0,Gr,Zr,Ra={point:pe,lineStart:function(){Ra.point=Zy},lineEnd:function(){hs&&a0(r0,i0),Ra.point=pe},polygonStart:function(){hs=!0},polygonEnd:function(){hs=null},result:function(){var t=+wf;return wf=new Un,t}};function Zy(t,e){Ra.point=a0,r0=Gr=t,i0=Zr=e}function a0(t,e){Gr-=t,Zr-=e,wf.add(re(Gr*Gr+Zr*Zr)),Gr=t,Zr=e}const tl=Ra;let el,Ba,nl,rl;class il{constructor(e){this._append=e==null?o0:Jy(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==nl||this._append!==Ba){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nl=r,Ba=this._append,rl=this._,this._=i}this._+=rl;break}}}result(){const e=this._;return this._="",e.length?e:null}}function o0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Jy(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return o0;if(e!==el){const n=10**e;el=e,Ba=function(i){let a=1;this._+=i[0];for(const s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return Ba}function yi(t,e){let n=3,r=4.5,i,a;function s(f){return f&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),On(f,i(a))),a.result()}return s.area=function(f){return On(f,i(Zu)),Zu.result()},s.measure=function(f){return On(f,i(tl)),tl.result()},s.bounds=function(f){return On(f,i(Pa)),Pa.result()},s.centroid=function(f){return On(f,i(Qu)),Qu.result()},s.projection=function(f){return arguments.length?(i=f==null?(t=null,df):(t=f).stream,s):t},s.context=function(f){return arguments.length?(a=f==null?(e=null,new il(n)):new n0(e=f),typeof r!="function"&&a.pointRadius(r),s):e},s.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(a.pointRadius(+f),+f),s):r},s.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const c=Math.floor(f);if(!(c>=0))throw new RangeError(`invalid digits: ${f}`);n=c}return e===null&&(a=new il(n)),s},s.projection(t).digits(n).context(e)}function vf(t){return{stream:bo(t)}}function bo(t){return function(e){var n=new Mf;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Mf(){}Mf.prototype={constructor:Mf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),On(n,t.stream(Pa)),e(Pa.result()),r!=null&&t.clipExtent(r),t}function cc(t,e,n){return fc(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),f=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(a-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([f,c])},n)}function s0(t,e,n){return cc(t,[[0,0],e],n)}function f0(t,e,n){return fc(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),s=(i-a*(r[1][0]+r[0][0]))/2,f=-a*r[0][1];t.scale(150*a).translate([s,f])},n)}function c0(t,e,n){return fc(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),s=-a*r[0][0],f=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,f])},n)}var al=16,Ky=ht(30*Et);function ol(t,e){return+e?t_(t,e):Qy(t)}function Qy(t){return bo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function t_(t,e){function n(r,i,a,s,f,c,u,l,h,d,g,p,m,b){var y=u-r,_=l-i,M=y*y+_*_;if(M>4*e&&m--){var w=s+d,v=f+g,S=c+p,k=re(w*w+v*v+S*S),x=we(S/=k),E=_t(_t(S)-1)<dt||_t(a-h)<dt?(a+h)/2:fn(v,w),D=t(E,x),A=D[0],N=D[1],$=A-r,R=N-i,T=_*$-y*R;(T*T/M>e||_t((y*$+_*R)/M-.5)>.3||s*d+f*g+c*p<Ky)&&(n(r,i,a,s,f,c,A,N,E,w/=k,v/=k,S,m,b),b.point(A,N),n(A,N,E,w,v,S,u,l,h,d,g,p,m,b))}}return function(r){var i,a,s,f,c,u,l,h,d,g,p,m,b={point:y,lineStart:_,lineEnd:w,polygonStart:function(){r.polygonStart(),b.lineStart=v},polygonEnd:function(){r.polygonEnd(),b.lineStart=_}};function y(x,E){x=t(x,E),r.point(x[0],x[1])}function _(){h=NaN,b.point=M,r.lineStart()}function M(x,E){var D=br([x,E]),A=t(x,E);n(h,d,l,g,p,m,h=A[0],d=A[1],l=x,g=D[0],p=D[1],m=D[2],al,r),r.point(h,d)}function w(){b.point=y,r.lineEnd()}function v(){_(),b.point=S,b.lineEnd=k}function S(x,E){M(i=x,E),a=h,s=d,f=g,c=p,u=m,b.point=M}function k(){n(h,d,l,g,p,m,a,s,i,f,c,u,al,r),b.lineEnd=w,w()}return b}}var e_=bo({point:function(t,e){this.stream.point(t*Et,e*Et)}});function n_(t){return bo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function r_(t,e,n,r,i){function a(s,f){return s*=r,f*=i,[e+t*s,n-t*f]}return a.invert=function(s,f){return[(s-e)/t*r,(n-f)/t*i]},a}function sl(t,e,n,r,i,a){if(!a)return r_(t,e,n,r,i);var s=ht(a),f=ut(a),c=s*t,u=f*t,l=s/t,h=f/t,d=(f*n-s*e)/t,g=(f*e+s*n)/t;function p(m,b){return m*=r,b*=i,[c*m-u*b+e,n-u*m-c*b]}return p.invert=function(m,b){return[r*(l*m-h*b+d),i*(g-h*m-l*b)]},p}function En(t){return u0(function(){return t})()}function u0(t){var e,n=150,r=480,i=250,a=0,s=0,f=0,c=0,u=0,l,h=0,d=1,g=1,p=null,m=Gu,b=null,y,_,M,w=df,v=.5,S,k,x,E,D;function A(T){return x(T[0]*Et,T[1]*Et)}function N(T){return T=x.invert(T[0],T[1]),T&&[T[0]*Vt,T[1]*Vt]}A.stream=function(T){return E&&D===T?E:E=e_(n_(l)(m(S(w(D=T)))))},A.preclip=function(T){return arguments.length?(m=T,p=void 0,R()):m},A.postclip=function(T){return arguments.length?(w=T,b=y=_=M=null,R()):w},A.clipAngle=function(T){return arguments.length?(m=+T?Ry(p=T*Et):(p=null,Gu),R()):p*Vt},A.clipExtent=function(T){return arguments.length?(w=T==null?(b=y=_=M=null,df):Gh(b=+T[0][0],y=+T[0][1],_=+T[1][0],M=+T[1][1]),R()):b==null?null:[[b,y],[_,M]]},A.scale=function(T){return arguments.length?(n=+T,$()):n},A.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],$()):[r,i]},A.center=function(T){return arguments.length?(a=T[0]%360*Et,s=T[1]%360*Et,$()):[a*Vt,s*Vt]},A.rotate=function(T){return arguments.length?(f=T[0]%360*Et,c=T[1]%360*Et,u=T.length>2?T[2]%360*Et:0,$()):[f*Vt,c*Vt,u*Vt]},A.angle=function(T){return arguments.length?(h=T%360*Et,$()):h*Vt},A.reflectX=function(T){return arguments.length?(d=T?-1:1,$()):d<0},A.reflectY=function(T){return arguments.length?(g=T?-1:1,$()):g<0},A.precision=function(T){return arguments.length?(S=ol(k,v=T*T),R()):re(v)},A.fitExtent=function(T,O){return cc(A,T,O)},A.fitSize=function(T,O){return s0(A,T,O)},A.fitWidth=function(T,O){return f0(A,T,O)},A.fitHeight=function(T,O){return c0(A,T,O)};function $(){var T=sl(n,0,0,d,g,h).apply(null,e(a,s)),O=sl(n,r-T[0],i-T[1],d,g,h);return l=Vh(f,c,u),k=uf(e,O),x=uf(l,k),S=ol(k,v),R()}function R(){return E=D=null,A}return function(){return e=t.apply(this,arguments),A.invert=e.invert&&N,$()}}function uc(t){var e=0,n=gt/3,r=u0(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*Et,n=a[1]*Et):[e*Vt,n*Vt]},i}function i_(t){var e=ht(t);function n(r,i){return[r*e,ut(i)/e]}return n.invert=function(r,i){return[r/e,we(i*e)]},n}function a_(t,e){var n=ut(t),r=(n+ut(e))/2;if(_t(r)<dt)return i_(t);var i=1+n*(2*r-n),a=re(i)/r;function s(f,c){var u=re(i-2*r*ut(c))/r;return[u*ut(f*=r),a-u*ht(f)]}return s.invert=function(f,c){var u=a-c,l=fn(f,_t(u))*me(u);return u*r<0&&(l-=gt*me(f)*me(u)),[l/r,we((i-(f*f+u*u)*r*r)/(2*r))]},s}function Ua(){return uc(a_).scale(155.424).center([0,33.6442])}function l0(){return Ua().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function o_(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function s_(){var t,e,n=l0(),r,i=Ua().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Ua().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,c,u={point:function(d,g){c=[d,g]}};function l(d){var g=d[0],p=d[1];return c=null,r.point(g,p),c||(a.point(g,p),c)||(f.point(g,p),c)}l.invert=function(d){var g=n.scale(),p=n.translate(),m=(d[0]-p[0])/g,b=(d[1]-p[1])/g;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?i:b>=.166&&b<.234&&m>=-.214&&m<-.115?s:n).invert(d)},l.stream=function(d){return t&&e===d?t:t=o_([n.stream(e=d),i.stream(d),s.stream(d)])},l.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),h()):n.precision()},l.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),l.translate(n.translate())):n.scale()},l.translate=function(d){if(!arguments.length)return n.translate();var g=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*g,m-.238*g],[p+.455*g,m+.238*g]]).stream(u),a=i.translate([p-.307*g,m+.201*g]).clipExtent([[p-.425*g+dt,m+.12*g+dt],[p-.214*g-dt,m+.234*g-dt]]).stream(u),f=s.translate([p-.205*g,m+.212*g]).clipExtent([[p-.214*g+dt,m+.166*g+dt],[p-.115*g-dt,m+.234*g-dt]]).stream(u),h()},l.fitExtent=function(d,g){return cc(l,d,g)},l.fitSize=function(d,g){return s0(l,d,g)},l.fitWidth=function(d,g){return f0(l,d,g)},l.fitHeight=function(d,g){return c0(l,d,g)};function h(){return t=e=null,l}return l.scale(1070)}function d0(t){return function(e,n){var r=ht(e),i=ht(n),a=t(r*i);return a===1/0?[2,0]:[a*i*ut(e),a*ut(n)]}}function _i(t){return function(e,n){var r=re(e*e+n*n),i=t(r),a=ut(i),s=ht(i);return[fn(e*a,r*s),we(r&&n*a/r)]}}var h0=d0(function(t){return re(2/(1+t))});h0.invert=_i(function(t){return 2*we(t/2)});function f_(){return En(h0).scale(124.75).clipAngle(180-.001)}var g0=d0(function(t){return(t=Wh(t))&&t/ut(t)});g0.invert=_i(function(t){return t});function c_(){return En(g0).scale(79.4188).clipAngle(180-.001)}function yo(t,e){return[t,Na(sc((Ct+e)/2))]}yo.invert=function(t,e){return[t,2*Lr(jh(e))-Ct]};function u_(){return m0(yo).scale(961/fe)}function m0(t){var e=En(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,s=null,f,c,u;e.scale=function(h){return arguments.length?(r(h),l()):r()},e.translate=function(h){return arguments.length?(i(h),l()):i()},e.center=function(h){return arguments.length?(n(h),l()):n()},e.clipExtent=function(h){return arguments.length?(h==null?s=f=c=u=null:(s=+h[0][0],f=+h[0][1],c=+h[1][0],u=+h[1][1]),l()):s==null?null:[[s,f],[c,u]]};function l(){var h=gt*r(),d=e(Ny(e.rotate()).invert([0,0]));return a(s==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:t===yo?[[Math.max(d[0]-h,s),f],[Math.min(d[0]+h,c),u]]:[[s,Math.max(d[1]-h,f)],[c,Math.min(d[1]+h,u)]])}return l()}function Hi(t){return sc((Ct+t)/2)}function l_(t,e){var n=ht(t),r=t===e?ut(t):Na(n/ht(e))/Na(Hi(e)/Hi(t)),i=n*cs(Hi(t),r)/r;if(!r)return yo;function a(s,f){i>0?f<-Ct+dt&&(f=-Ct+dt):f>Ct-dt&&(f=Ct-dt);var c=i/cs(Hi(f),r);return[c*ut(r*s),i-c*ht(r*s)]}return a.invert=function(s,f){var c=i-f,u=me(r)*re(s*s+c*c),l=fn(s,_t(c))*me(c);return c*r<0&&(l-=gt*me(s)*me(c)),[l/r,2*Lr(cs(i/u,1/r))-Ct]},a}function d_(){return uc(l_).scale(109.5).parallels([30,30])}function za(t,e){return[t,e]}za.invert=za;function h_(){return En(za).scale(152.63)}function g_(t,e){var n=ht(t),r=t===e?ut(t):(n-ht(e))/(e-t),i=n/r+t;if(_t(r)<dt)return za;function a(s,f){var c=i-f,u=r*s;return[c*ut(u),i-c*ht(u)]}return a.invert=function(s,f){var c=i-f,u=fn(s,_t(c))*me(c);return c*r<0&&(u-=gt*me(s)*me(c)),[u/r,i-me(r)*re(s*s+c*c)]},a}function m_(){return uc(g_).scale(131.154).center([0,13.9389])}var ti=1.340264,ei=-.081106,ni=893e-6,ri=.003796,qa=re(3)/2,p_=12;function p0(t,e){var n=we(qa*ut(e)),r=n*n,i=r*r*r;return[t*ht(n)/(qa*(ti+3*ei*r+i*(7*ni+9*ri*r))),n*(ti+ei*r+i*(ni+ri*r))]}p0.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,s,f,c;a<p_&&(f=n*(ti+ei*r+i*(ni+ri*r))-e,c=ti+3*ei*r+i*(7*ni+9*ri*r),n-=s=f/c,r=n*n,i=r*r*r,!(_t(s)<qh));++a);return[qa*t*(ti+3*ei*r+i*(7*ni+9*ri*r))/ht(n),we(ut(n)/qa)]};function b_(){return En(p0).scale(177.158)}function b0(t,e){var n=ht(e),r=ht(t)*n;return[n*ut(t)/r,ut(e)/r]}b0.invert=_i(Lr);function y_(){return En(b0).scale(144.049).clipAngle(60)}function y0(t,e){return[ht(e)*ut(t),ut(e)]}y0.invert=_i(we);function __(){return En(y0).scale(249.5).clipAngle(90+dt)}function _0(t,e){var n=ht(e),r=1+ht(t)*n;return[n*ut(t)/r,ut(e)/r]}_0.invert=_i(function(t){return 2*Lr(t)});function w_(){return En(_0).scale(250).clipAngle(142)}function w0(t,e){return[Na(sc((Ct+e)/2)),-t]}w0.invert=function(t,e){return[-e,2*Lr(jh(t))-Ct]};function v_(){var t=m0(w0),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _o(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Sf=Symbol("implicit");function lc(){var t=new zn,e=[],n=[],r=Sf;function i(a){let s=t.get(a);if(s===void 0){if(r!==Sf)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new zn;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lc(e,n).unknown(r)},Ye.apply(i,arguments),i}function wo(){var t=lc().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,f=!1,c=0,u=0,l=.5;delete t.unknown;function h(){var d=e().length,g=i<r,p=g?i:r,m=g?r:i;a=(m-p)/Math.max(1,d-c+u*2),f&&(a=Math.floor(a)),p+=(m-p-a*(d-c))*l,s=a*(1-c),f&&(p=Math.round(p),s=Math.round(s));var b=Ks(d).map(function(y){return p+a*y});return n(g?b.reverse():b)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,f=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(d){return arguments.length?(f=!!d,h()):f},t.padding=function(d){return arguments.length?(c=Math.min(1,u=+d),h()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),h()):c},t.paddingOuter=function(d){return arguments.length?(u=+d,h()):u},t.align=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),h()):l},t.copy=function(){return wo(e(),[r,i]).round(f).paddingInner(c).paddingOuter(u).align(l)},Ye.apply(h(),arguments)}function v0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return v0(e())},t}function M_(){return v0(wo.apply(null,arguments).paddingInner(1))}function S_(t){return function(){return t}}function xf(t){return+t}var fl=[0,1];function be(t){return t}function Tf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:S_(isNaN(e)?NaN:.5)}function x_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function T_(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Tf(i,r),a=n(s,a)):(r=Tf(r,i),a=n(a,s)),function(f){return a(r(f))}}function A_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Tf(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(f){var c=Kf(t,f,1,r)-1;return a[c](i[c](f))}}function wi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vo(){var t=fl,e=fl,n=Dr,r,i,a,s=be,f,c,u;function l(){var d=Math.min(t.length,e.length);return s!==be&&(s=x_(t[0],t[d-1])),f=d>2?A_:T_,c=u=null,h}function h(d){return d==null||isNaN(d=+d)?a:(c||(c=f(t.map(r),e,n)))(r(s(d)))}return h.invert=function(d){return s(i((u||(u=f(e,t.map(r),Mn)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,xf),l()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=ic,l()},h.clamp=function(d){return arguments.length?(s=d?!0:be,l()):s!==be},h.interpolate=function(d){return arguments.length?(n=d,l()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,g){return r=d,i=g,l()}}function M0(){return vo()(be,be)}function k_(t,e,n,r){var i=Zs(t,e,n),a;switch(r=oi(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ey(i,s))&&(r.precision=a),zh(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Cy(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ky(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ir(r)}function vi(t){var e=t.domain;return t.ticks=function(n){var r=e();return Sa(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return k_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],f=r[a],c,u,l=10;for(f<s&&(u=s,s=f,f=u,u=i,i=a,a=u);l-- >0;){if(u=Gs(s,f,n),u===c)return r[i]=s,r[a]=f,e(r);if(u>0)s=Math.floor(s/u)*u,f=Math.ceil(f/u)*u;else if(u<0)s=Math.ceil(s*u)/u,f=Math.floor(f*u)/u;else break;c=u}return t},t}function dc(){var t=M0();return t.copy=function(){return wi(t,dc())},Ye.apply(t,arguments),vi(t)}function S0(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,xf),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return S0(t).unknown(e)},t=arguments.length?Array.from(t,xf):[0,1],vi(n)}function x0(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function cl(t){return Math.log(t)}function ul(t){return Math.exp(t)}function E_(t){return-Math.log(-t)}function C_(t){return-Math.exp(-t)}function N_(t){return isFinite(t)?+("1e"+t):t<0?0:t}function D_(t){return t===10?N_:t===Math.E?Math.exp:e=>Math.pow(t,e)}function I_(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ll(t){return(e,n)=>-t(-e,n)}function T0(t){const e=t(cl,ul),n=e.domain;let r=10,i,a;function s(){return i=I_(r),a=D_(r),n()[0]<0?(i=ll(i),a=ll(a),t(E_,C_)):t(cl,ul),e}return e.base=function(f){return arguments.length?(r=+f,s()):r},e.domain=function(f){return arguments.length?(n(f),s()):n()},e.ticks=f=>{const c=n();let u=c[0],l=c[c.length-1];const h=l<u;h&&([u,l]=[l,u]);let d=i(u),g=i(l),p,m;const b=f==null?10:+f;let y=[];if(!(r%1)&&g-d<b){if(d=Math.floor(d),g=Math.ceil(g),u>0){for(;d<=g;++d)for(p=1;p<r;++p)if(m=d<0?p/a(-d):p*a(d),!(m<u)){if(m>l)break;y.push(m)}}else for(;d<=g;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/a(-d):p*a(d),!(m<u)){if(m>l)break;y.push(m)}y.length*2<b&&(y=Sa(u,l,b))}else y=Sa(d,g,Math.min(g-d,b)).map(a);return h?y.reverse():y},e.tickFormat=(f,c)=>{if(f==null&&(f=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=oi(c)).precision==null&&(c.trim=!0),c=Ir(c)),f===1/0)return c;const u=Math.max(1,r*f/e.ticks().length);return l=>{let h=l/a(Math.round(i(l)));return h*r<r-.5&&(h*=r),h<=u?c(l):""}},e.nice=()=>n(x0(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function A0(){const t=T0(vo()).domain([1,10]);return t.copy=()=>wi(t,A0()).base(t.base()),Ye.apply(t,arguments),t}function dl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function hl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function k0(t){var e=1,n=t(dl(e),hl(e));return n.constant=function(r){return arguments.length?t(dl(e=+r),hl(e)):e},vi(n)}function E0(){var t=k0(vo());return t.copy=function(){return wi(t,E0()).constant(t.constant())},Ye.apply(t,arguments)}function gl(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function L_(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function O_(t){return t<0?-t*t:t*t}function C0(t){var e=t(be,be),n=1;function r(){return n===1?t(be,be):n===.5?t(L_,O_):t(gl(n),gl(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},vi(e)}function N0(){var t=C0(vo());return t.copy=function(){return wi(t,N0()).exponent(t.exponent())},Ye.apply(t,arguments),t}function D0(){var t=[],e=[],n=[],r;function i(){var s=0,f=Math.max(1,e.length);for(n=new Array(f-1);++s<f;)n[s-1]=D2(t,s/f);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Kf(n,s)]}return a.invertExtent=function(s){var f=e.indexOf(s);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let f of s)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(ne),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return D0().domain(t).range(e).unknown(r)},Ye.apply(a,arguments)}function I0(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Kf(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return I0().domain(t).range(e).unknown(n)},Ye.apply(i,arguments)}const gs=new Date,ms=new Date;function Ot(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),f=i.ceil(a);return a-s<f-a?s:f},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,f)=>{const c=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<s)||!(f>0))return c;let u;do c.push(u=new Date(+a)),e(a,f),t(a);while(u<a&&a<s);return c},i.filter=a=>Ot(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,f)=>{if(s>=s)if(f<0)for(;++f<=0;)for(;e(s,-1),!a(s););else for(;--f>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(gs.setTime(+a),ms.setTime(+s),t(gs),t(ms),Math.floor(n(gs,ms))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ja=Ot(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ja.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ot(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ja);ja.range;const rn=1e3,ye=rn*60,an=ye*60,cn=an*24,hc=cn*7,ml=cn*30,ps=cn*365,Te=Ot(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rn)},(t,e)=>(e-t)/rn,t=>t.getUTCSeconds());Te.range;const Mi=Ot(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getMinutes());Mi.range;const Si=Ot(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getUTCMinutes());Si.range;const xi=Ot(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn-t.getMinutes()*ye)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getHours());xi.range;const Ti=Ot(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getUTCHours());Ti.range;const Yn=Ot(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ye)/cn,t=>t.getDate()-1);Yn.range;const Mo=Ot(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>t.getUTCDate()-1);Mo.range;const So=Ot(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>Math.floor(t/cn));So.range;function Xn(t){return Ot(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ye)/hc)}const _r=Xn(0),fi=Xn(1),L0=Xn(2),O0=Xn(3),Wn=Xn(4),P0=Xn(5),F0=Xn(6);_r.range;fi.range;L0.range;O0.range;Wn.range;P0.range;F0.range;function Gn(t){return Ot(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/hc)}const wr=Gn(0),ci=Gn(1),$0=Gn(2),R0=Gn(3),Vn=Gn(4),B0=Gn(5),U0=Gn(6);wr.range;ci.range;$0.range;R0.range;Vn.range;B0.range;U0.range;const Ai=Ot(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ai.range;const ki=Ot(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ki.range;const ke=Ot(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ot(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ke.range;const Ee=Ot(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ee.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ot(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ee.range;function z0(t,e,n,r,i,a){const s=[[Te,1,rn],[Te,5,5*rn],[Te,15,15*rn],[Te,30,30*rn],[a,1,ye],[a,5,5*ye],[a,15,15*ye],[a,30,30*ye],[i,1,an],[i,3,3*an],[i,6,6*an],[i,12,12*an],[r,1,cn],[r,2,2*cn],[n,1,hc],[e,1,ml],[e,3,3*ml],[t,1,ps]];function f(u,l,h){const d=l<u;d&&([u,l]=[l,u]);const g=h&&typeof h.range=="function"?h:c(u,l,h),p=g?g.range(u,+l+1):[];return d?p.reverse():p}function c(u,l,h){const d=Math.abs(l-u)/h,g=ho(([,,b])=>b).right(s,d);if(g===s.length)return t.every(Zs(u/ps,l/ps,h));if(g===0)return ja.every(Math.max(Zs(u,l,h),1));const[p,m]=s[d/s[g-1][2]<s[g][2]/d?g-1:g];return p.every(m)}return[f,c]}const[P_,F_]=z0(Ee,ki,wr,So,Ti,Si),[$_,R_]=z0(ke,Ai,_r,Yn,xi,Mi);function bs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ys(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Br(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function B_(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,f=t.months,c=t.shortMonths,u=Ur(i),l=zr(i),h=Ur(a),d=zr(a),g=Ur(s),p=zr(s),m=Ur(f),b=zr(f),y=Ur(c),_=zr(c),M={a:L,A:q,b:X,B,c:null,d:vl,e:vl,f:f6,g:y6,G:w6,H:a6,I:o6,j:s6,L:q0,m:c6,M:u6,p:U,q:z,Q:xl,s:Tl,S:l6,u:d6,U:h6,V:g6,w:m6,W:p6,x:null,X:null,y:b6,Y:_6,Z:v6,"%":Sl},w={a:H,A:I,b:tt,B:nt,c:null,d:Ml,e:Ml,f:T6,g:P6,G:$6,H:M6,I:S6,j:x6,L:W0,m:A6,M:k6,p:j,q:Q,Q:xl,s:Tl,S:E6,u:C6,U:N6,V:D6,w:I6,W:L6,x:null,X:null,y:O6,Y:F6,Z:R6,"%":Sl},v={a:D,A,b:N,B:$,c:R,d:_l,e:_l,f:e6,g:yl,G:bl,H:wl,I:wl,j:J_,L:t6,m:Z_,M:K_,p:E,q:G_,Q:r6,s:i6,S:Q_,u:W_,U:V_,V:H_,w:j_,W:Y_,x:T,X:O,y:yl,Y:bl,Z:X_,"%":n6};M.x=S(n,M),M.X=S(r,M),M.c=S(e,M),w.x=S(n,w),w.X=S(r,w),w.c=S(e,w);function S(F,Y){return function(G){var P=[],mt=-1,rt=0,yt=F.length,St,Z,wt;for(G instanceof Date||(G=new Date(+G));++mt<yt;)F.charCodeAt(mt)===37&&(P.push(F.slice(rt,mt)),(Z=pl[St=F.charAt(++mt)])!=null?St=F.charAt(++mt):Z=St==="e"?" ":"0",(wt=Y[St])&&(St=wt(G,Z)),P.push(St),rt=mt+1);return P.push(F.slice(rt,mt)),P.join("")}}function k(F,Y){return function(G){var P=Br(1900,void 0,1),mt=x(P,F,G+="",0),rt,yt;if(mt!=G.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(Y&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(rt=ys(Br(P.y,0,1)),yt=rt.getUTCDay(),rt=yt>4||yt===0?ci.ceil(rt):ci(rt),rt=Mo.offset(rt,(P.V-1)*7),P.y=rt.getUTCFullYear(),P.m=rt.getUTCMonth(),P.d=rt.getUTCDate()+(P.w+6)%7):(rt=bs(Br(P.y,0,1)),yt=rt.getDay(),rt=yt>4||yt===0?fi.ceil(rt):fi(rt),rt=Yn.offset(rt,(P.V-1)*7),P.y=rt.getFullYear(),P.m=rt.getMonth(),P.d=rt.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),yt="Z"in P?ys(Br(P.y,0,1)).getUTCDay():bs(Br(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(yt+5)%7:P.w+P.U*7-(yt+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,ys(P)):bs(P)}}function x(F,Y,G,P){for(var mt=0,rt=Y.length,yt=G.length,St,Z;mt<rt;){if(P>=yt)return-1;if(St=Y.charCodeAt(mt++),St===37){if(St=Y.charAt(mt++),Z=v[St in pl?Y.charAt(mt++):St],!Z||(P=Z(F,G,P))<0)return-1}else if(St!=G.charCodeAt(P++))return-1}return P}function E(F,Y,G){var P=u.exec(Y.slice(G));return P?(F.p=l.get(P[0].toLowerCase()),G+P[0].length):-1}function D(F,Y,G){var P=g.exec(Y.slice(G));return P?(F.w=p.get(P[0].toLowerCase()),G+P[0].length):-1}function A(F,Y,G){var P=h.exec(Y.slice(G));return P?(F.w=d.get(P[0].toLowerCase()),G+P[0].length):-1}function N(F,Y,G){var P=y.exec(Y.slice(G));return P?(F.m=_.get(P[0].toLowerCase()),G+P[0].length):-1}function $(F,Y,G){var P=m.exec(Y.slice(G));return P?(F.m=b.get(P[0].toLowerCase()),G+P[0].length):-1}function R(F,Y,G){return x(F,e,Y,G)}function T(F,Y,G){return x(F,n,Y,G)}function O(F,Y,G){return x(F,r,Y,G)}function L(F){return s[F.getDay()]}function q(F){return a[F.getDay()]}function X(F){return c[F.getMonth()]}function B(F){return f[F.getMonth()]}function U(F){return i[+(F.getHours()>=12)]}function z(F){return 1+~~(F.getMonth()/3)}function H(F){return s[F.getUTCDay()]}function I(F){return a[F.getUTCDay()]}function tt(F){return c[F.getUTCMonth()]}function nt(F){return f[F.getUTCMonth()]}function j(F){return i[+(F.getUTCHours()>=12)]}function Q(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var Y=S(F+="",M);return Y.toString=function(){return F},Y},parse:function(F){var Y=k(F+="",!1);return Y.toString=function(){return F},Y},utcFormat:function(F){var Y=S(F+="",w);return Y.toString=function(){return F},Y},utcParse:function(F){var Y=k(F+="",!0);return Y.toString=function(){return F},Y}}}var pl={"-":"",_:" ",0:"0"},Rt=/^\s*\d+/,U_=/^%/,z_=/[\\^$*+?|[\]().{}]/g;function bt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function q_(t){return t.replace(z_,"\\$&")}function Ur(t){return new RegExp("^(?:"+t.map(q_).join("|")+")","i")}function zr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function j_(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function W_(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function V_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function H_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Y_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bl(t,e,n){var r=Rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function X_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function G_(t,e,n){var r=Rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Z_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _l(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function J_(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wl(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function K_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Q_(t,e,n){var r=Rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function t6(t,e,n){var r=Rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function e6(t,e,n){var r=Rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function n6(t,e,n){var r=U_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function r6(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function i6(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function vl(t,e){return bt(t.getDate(),e,2)}function a6(t,e){return bt(t.getHours(),e,2)}function o6(t,e){return bt(t.getHours()%12||12,e,2)}function s6(t,e){return bt(1+Yn.count(ke(t),t),e,3)}function q0(t,e){return bt(t.getMilliseconds(),e,3)}function f6(t,e){return q0(t,e)+"000"}function c6(t,e){return bt(t.getMonth()+1,e,2)}function u6(t,e){return bt(t.getMinutes(),e,2)}function l6(t,e){return bt(t.getSeconds(),e,2)}function d6(t){var e=t.getDay();return e===0?7:e}function h6(t,e){return bt(_r.count(ke(t)-1,t),e,2)}function j0(t){var e=t.getDay();return e>=4||e===0?Wn(t):Wn.ceil(t)}function g6(t,e){return t=j0(t),bt(Wn.count(ke(t),t)+(ke(t).getDay()===4),e,2)}function m6(t){return t.getDay()}function p6(t,e){return bt(fi.count(ke(t)-1,t),e,2)}function b6(t,e){return bt(t.getFullYear()%100,e,2)}function y6(t,e){return t=j0(t),bt(t.getFullYear()%100,e,2)}function _6(t,e){return bt(t.getFullYear()%1e4,e,4)}function w6(t,e){var n=t.getDay();return t=n>=4||n===0?Wn(t):Wn.ceil(t),bt(t.getFullYear()%1e4,e,4)}function v6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+bt(e/60|0,"0",2)+bt(e%60,"0",2)}function Ml(t,e){return bt(t.getUTCDate(),e,2)}function M6(t,e){return bt(t.getUTCHours(),e,2)}function S6(t,e){return bt(t.getUTCHours()%12||12,e,2)}function x6(t,e){return bt(1+Mo.count(Ee(t),t),e,3)}function W0(t,e){return bt(t.getUTCMilliseconds(),e,3)}function T6(t,e){return W0(t,e)+"000"}function A6(t,e){return bt(t.getUTCMonth()+1,e,2)}function k6(t,e){return bt(t.getUTCMinutes(),e,2)}function E6(t,e){return bt(t.getUTCSeconds(),e,2)}function C6(t){var e=t.getUTCDay();return e===0?7:e}function N6(t,e){return bt(wr.count(Ee(t)-1,t),e,2)}function V0(t){var e=t.getUTCDay();return e>=4||e===0?Vn(t):Vn.ceil(t)}function D6(t,e){return t=V0(t),bt(Vn.count(Ee(t),t)+(Ee(t).getUTCDay()===4),e,2)}function I6(t){return t.getUTCDay()}function L6(t,e){return bt(ci.count(Ee(t)-1,t),e,2)}function O6(t,e){return bt(t.getUTCFullYear()%100,e,2)}function P6(t,e){return t=V0(t),bt(t.getUTCFullYear()%100,e,2)}function F6(t,e){return bt(t.getUTCFullYear()%1e4,e,4)}function $6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vn(t):Vn.ceil(t),bt(t.getUTCFullYear()%1e4,e,4)}function R6(){return"+0000"}function Sl(){return"%"}function xl(t){return+t}function Tl(t){return Math.floor(+t/1e3)}var nr,gc,Ei;B6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function B6(t){return nr=B_(t),gc=nr.format,nr.parse,Ei=nr.utcFormat,nr.utcParse,nr}function U6(t){return new Date(t)}function z6(t){return t instanceof Date?+t:+new Date(+t)}function mc(t,e,n,r,i,a,s,f,c,u){var l=M0(),h=l.invert,d=l.domain,g=u(".%L"),p=u(":%S"),m=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),M=u("%B"),w=u("%Y");function v(S){return(c(S)<S?g:f(S)<S?p:s(S)<S?m:a(S)<S?b:r(S)<S?i(S)<S?y:_:n(S)<S?M:w)(S)}return l.invert=function(S){return new Date(h(S))},l.domain=function(S){return arguments.length?d(Array.from(S,z6)):d().map(U6)},l.ticks=function(S){var k=d();return t(k[0],k[k.length-1],S??10)},l.tickFormat=function(S,k){return k==null?v:u(k)},l.nice=function(S){var k=d();return(!S||typeof S.range!="function")&&(S=e(k[0],k[k.length-1],S??10)),S?d(x0(k,S)):l},l.copy=function(){return wi(l,mc(t,e,n,r,i,a,s,f,c,u))},l}function q6(){return Ye.apply(mc($_,R_,ke,Ai,_r,Yn,xi,Mi,Te,gc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function j6(){return Ye.apply(mc(P_,F_,Ee,ki,wr,Mo,Ti,Si,Te,Ei).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function To(){var t=0,e=.5,n=1,r=1,i,a,s,f,c,u=be,l,h=!1,d;function g(m){return isNaN(m=+m)?d:(m=.5+((m=+l(m))-a)*(r*m<r*a?f:c),u(h?Math.max(0,Math.min(1,m)):m))}g.domain=function(m){return arguments.length?([t,e,n]=m,i=l(t=+t),a=l(e=+e),s=l(n=+n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g):[t,e,n]},g.clamp=function(m){return arguments.length?(h=!!m,g):h},g.interpolator=function(m){return arguments.length?(u=m,g):u};function p(m){return function(b){var y,_,M;return arguments.length?([y,_,M]=b,u=po(m,[y,_,M]),g):[u(0),u(.5),u(1)]}}return g.range=p(Dr),g.rangeRound=p(ic),g.unknown=function(m){return arguments.length?(d=m,g):d},function(m){return l=m,i=m(t),a=m(e),s=m(n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g}}function H0(){var t=vi(To()(be));return t.copy=function(){return xo(t,H0())},_o.apply(t,arguments)}function Y0(){var t=T0(To()).domain([.1,1,10]);return t.copy=function(){return xo(t,Y0()).base(t.base())},_o.apply(t,arguments)}function X0(){var t=k0(To());return t.copy=function(){return xo(t,X0()).constant(t.constant())},_o.apply(t,arguments)}function G0(){var t=C0(To());return t.copy=function(){return xo(t,G0()).exponent(t.exponent())},_o.apply(t,arguments)}function lt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const W6=lt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),V6=lt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),H6=lt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Y6=lt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),X6=lt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),G6=lt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Z6=lt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),J6=lt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),K6=lt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Q6=lt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),t3=lt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),At=t=>ub(t[t.length-1]);var Z0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(lt);const J0=At(Z0);var K0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(lt);const Q0=At(K0);var t1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(lt);const e1=At(t1);var n1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(lt);const r1=At(n1);var Af=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(lt);const Wa=At(Af);var i1=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(lt);const a1=At(i1);var kf=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(lt);const Va=At(kf);var o1=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(lt);const s1=At(o1);var f1=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(lt);const c1=At(f1);var u1=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(lt);const l1=At(u1);var d1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(lt);const h1=At(d1);var g1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(lt);const m1=At(g1);var p1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(lt);const b1=At(p1);var y1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(lt);const _1=At(y1);var w1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(lt);const v1=At(w1);var M1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(lt);const S1=At(M1);var x1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(lt);const T1=At(x1);var A1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(lt);const k1=At(A1);var E1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(lt);const C1=At(E1);var N1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(lt);const D1=At(N1);var I1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(lt);const L1=At(I1);var O1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(lt);const P1=At(O1);var F1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(lt);const $1=At(F1);var R1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(lt);const B1=At(R1);var U1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(lt);const z1=At(U1);var q1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(lt);const j1=At(q1);var W1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(lt);const V1=At(W1);function H1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Y1=ac(ze(300,.5,0),ze(-240,.5,1));var X1=ac(ze(-100,.75,.35),ze(80,1.5,.8)),G1=ac(ze(260,.75,.35),ze(80,1.5,.8)),Yi=ze();function Z1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Yi.h=360*t-100,Yi.s=1.5-1.5*e,Yi.l=.8-.9*e,Yi+""}var Xi=ba(),e3=Math.PI/3,n3=Math.PI*2/3;function J1(t){var e;return t=(.5-t)*Math.PI,Xi.r=255*(e=Math.sin(t))*e,Xi.g=255*(e=Math.sin(t+e3))*e,Xi.b=255*(e=Math.sin(t+n3))*e,Xi+""}function K1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Ao(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Q1=Ao(lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var tg=Ao(lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),eg=Ao(lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ng=Ao(lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function rr(t){return function(){return t}}const rg=Math.cos,pc=Math.min,Ha=Math.sin,Pt=Math.sqrt,Al=1e-12,Ya=Math.PI,ko=2*Ya;function r3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Bh(e)}function i3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ig(t){this._context=t}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Eo(t){return new ig(t)}function a3(t){return t[0]}function o3(t){return t[1]}function s3(t,e){var n=rr(!0),r=null,i=Eo,a=null,s=r3(f);t=typeof t=="function"?t:t===void 0?a3:rr(t),e=typeof e=="function"?e:e===void 0?o3:rr(e);function f(c){var u,l=(c=i3(c)).length,h,d=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=l;++u)!(u<l&&n(h=c[u],u,c))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(h,u,c),+e(h,u,c));if(g)return a=null,g+""||null}return f.x=function(c){return arguments.length?(t=typeof c=="function"?c:rr(+c),f):t},f.y=function(c){return arguments.length?(e=typeof c=="function"?c:rr(+c),f):e},f.defined=function(c){return arguments.length?(n=typeof c=="function"?c:rr(!!c),f):n},f.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),f):i},f.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),f):r},f}class ag{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function f3(t){return new ag(t,!0)}function c3(t){return new ag(t,!1)}const u3=Pt(3),og={draw(t,e){const n=Pt(e+pc(e/28,.75))*.59436,r=n/2,i=r*u3;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ui={draw(t,e){const n=Pt(e/Ya);t.moveTo(n,0),t.arc(0,0,n,0,ko)}},sg={draw(t,e){const n=Pt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},fg=Pt(1/3),l3=fg*2,cg={draw(t,e){const n=Pt(e/l3),r=n*fg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ug={draw(t,e){const n=Pt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},lg={draw(t,e){const n=Pt(e-pc(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},dg={draw(t,e){const n=Pt(e),r=-n/2;t.rect(r,r,n,n)}},hg={draw(t,e){const n=Pt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},d3=.8908130915292852,gg=Ha(Ya/10)/Ha(7*Ya/10),h3=Ha(ko/10)*gg,g3=-rg(ko/10)*gg,mg={draw(t,e){const n=Pt(e*d3),r=h3*n,i=g3*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ko*a/5,f=rg(s),c=Ha(s);t.lineTo(c*n,-f*n),t.lineTo(f*r-c*i,c*r+f*i)}t.closePath()}},_s=Pt(3),pg={draw(t,e){const n=-Pt(e/(_s*3));t.moveTo(0,n*2),t.lineTo(-_s*n,-n),t.lineTo(_s*n,-n),t.closePath()}},m3=Pt(3),bg={draw(t,e){const n=Pt(e)*.6824,r=n/2,i=n*m3/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},le=-.5,de=Pt(3)/2,Ef=1/Pt(12),p3=(Ef/2+1)*3,yg={draw(t,e){const n=Pt(e/p3),r=n/2,i=n*Ef,a=r,s=n*Ef+n,f=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(f,c),t.lineTo(le*r-de*i,de*r+le*i),t.lineTo(le*a-de*s,de*a+le*s),t.lineTo(le*f-de*c,de*f+le*c),t.lineTo(le*r+de*i,le*i-de*r),t.lineTo(le*a+de*s,le*s-de*a),t.lineTo(le*f+de*c,le*c-de*f),t.closePath()}},_g={draw(t,e){const n=Pt(e-pc(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},b3=[ui,sg,cg,dg,mg,pg,yg],y3=[ui,lg,_g,bg,og,hg,ug];function xn(){}function Xa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Co(t){this._context=t}Co.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _3(t){return new Co(t)}function wg(t){this._context=t}wg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function w3(t){return new wg(t)}function vg(t){this._context=t}vg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function v3(t){return new vg(t)}function Mg(t,e){this._basis=new Co(t),this._beta=e}Mg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,s=e[n]-i,f=-1,c;++f<=n;)c=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+c*a),this._beta*e[f]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const M3=function t(e){function n(r){return e===1?new Co(r):new Mg(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Ga(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function bc(t,e){this._context=t,this._k=(1-e)/6}bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ga(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const S3=function t(e){function n(r){return new bc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function yc(t,e){this._context=t,this._k=(1-e)/6}yc.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const x3=function t(e){function n(r){return new yc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function _c(t,e){this._context=t,this._k=(1-e)/6}_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const T3=function t(e){function n(r){return new _c(r,e)}return n.tension=function(r){return t(+r)},n}(0);function wc(t,e,n){var r=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>Al){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Al){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/l,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,s,t._x2,t._y2)}function Sg(t,e){this._context=t,this._alpha=e}Sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:wc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const A3=function t(e){function n(r){return e?new Sg(r,e):new bc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function xg(t,e){this._context=t,this._alpha=e}xg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const k3=function t(e){function n(r){return e?new xg(r,e):new yc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Tg(t,e){this._context=t,this._alpha=e}Tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wc(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const E3=function t(e){function n(r){return e?new Tg(r,e):new _c(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ag(t){this._context=t}Ag.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function C3(t){return new Ag(t)}function kl(t){return t<0?-1:1}function El(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),f=(a*i+s*r)/(r+i);return(kl(a)+kl(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(f))||0}function Cl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ws(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,s-f*n,a,s)}function Za(t){this._context=t}Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ws(this,this._t0,Cl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ws(this,Cl(this,n=El(this,t,e)),n);break;default:ws(this,this._t0,n=El(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function kg(t){this._context=new Eg(t)}(kg.prototype=Object.create(Za.prototype)).point=function(t,e){Za.prototype.point.call(this,e,t)};function Eg(t){this._context=t}Eg.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function N3(t){return new Za(t)}function D3(t){return new kg(t)}function Cg(t){this._context=t}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Nl(t),i=Nl(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Nl(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function I3(t){return new Cg(t)}function No(t,e){this._context=t,this._t=e}No.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function L3(t){return new No(t,.5)}function O3(t){return new No(t,0)}function P3(t){return new No(t,1)}function Tn(t){return t!=null&&!Number.isNaN(t)}function qe(t,e){return+Tn(e)-+Tn(t)||ne(t,e)}function Ja(t,e){return+Tn(e)-+Tn(t)||bi(t,e)}function vc(t){return t!=null&&`${t}`!=""}function Ng(t){return isFinite(t)?t:NaN}function Do(t){return t>0&&isFinite(t)?t:NaN}function Mc(t){return t<0&&isFinite(t)?t:NaN}function F3(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return`${$3(t.getUTCFullYear())}-${en(t.getUTCMonth()+1,2)}-${en(t.getUTCDate(),2)}${n||r||i||a?`T${en(n,2)}:${en(r,2)}${i||a?`:${en(i,2)}${a?`.${en(a,3)}`:""}`:""}Z`:""}`}function $3(t){return t<0?`-${en(-t,6)}`:t>9999?`+${en(t,6)}`:en(t,4)}function en(t,e){return`${t}`.padStart(e,"0")}const R3=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Dg(t,e){return R3.test(t+="")?new Date(t):typeof e=="function"?e(t):e}function vr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return bi(e,n)}const cr=1e3,pn=cr*60,bn=pn*60,je=bn*24,Oe=je*7,Rn=je*30,ln=je*365,vs=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",cr],["5 seconds",5*cr],["15 seconds",15*cr],["30 seconds",30*cr],["minute",pn],["5 minutes",5*pn],["15 minutes",15*pn],["30 minutes",30*pn],["hour",bn],["3 hours",3*bn],["6 hours",6*bn],["12 hours",12*bn],["day",je],["2 days",2*je],["week",Oe],["2 weeks",2*Oe],["month",Rn],["3 months",3*Rn],["6 months",6*Rn],["year",ln],["2 years",2*ln],["5 years",5*ln],["10 years",10*ln],["20 years",20*ln],["50 years",50*ln],["100 years",100*ln]],Sc=new Map([["second",cr],["minute",pn],["hour",bn],["day",je],["monday",Oe],["tuesday",Oe],["wednesday",Oe],["thursday",Oe],["friday",Oe],["saturday",Oe],["sunday",Oe],["week",Oe],["month",Rn],["year",ln]]),Ig=new Map([["second",Te],["minute",Mi],["hour",xi],["day",Yn],["monday",fi],["tuesday",L0],["wednesday",O0],["thursday",Wn],["friday",P0],["saturday",F0],["sunday",_r],["week",_r],["month",Ai],["year",ke]]),xc=new Map([["second",Te],["minute",Si],["hour",Ti],["day",So],["monday",ci],["tuesday",$0],["wednesday",R0],["thursday",Vn],["friday",B0],["saturday",U0],["sunday",wr],["week",wr],["month",ki],["year",Ee]]),Ci=Symbol("intervalDuration"),Io=Symbol("intervalType");for(const[t,e]of Ig)e[Ci]=Sc.get(t),e[Io]="time";for(const[t,e]of xc)e[Ci]=Sc.get(t),e[Io]="utc";const Jr=[["year",Ee,"utc"],["month",ki,"utc"],["day",So,"utc",6*Rn],["hour",Ti,"utc",3*je],["minute",Si,"utc",6*bn],["second",Te,"utc",30*pn]],da=[["year",ke,"time"],["month",Ai,"time"],["day",Yn,"time",6*Rn],["hour",xi,"time",3*je],["minute",Mi,"time",6*bn],["second",Te,"time",30*pn]],B3=[Jr[0],da[0],Jr[1],da[1],Jr[2],da[2],...Jr.slice(3)];function Lg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let i=xc.get(e);if(!i)throw new Error(`unknown interval: ${t}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function Og(t){return Fg(Lg(t),"time")}function Pg(t){return Fg(Lg(t),"utc")}function Fg([t,e],n){let r=(n==="time"?Ig:xc).get(t);return e>1&&(r=r.every(e),r[Ci]=Sc.get(t)*e,r[Io]=n),r}function Dl(t,e){if(!(e>1))return;const n=t[Ci];if(!vs.some(([,i])=>i===n)||n%je===0&&je<n&&n<Rn)return;const[r]=vs[ho(([,i])=>Math.log(i)).center(vs,Math.log(n*e))];return(t[Io]==="time"?Og:Pg)(r)}function Il(t,e,n){const r=e==="time"?gc:Ei;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=U3(n);switch(t){case"millisecond":return ir(r(".%L"),r(":%M:%S"),i);case"second":return ir(r(":%S"),r("%-I:%M"),i);case"minute":return ir(r("%-I:%M"),r("%p"),i);case"hour":return ir(r("%-I %p"),r("%b %-d"),i);case"day":return ir(r("%-d"),r("%b"),i);case"month":return ir(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function U3(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function z3(t){return t==="time"?da:t==="utc"?Jr:B3}function q3(t,e,n){const r=se(P2(e,(i,a)=>Math.abs(a-i)));if(r<1e3)return Il("millisecond","utc",n);for(const[i,a,s,f]of z3(t)){if(r>f||i==="hour"&&!r)break;if(e.every(c=>a.floor(c)>=c))return Il(i,s,n)}}function ir(t,e,n){return(r,i,a)=>{const s=t(r,i),f=e(r,i),c=i-vr(a);return i!==c&&a[c]!==void 0&&f===e(a[c],c)?s:n(s,f)}}const Tc=Object.getPrototypeOf(Uint8Array),j3=Object.prototype.toString;function Zn(t){return t instanceof Array||t instanceof Tc}function $g(t){return t instanceof Tc&&!W3(t)}function Rg(t){return(t==null?void 0:t.prototype)instanceof Tc&&!V3(t)}function W3(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function V3(t){return t===BigInt64Array||t===BigUint64Array}const Bg=Symbol("reindex");function _e(t,e,n){const r=typeof e;return r==="string"?Jg(t)?Ac(t.getChild(e),n):Ll(t,Ug(e),n):r==="function"?Ll(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Lt(t,on(e),n):typeof(e==null?void 0:e.transform)=="function"?Cf(e.transform(t),n):H3(Cf(e,n),t==null?void 0:t[Bg])}function H3(t,e){return t!=null&&e?Ec(t,e):t}function Ll(t,e,n){return Lt(t,Rg(n)?(r,i)=>kc(e(r,i)):e,n)}function Cf(t,e){return e===void 0?An(t):Kg(t)?Ac(t,e):t instanceof e?t:e.from(t,Rg(e)&&!$g(t)?kc:void 0)}function Ac(t,e){return t==null?t:(e===void 0||e===Array)&&bw(t.type)?jg(t.toArray()):Cf(t.toArray(),e)}const ha=[null],Ug=t=>e=>{var r;const n=e[t];return n===void 0&&e.type==="Feature"?(r=e.properties)==null?void 0:r[t]:n},zg={transform:Cn},Me={transform:t=>t},Y3=()=>1,X3=()=>!0,Yt=t=>t==null?t:`${t}`,qt=t=>t==null?t:+t,qg=t=>t?t[0]:void 0,G3=t=>t?t[1]:void 0,on=t=>()=>t;function Z3(t){const e=+`${t}`.slice(1)/100;return(n,r)=>xa(n,e,r)}function yn(t){return $g(t)?t:Lt(t,kc,Float64Array)}function kc(t){return t==null?NaN:Number(t)}function jg(t){return Lt(t,J3)}function J3(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Dg(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function Hn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Po(t)?[void 0,t]:[t,void 0]}function Xt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Wg(t,e,n){if(t!=null)return Ne(t,e,n)}function Ne(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Mr(t){return Jg(t)?t:An(t)}function An(t){if(t==null||Zn(t))return t;if(Kg(t))return Ac(t);switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return[t]}return Array.from(t)}function Lt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function li(t,e=Array){return t instanceof e?t.slice():e.from(t)}function Vg({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function K3({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function Q3(t){return Vg(t)||K3(t)||t.interval!==void 0}function Jn(t){return(t==null?void 0:t.toString)===j3}function Ka(t){return Jn(t)&&(t.type!==void 0||t.domain!==void 0)}function Lo(t){return Jn(t)&&typeof t.transform!="function"}function Sr(t){return Lo(t)&&t.value===void 0&&t.channel===void 0}function tw(t,e,n,r=Me){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function Ni(t,e){return t===void 0&&e===void 0?[qg,G3]:[t,e]}function Hg({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Hn(e)),t===void 0&&([t]=Hn(n)),t}function di(t){return Zn(t)?t.length:t==null?void 0:t.numRows}function Cn(t){const e=di(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function Ec(t,e){return Zn(t)?Lt(e,n=>t[n],t.constructor):Lt(e,n=>t.at(n))}function ew(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function sn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nf(t){let e;return[{transform:()=>e,label:Di(t)},n=>e=n]}function nw(t){return t==null?[t]:Nf(t)}function Di(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function rw(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return ve(r)||ve(i)?Lt(r,(a,s)=>new Date((+r[s]+ +i[s])/2)):Lt(r,(a,s)=>(+r[s]+ +i[s])/2,Float64Array)},label:t.label}}function iw(t,e){const n=Yg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Lt(t,n):t}function Yg(t,e){const n=Cc(t,e);return n&&(r=>Tn(r)?n.floor(r):r)}function Cc(t,e){if(t!=null){if(typeof t=="number")return aw(t);if(typeof t=="string")return(e==="time"?Og:Pg)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function aw(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>Ks(Math.ceil(n*e),r*e).map(i=>i/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>Ks(Math.ceil(n/e),r/e).map(i=>i*e)}}function Ii(t,e){if(t=Cc(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function ow(t,e){if(t=Ii(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function sw(t){return typeof(t==null?void 0:t.range)=="function"}function Oo(t){return t===void 0||Lo(t)?t:{value:t}}function fw(t){return t==null?null:{transform:e=>_e(e,t,Float64Array),label:Di(t)}}function Kn(t){return t&&typeof t[Symbol.iterator]=="function"}function Xg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Ol(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ve(t){for(const e of t)if(e!=null)return e instanceof Date}function cw(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Dg(e)}function uw(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function lw(t){for(const e of t)if(e!=null)return typeof e=="number"}function Ms(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const dw=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Po(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||dw.has(t))}function hw(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Qt(t){return t==null||hi(t)}function hi(t){return/^\s*none\s*$/i.test(t)}function gw(t){return/^\s*round\s*$/i.test(t)}function Df(t,e){return Wg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Fo(t="middle"){return Df(t,"frameAnchor")}function mw(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const a=r[i];n===t?n={...n,[i]:a}:n[i]=a}return n}function pw(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function Gg(t){return Kn(t)?pw(t):t}function Zg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Ne(t,"clip",["frame","sphere"])),t}function Jg(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function Kg(t){return t&&typeof t.toArray=="function"&&t.type}function bw(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const Re=Symbol("position"),un=Symbol("color"),Li=Symbol("radius"),Oi=Symbol("length"),Pi=Symbol("opacity"),$o=Symbol("symbol"),Qg=Symbol("projection"),kt=new Map([["x",Re],["y",Re],["fx",Re],["fy",Re],["r",Li],["color",un],["opacity",Pi],["symbol",$o],["length",Oi],["projection",Qg]]);function yw(t){return t===Re||t===Qg}function _w(t){return t===Re||t===Li||t===Oi||t===Pi}const ww=Math.sqrt(3),vw=2/ww,Mw={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*vw,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Nc=new Map([["asterisk",og],["circle",ui],["cross",sg],["diamond",cg],["diamond2",ug],["hexagon",Mw],["plus",lg],["square",dg],["square2",hg],["star",mg],["times",_g],["triangle",pg],["triangle2",bg],["wye",yg]]);function Dc(t){return t&&typeof t.draw=="function"}function Sw(t){return Dc(t)?!0:typeof t!="string"?!1:Nc.has(t.toLowerCase())}function Ic(t){if(t==null||Dc(t))return t;const e=Nc.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function xw(t){if(t==null||Dc(t))return[void 0,t];if(typeof t=="string"){const e=Nc.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Lc({filter:t,sort:e,reverse:n,transform:r,initializer:i,...a}={},s){if(r===void 0&&(t!=null&&(r=tm(t)),e!=null&&!Sr(e)&&(r=Ss(r,Oc(e))),n&&(r=Ss(r,em))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(e===null||Sr(e))&&{sort:e},transform:Ss(r,s)}}function xr({filter:t,sort:e,reverse:n,initializer:r,...i}={},a){return r===void 0&&(t!=null&&(r=tm(t)),e!=null&&!Sr(e)&&(r=xs(r,Oc(e))),n&&(r=xs(r,em))),{...i,...(e===null||Sr(e))&&{sort:e},initializer:xs(r,a)}}function Ss(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Mr(n),r,i)}}function xs(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...a){let s,f,c,u,l,h;return{data:f=n,facets:c=r,channels:s}=t.call(this,n,r,i,...a),{data:l=f,facets:h=c,channels:u}=e.call(this,f,c,{...i,...s},...a),{data:l,facets:h,channels:{...s,...u}}}}function Tw(t,e){return(t.initializer!=null?xr:Lc)(t,e)}function tm(t){return(e,n)=>{const r=_e(e,t);return{data:e,facets:n.map(i=>i.filter(a=>r[a]))}}}function em(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function Aw(t,{sort:e,...n}={}){return{...(Lo(t)&&t.channel!==void 0?xr:Tw)(n,Oc(t)),sort:Sr(e)?e:null}}function Oc(t){return(typeof t=="function"&&t.length!==1?kw:Ew)(t)}function kw(t){return(e,n)=>{const r=Zn(e)?(i,a)=>t(e[i],e[a]):(i,a)=>t(e.get(i),e.get(a));return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function Ew(t){let e,n;({channel:e,value:t,order:n}={...Oo(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?Ja:qe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=qe;break;case"descending":n=Ja;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,s)=>{let f;if(e===void 0)f=_e(i,t);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(f=s[e],!f)return{};f=f.value}const c=(u,l)=>n(f[u],f[l]);return{data:i,facets:a.map(u=>u.slice().sort(c))}}}function Cw(t,e,n=Nw){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Jn(t))return Dw(t);if(typeof t=="function")return Iw(t);if(/^p\d{2}$/i.test(t))return Qe(Z3(t));switch(`${t}`.toLowerCase()){case"first":return Ow;case"last":return Pw;case"identity":return Lw;case"count":return Fl;case"distinct":return Fw;case"sum":return e==null?Fl:$w;case"proportion":return $l(e,"data");case"proportion-facet":return $l(e,"facet");case"deviation":return Qe(S2);case"min":return Qe(Ue);case"min-index":return Qe(N2);case"max":return Qe(se);case"max-index":return Qe(C2);case"mean":return Pl(I2);case"median":return Pl(Js);case"variance":return Qe(_h);case"mode":return Qe(O2)}return n(t)}function Nw(t){throw new Error(`invalid reduce: ${t}`)}function Dw(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function Iw(t){return{reduceIndex(e,n,r){return t(Ec(n,e),r)}}}function Qe(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Pl(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return ve(n)?new Date(r):r}}}const Lw={reduceIndex(t,e){return Ec(e,t)}},Ow={reduceIndex(t,e){return e[t[0]]}},Pw={reduceIndex(t,e){return e[t[t.length-1]]}},Fl={label:"Frequency",reduceIndex(t){return t.length}},Fw={label:"Distinct",reduceIndex(t,e){const n=new go;for(const r of t)n.add(e[r]);return n.size}},$w=Qe(qn);function $l(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>qn(n,a=>r[a])/i}}function gi(t,{scale:e,type:n,value:r,filter:i,hint:a,label:s=Di(r)},f){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),nm(f,{scale:e,type:n,value:_e(t,r),label:s,filter:i,hint:a})}function Rw(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,gi(e,r,n)]))}function Bw(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:a}])=>{const s=i==null?null:e[i];return[r,s==null?a:Lt(a,s)]}));return n.channels=t,n}function nm(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Ms(r,Po)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Ms(r,hw)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&Ms(r,Sw)?(e.scale=null,e.value=Lt(r,Ic)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=kt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!kt.has(n))throw new Error(`unknown scale: ${n}`);return e}function Uw(t,e,n,r,i){const{order:a,reverse:s,reduce:f=!0,limit:c}=i;for(const u in i){if(!kt.has(u))continue;let{value:l,order:h=a,reverse:d=s,reduce:g=f,limit:p=c}=Oo(i[u]);const m=l==null?void 0:l.startsWith("-");if(m&&(l=l.slice(1)),h=h===void 0?m!==(l==="width"||l==="height")?im:rm:jw(h),g==null||g===!1)continue;const b=u==="fx"||u==="fy"?qw(e,r[u]):zw(n,u);if(!b)throw new Error(`missing channel for scale: ${u}`);const y=b.value,[_=0,M=1/0]=Kn(p)?p:p<0?[p]:[0,p];if(l==null)b.domain=()=>{let w=Array.from(new go(y));return d&&(w=w.reverse()),(_!==0||M!==1/0)&&(w=w.slice(_,M)),w};else{const w=l==="data"?t:l==="height"?Rl(n,"y1","y2"):l==="width"?Rl(n,"x1","x2"):If(n,l,l==="y"?"y2":l==="x"?"x2":void 0),v=Cw(g===!0?"max":g,w);b.domain=()=>{let S=x2(Cn(y),k=>v.reduceIndex(k,w),k=>y[k]);return h&&S.sort(h),d&&S.reverse(),(_!==0||M!==1/0)&&(S=S.slice(_,M)),S.map(qg)}}}}function zw(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function qw(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let a=0;a<n.length;++a){const s=r[n[a][0]];for(const f of t[a])i[f]=s}return e}function Rl(t,e,n){const r=If(t,e),i=If(t,n);return Lt(i,(a,s)=>Math.abs(a-r[s]),Float64Array)}function If(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function jw(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return rm;case"descending":return im}throw new Error(`invalid order: ${t}`)}function rm([t,e],[n,r]){return qe(e,r)||qe(t,n)}function im([t,e],[n,r]){return Ja(e,r)||qe(t,n)}function Bl(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const am=new Map([["accent",V6],["category10",W6],["dark2",H6],["observable10",Y6],["paired",X6],["pastel1",G6],["pastel2",Z6],["set1",J6],["set2",K6],["set3",Q6],["tableau10",t3]]);function Ww(t){return t!=null&&am.has(`${t}`.toLowerCase())}const Ul=new Map([...am,["brbg",Ze(Z0,J0)],["prgn",Ze(K0,Q0)],["piyg",Ze(t1,e1)],["puor",Ze(n1,r1)],["rdbu",Ze(Af,Wa)],["rdgy",Ze(i1,a1)],["rdylbu",Ze(kf,Va)],["rdylgn",Ze(o1,s1)],["spectral",Ze(f1,c1)],["burd",zl(Af,Wa)],["buylrd",zl(kf,Va)],["blues",$t(O1,P1)],["greens",$t(F1,$1)],["greys",$t(R1,B1)],["oranges",$t(W1,V1)],["purples",$t(U1,z1)],["reds",$t(q1,j1)],["turbo",Je(K1)],["viridis",Je(Q1)],["magma",Je(tg)],["inferno",Je(eg)],["plasma",Je(ng)],["cividis",Je(H1)],["cubehelix",Je(Y1)],["warm",Je(X1)],["cool",Je(G1)],["bugn",$t(u1,l1)],["bupu",$t(d1,h1)],["gnbu",$t(g1,m1)],["orrd",$t(p1,b1)],["pubu",$t(w1,v1)],["pubugn",$t(y1,_1)],["purd",$t(M1,S1)],["rdpu",$t(x1,T1)],["ylgn",$t(E1,C1)],["ylgnbu",$t(A1,k1)],["ylorbr",$t(N1,D1)],["ylorrd",$t(I1,L1)],["rainbow",ql(Z1)],["sinebow",ql(J1)]]);function $t(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ae(e,n):t[n])}function Ze(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(e,n):t[n])}function zl(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(r=>e(1-r),n):t[n].slice().reverse())}function Je(t){return({length:e})=>Ae(t,Math.max(2,Math.floor(e)))}function ql(t){return({length:e})=>Ae(t,Math.floor(e)+1).slice(0,-1)}function om(t){const e=`${t}`.toLowerCase();if(!Ul.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Ul.get(e)}function Ro(t,e){const n=om(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function Vw(t,e="greys"){const n=new Set,[r,i]=Ro(e,2);for(const a of t)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const jl=new Map([["brbg",J0],["prgn",Q0],["piyg",e1],["puor",r1],["rdbu",Wa],["rdgy",a1],["rdylbu",Va],["rdylgn",s1],["spectral",c1],["burd",t=>Wa(1-t)],["buylrd",t=>Va(1-t)],["blues",P1],["greens",$1],["greys",B1],["purples",z1],["reds",j1],["oranges",V1],["turbo",K1],["viridis",Q1],["magma",tg],["inferno",eg],["plasma",ng],["cividis",H1],["cubehelix",Y1],["warm",X1],["cool",G1],["bugn",l1],["bupu",h1],["gnbu",m1],["orrd",b1],["pubugn",_1],["pubu",v1],["purd",S1],["rdpu",T1],["ylgnbu",k1],["ylgn",C1],["ylorbr",D1],["ylorrd",L1],["rainbow",Z1],["sinebow",J1]]);function Pc(t){const e=`${t}`.toLowerCase();if(!jl.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return jl.get(e)}const Hw=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Yw(t){return t!=null&&Hw.has(`${t}`.toLowerCase())}const sm=t=>e=>t(1-e),Ts=[0,1],Wl=new Map([["number",Mn],["rgb",ii],["hsl",ry],["hcl",oy],["lab",iy]]);function fm(t){const e=`${t}`.toLowerCase();if(!Wl.has(e))throw new Error(`unknown interpolator: ${e}`);return Wl.get(e)}function Fi(t,e,n,{type:r,nice:i,clamp:a,zero:s,domain:f=um(t,n),unknown:c,round:u,scheme:l,interval:h,range:d=kt.get(t)===Li?i5(n,f):kt.get(t)===Oi?a5(n,f):kt.get(t)===Pi?Ts:void 0,interpolate:g=kt.get(t)===un?l==null&&d!==void 0?ii:Pc(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):u?ic:Mn,reverse:p}){if(h=Ii(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof g!="function"&&(g=fm(g)),p=!!p,d!==void 0){const m=(f=An(f)).length,b=(d=An(d)).length;if(m!==b){if(g.length===1)throw new Error("invalid piecewise interpolator");g=po(g,d),d=void 0}}if(g.length===1?(p&&(g=sm(g),p=!1),d===void 0&&(d=Float64Array.from(f,(m,b)=>b/(f.length-1)),d.length===2&&(d=Ts)),e.interpolate((d===Ts?on:$c)(g))):e.interpolate(g),s){const[m,b]=_n(f);(m>0||b<0)&&(f=li(f),(vr(f)||1)===Math.sign(m)?f[0]=0:f[f.length-1]=0)}return p&&(f=Ta(f)),e.domain(f).unknown(c),i&&(e.nice(Xw(i,r)),f=e.domain()),d!==void 0&&e.range(d),a&&e.clamp(a),{type:r,domain:f,range:d,scale:e,interpolate:g,interval:h}}function Xw(t,e){return t===!0?void 0:typeof t=="number"?t:ow(t,e)}function Gw(t,e,n){return Fi(t,dc(),e,n)}function Zw(t,e,n){return cm(t,e,{...n,exponent:.5})}function cm(t,e,{exponent:n=1,...r}){return Fi(t,N0().exponent(n),e,{...r,type:"pow"})}function Jw(t,e,{base:n=10,domain:r=o5(e),...i}){return Fi(t,A0().base(n),e,{...i,domain:r})}function Kw(t,e,{constant:n=1,...r}){return Fi(t,E0().constant(n),e,r)}function Qw(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:s=s5(e),unknown:f,interpolate:c,reverse:u}){return n===void 0&&(n=c!==void 0?Ae(c,i):kt.get(t)===un?Ro(a,i):void 0),s.length>0&&(s=D0(s,n===void 0?{length:i}:n).quantiles()),Fc(t,e,{domain:s,range:n,reverse:u,unknown:f})}function t5(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=um(t,e),unknown:s,interpolate:f,reverse:c}){const[u,l]=_n(a);let h;return n===void 0?(h=Sa(u,l,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=l&&h.pop(),r=h.length+1,n=f!==void 0?Ae(f,r):kt.get(t)===un?Ro(i,r):void 0):(h=Ae(Mn(u,l),r+1).slice(1,-1),u instanceof Date&&(h=h.map(d=>new Date(d)))),vr(An(a))<0&&h.reverse(),Fc(t,e,{domain:h,range:n,reverse:c,unknown:s})}function Fc(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:s=a!==void 0?Ae(a,n.length+1):kt.get(t)===un?Ro(i,n.length+1):void 0,reverse:f}){n=An(n);const c=vr(n);if(!isNaN(c)&&!e5(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(s=Ta(s)),{type:"threshold",scale:I0(c<0?Ta(n):n,s===void 0?[]:s).unknown(r),domain:n,range:s}}function e5(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const a=bi(i,i=t[n]);if(a!==0&&a!==e)return!1}return!0}function n5(t){return{type:"identity",scale:_w(kt.get(t))?S0():e=>e}}function mi(t,e=Ng){return t.length?[Ue(t,({value:n})=>n===void 0?n:Ue(n,e)),se(t,({value:n})=>n===void 0?n:se(n,e))]:[0,1]}function um(t,e){const n=kt.get(t);return(n===Li||n===Pi||n===Oi?r5:mi)(e)}function r5(t){return[0,t.length?se(t,({value:e})=>e===void 0?e:se(e,Ng)):1]}function i5(t,e){const n=t.find(({radius:s})=>s!==void 0);if(n!==void 0)return[0,n.radius];const r=xa(t,.5,({value:s})=>s===void 0?NaN:xa(s,.25,Do)),i=e.map(s=>3*Math.sqrt(s/r)),a=30/se(i);return a<1?i.map(s=>s*a):i}function a5(t,e){const n=Js(t,({value:a})=>a===void 0?NaN:Js(a,Math.abs)),r=e.map(a=>12*a/n),i=60/se(r);return i<1?r.map(a=>a*i):r}function o5(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return mi(t,Do);if(n<0)return mi(t,Mc)}return[1,10]}function s5(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function $c(t){return(e,n)=>r=>t(e+r*(n-e))}let Lf=0,Of;function f5(){const t=Lf;return Lf=0,Of=void 0,t}function wn(t){t!==Of&&(Of=t,console.warn(t),++Lf)}function Bo(t,e,n,r,{type:i,nice:a,clamp:s,domain:f=mi(r),unknown:c,pivot:u=0,scheme:l,range:h,symmetric:d=!0,interpolate:g=kt.get(t)===un?l==null&&h!==void 0?ii:Pc(l!==void 0?l:"rdbu"):Mn,reverse:p}){u=+u,f=An(f);let[m,b]=f;if(f.length>2&&wn(`Warning: the diverging ${t} scale domain contains extra elements.`),bi(m,b)<0&&([m,b]=[b,m],p=!p),m=Math.min(m,u),b=Math.max(b,u),typeof g!="function"&&(g=fm(g)),h!==void 0&&(g=g.length===1?$c(g)(...h):po(g,h)),p&&(g=sm(g)),d){const y=n.apply(u),_=y-n.apply(m),M=n.apply(b)-y;_<M?m=n.invert(y-M):_>M&&(b=n.invert(y+_))}return e.domain([m,u,b]).unknown(c).interpolator(g),s&&e.clamp(s),a&&e.nice(a),{type:i,domain:[m,b],pivot:u,interpolate:g,scale:e}}function c5(t,e,n){return Bo(t,H0(),h5,e,n)}function u5(t,e,n){return lm(t,e,{...n,exponent:.5})}function lm(t,e,{exponent:n=1,...r}){return Bo(t,G0().exponent(n=+n),p5(n),e,{...r,type:"diverging-pow"})}function l5(t,e,{base:n=10,pivot:r=1,domain:i=mi(e,r<0?Mc:Do),...a}){return Bo(t,Y0().base(n=+n),g5,e,{domain:i,pivot:r,...a})}function d5(t,e,{constant:n=1,...r}){return Bo(t,X0().constant(n=+n),b5(n),e,r)}const h5={apply(t){return t},invert(t){return t}},g5={apply:Math.log,invert:Math.exp},m5={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function p5(t){return t===.5?m5:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function b5(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function dm(t,e,n,r){return Fi(t,e,n,r)}function y5(t,e,n){return dm(t,q6(),e,n)}function _5(t,e,n){return dm(t,j6(),e,n)}const $i=Symbol("ordinal");function hm(t,e,n,{type:r,interval:i,domain:a,range:s,reverse:f,hint:c}){return i=Ii(i,r),a===void 0&&(a=mm(n,i,t)),(r==="categorical"||r===$i)&&(r="ordinal"),f&&(a=Ta(a)),a=e.domain(a).domain(),s!==void 0&&(typeof s=="function"&&(s=s(a)),e.range(s)),{type:r,domain:a,range:s,scale:e,hint:c,interval:i}}function w5(t,e,{type:n,interval:r,domain:i,range:a,scheme:s,unknown:f,...c}){r=Ii(r,n),i===void 0&&(i=mm(e,r,t));let u;if(kt.get(t)===$o)u=S5(e),a=a===void 0?x5(u):Lt(a,Ic);else if(kt.get(t)===un&&(a===void 0&&(n==="ordinal"||n===$i)&&(a=Vw(i,s),a!==void 0&&(s=void 0)),s===void 0&&a===void 0&&(s=n==="ordinal"?"turbo":"observable10"),s!==void 0))if(a!==void 0){const l=Pc(s),h=a[0],d=a[1]-a[0];a=({length:g})=>Ae(p=>l(h+d*p),g)}else a=om(s);if(f===Sf)throw new Error(`implicit unknown on ${t} scale is not supported`);return hm(t,lc().unknown(f),e,{...c,type:n,domain:i,range:a,hint:u})}function v5(t,e,{align:n=.5,padding:r=.5,...i}){return gm(M_().align(n).padding(r),e,i,t)}function M5(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=t==="fx"||t==="fy"?0:r,...s}){return gm(wo().align(n).paddingInner(i).paddingOuter(a),e,s,t)}function gm(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=hm(r,t,e,n),t.round=i,t}function mm(t,e,n){const r=new go;for(const{value:i,domain:a}of t){if(a!==void 0)return a();if(i!==void 0)for(const s of i)r.add(s)}if(e!==void 0){const[i,a]=_n(r).map(e.floor,e);return e.range(i,e.offset(a))}if(r.size>1e4&&kt.get(n)===Re)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Xs(r,qe)}function Vl(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function S5(t){return{fill:Vl(t,"fill"),stroke:Vl(t,"stroke")}}function x5(t){return Qt(t.fill)?y3:b3}function Pf(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:s=n,round:f,nice:c,clamp:u,zero:l,align:h,padding:d,projection:g,facet:{label:p=e}={},...m}={}){const b={};for(const[y,_]of t){const M=m[y],w=_m(y,_,{round:kt.get(y)===Re?f:void 0,nice:c,clamp:u,zero:l,align:h,padding:d,projection:g,...M});if(w){let{label:v=y==="fx"||y==="fy"?p:e,percent:S,transform:k,inset:x,insetTop:E=x!==void 0?x:y==="y"?r:0,insetRight:D=x!==void 0?x:y==="x"?i:0,insetBottom:A=x!==void 0?x:y==="y"?a:0,insetLeft:N=x!==void 0?x:y==="x"?s:0}=M||{};if(k==null)k=void 0;else if(typeof k!="function")throw new Error("invalid scale transform; not a function");w.percent=!!S,w.label=v===void 0?A5(_,w):v,w.transform=k,y==="x"||y==="fx"?(w.insetLeft=+N,w.insetRight=+D):(y==="y"||y==="fy")&&(w.insetTop=+E,w.insetBottom=+A),b[y]=w}}return b}function Hl(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:a,type:s,interval:f,label:c}=i;e[r]=vm(i),n[r]=a,a.type=s,f!=null&&(a.interval=f),c!=null&&(a.label=c)}return n}function T5(t,e){const{x:n,y:r,fx:i,fy:a}=t,s=i||a?Rc(e):e;i&&Yl(i,s),a&&Xl(a,s);const f=i||a?pm(t,e):e;n&&Yl(n,f),r&&Xl(r,f)}function A5(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Qn(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function k5(t){return Math.sign(vr(t.domain()))*Math.sign(vr(t.range()))}function Rc(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:s,facet:{marginTop:f,marginRight:c,marginBottom:u,marginLeft:l}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,c),marginBottom:Math.max(r,u),marginLeft:Math.max(i,l),width:a,height:s}}function pm({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=Rc(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:t?t.scale.bandwidth()+s+i:f,height:e?e.scale.bandwidth()+r+a:c,facet:{width:f,height:c}}}function Yl(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:a=0,marginRight:s=0}=e,f=a+n,c=i-s-r;t.range=[f,Math.max(f,c)],Qn(t)||(t.range=ym(t)),t.scale.range(t.range)}bm(t)}function Xl(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:a=0,marginBottom:s=0}=e,f=a+n,c=i-s-r;t.range=[Math.max(f,c),f],Qn(t)?t.range.reverse():t.range=ym(t),t.scale.range(t.range)}bm(t)}function bm(t){t.round===void 0&&D5(t)&&E5(t)<=30&&t.scale.round(!0)}function E5({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,a=t.paddingOuter?t.paddingOuter():t.padding(),s=e-i,f=Math.abs(r-n)/Math.max(1,s+a*2);return(f-Math.floor(f))*s}function ym(t){const e=t.scale.domain().length+wm(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,a)=>n+a/(e-1)*(r-n))}function C5(t,e,n){return _m(t,n===void 0?void 0:[{hint:n}],{...e})}function _m(t,e=[],n={}){const r=N5(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Qn({type:r})){const i=e.map(({value:a})=>a).filter(a=>a!==void 0);i.some(ve)?wn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${ar(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${ar(r)}".`):i.some(cw)?wn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${ar(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${ar(r)}".`):i.some(uw)&&wn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${ar(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${ar(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Gi(e,n,yn);break;case"identity":switch(kt.get(t)){case Re:n=Gi(e,n,yn);break;case $o:n=Gi(e,n,I5);break}break;case"utc":case"time":n=Gi(e,n,jg);break}switch(r){case"diverging":return c5(t,e,n);case"diverging-sqrt":return u5(t,e,n);case"diverging-pow":return lm(t,e,n);case"diverging-log":return l5(t,e,n);case"diverging-symlog":return d5(t,e,n);case"categorical":case"ordinal":case $i:return w5(t,e,n);case"cyclical":case"sequential":case"linear":return Gw(t,e,n);case"sqrt":return Zw(t,e,n);case"threshold":return Fc(t,e,n);case"quantile":return Qw(t,e,n);case"quantize":return t5(t,e,n);case"pow":return cm(t,e,n);case"log":return Jw(t,e,n);case"symlog":return Kw(t,e,n);case"utc":return _5(t,e,n);case"time":return y5(t,e,n);case"point":return v5(t,e,n);case"band":return M5(t,e,n);case"identity":return n5(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function ar(t){return typeof t=="symbol"?t.description:t}function Gl(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Zl={toString:()=>"projection"};function N5(t,e,{type:n,domain:r,range:i,scheme:a,pivot:s,projection:f}){if(n=Gl(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=Zl);for(const u of e){const l=Gl(u.type);if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}}if(n===Zl)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:u})=>u!==void 0))return;const c=kt.get(t);if(c===Li)return"sqrt";if(c===Pi||c===Oi)return"linear";if(c===$o)return"ordinal";if((r||i||[]).length>2)return As(c);if(r!==void 0){if(Ol(r))return As(c);if(ve(r))return"utc"}else{const u=e.map(({value:l})=>l).filter(l=>l!==void 0);if(u.some(Ol))return As(c);if(u.some(ve))return"utc"}if(c===un){if(s!=null||Yw(a))return"diverging";if(Ww(a))return"categorical"}return"linear"}function As(t){switch(t){case Re:return"point";case un:return $i;default:return"ordinal"}}function Qn({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===$i}function wm({type:t}){return t==="threshold"}function D5({type:t}){return t==="point"||t==="band"}function Tr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function Gi(t,{domain:e,...n},r){var i;for(const a of t)a.value!==void 0&&(e===void 0&&(e=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:e===void 0?e:r(e),...n}}function I5(t){return Lt(t,Ic)}function Ff(t={}){let e;for(const n in t)if(kt.has(n)&&Ka(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=vm(C5(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function L5(t){return e=>{if(!kt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function vm({scale:t,type:e,domain:n,range:r,interpolate:i,interval:a,transform:s,percent:f,pivot:c}){if(e==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const u=t.unknown?t.unknown():void 0;return{type:e,domain:li(n),...r!==void 0&&{range:li(r)},...s!==void 0&&{transform:s},...f&&{percent:f},...u!==void 0&&{unknown:u},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:l=>t(l),...t.invert&&{invert:l=>t.invert(l)}}}function O5(t,e){const{fx:n,fy:r}=Pf(t,e),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?v2(i,a).map(([s,f],c)=>({x:s,y:f,i:c})):i?i.map((s,f)=>({x:s,i:f})):a?a.map((s,f)=>({y:s,i:f})):void 0}function P5(t,{x:e,y:n}){return e&&(e=$f(e)),n&&(n=$f(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Bc(t,{fx:e,fy:n}){const r=Cn(t),i=e==null?void 0:e.value,a=n==null?void 0:n.value;return e&&n?Qr(r,s=>(s.fx=i[s[0]],s.fy=a[s[0]],s),s=>i[s],s=>a[s]):e?Qr(r,s=>(s.fx=i[s[0]],s),s=>i[s]):Qr(r,s=>(s.fy=a[s[0]],s),s=>a[s])}function F5(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:a})=>`translate(${t(i)-r},${e(a)-n})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${e(i)-n})`}function $5(t){const e=[],n=new Uint32Array(qn(t,r=>r.length));for(const r of t){let i=0;for(const a of t)r!==a&&(n.set(a,i),i+=a.length);e.push(n.slice(0,i))}return e}const R5=new Map([["top",ks],["right",Ns],["bottom",Es],["left",Cs],["top-left",Zi(ks,Cs)],["top-right",Zi(ks,Ns)],["bottom-left",Zi(Es,Cs)],["bottom-right",Zi(Es,Ns)],["top-empty",z5],["right-empty",W5],["bottom-empty",q5],["left-empty",j5],["empty",V5]]);function B5(t){if(t==null)return null;const e=R5.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Jl=new WeakMap;function $f(t){let e=Jl.get(t);return e||Jl.set(t,e=new zn(Lt(t,(n,r)=>[n,r]))),e}function Nn(t,e){return $f(t).get(e)}function U5(t,e,n){return e=sn(e),n=sn(n),t.find(r=>Object.is(sn(r.x),e)&&Object.is(sn(r.y),n))}function Uo(t,e,n){var r;return(r=U5(t,e,n))==null?void 0:r.empty}function ks(t,{y:e},{y:n}){return e?Nn(e,n)===0:!0}function Es(t,{y:e},{y:n}){return e?Nn(e,n)===e.length-1:!0}function Cs(t,{x:e},{x:n}){return e?Nn(e,n)===0:!0}function Ns(t,{x:e},{x:n}){return e?Nn(e,n)===e.length-1:!0}function z5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Nn(e,r);if(a>0)return Uo(t,n,e[a-1])}function q5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Nn(e,r);if(a<e.length-1)return Uo(t,n,e[a+1])}function j5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Nn(e,n);if(a>0)return Uo(t,e[a-1],r)}function W5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Nn(e,n);if(a<e.length-1)return Uo(t,e[a+1],r)}function V5(t,e,{empty:n}){return n}function Zi(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ds(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:a})=>{var s;return((s=r.get(i))==null?void 0:s.get(a))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}const Mm=Math.PI,Ke=2*Mm,Is=.618;function H5({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={},s){if(t==null)return;if(typeof t.stream=="function")return t;let f,c,u="frame";if(Jn(t)){let v;if({type:t,domain:c,inset:v,insetTop:n=v!==void 0?v:n,insetRight:r=v!==void 0?v:r,insetBottom:i=v!==void 0?v:i,insetLeft:a=v!==void 0?v:a,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Rf(t));const{width:l,height:h,marginLeft:d,marginRight:g,marginTop:p,marginBottom:m}=s,b=l-d-g-a-r,y=h-p-m-n-i;if(t=t==null?void 0:t({width:b,height:y,clip:u,...f}),t==null)return;u=Y5(u,d,p,l-g,h-m);let _=d+a,M=p+n,w;if(c!=null){const[[v,S],[k,x]]=yi(t).bounds(c),E=Math.min(b/(k-v),y/(x-S));E>0?(_-=(E*(v+k)-b)/2,M-=(E*(S+x)-y)/2,w=vf({point(D,A){this.stream.point(D*E+_,A*E+M)}})):wn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=_===0&&M===0?Sm():vf({point(v,S){this.stream.point(v+_,S+M)}})),{stream:v=>t.stream(w.stream(u(v)))}}function Rf(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Se(s_,.7463,.4673);case"albers":return Ji(l0,.7463,.4673);case"azimuthal-equal-area":return Se(f_,4,4);case"azimuthal-equidistant":return Se(c_,Ke,Ke);case"conic-conformal":return Ji(d_,Ke,Ke);case"conic-equal-area":return Ji(Ua,6.1702,2.9781);case"conic-equidistant":return Ji(m_,7.312,3.6282);case"equal-earth":return Se(b_,5.4133,2.6347);case"equirectangular":return Se(h_,Ke,Mm);case"gnomonic":return Se(y_,3.4641,3.4641);case"identity":return{type:Sm};case"reflect-y":return{type:X5};case"mercator":return Se(u_,Ke,Ke);case"orthographic":return Se(__,2,2);case"stereographic":return Se(w_,2,2);case"transverse-mercator":return Se(v_,Ke,Ke);default:throw new Error(`unknown projection type: ${t}`)}}function Y5(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return a=>a;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Gh(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function Se(t,e,n){return{type:({width:r,height:i,rotate:a,precision:s=.15,clip:f})=>{var u,l,h;const c=t();return s!=null&&((u=c.precision)==null||u.call(c,s)),a!=null&&((l=c.rotate)==null||l.call(c,a)),typeof f=="number"&&((h=c.clipAngle)==null||h.call(c,f)),r!=null&&(c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2])),c},aspectRatio:n/e}}function Ji(t,e,n){const{type:r,aspectRatio:i}=Se(t,e,n);return{type:a=>{const{parallels:s,domain:f,width:c,height:u}=a,l=r(a);return s!=null&&(l.parallels(s),f===void 0&&c!=null&&l.fitSize([c,u],{type:"Sphere"})),l},aspectRatio:i}}const Sm=on({stream:t=>t}),X5=on(vf({point(t,e){this.stream.point(t,-e)}}));function G5(t,e,n,r){const i=n[t],a=n[e],s=i.length,f=n[t]=new Float64Array(s).fill(NaN),c=n[e]=new Float64Array(s).fill(NaN);let u;const l=r.stream({point(h,d){f[u]=h,c[u]=d}});for(u=0;u<s;++u)l.point(i[u],a[u])}function Z5({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Jn(t)&&(t=t.type),t!=null)}function J5(t){if(typeof(t==null?void 0:t.stream)=="function")return Is;if(Jn(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?Rf(t).type:t,[[i,a],[s,f]]=yi(r({...n,width:100,height:100})).bounds(e),c=(f-a)/(s-i);return c&&isFinite(c)?c<.2?.2:c>5?5:c:Is}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=Rf(t);if(e)return e}return Is}}function K5(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},a={point(s,f){e.push(s),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const s of t.value)On(s,a);return[r,i]}function Uc(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Zg(n)}}function Ft(t,{document:e}){return Ht(dh(t).call(e.documentElement))}const Bf=Symbol("unset");function zc(t){return(t.length===1?Q5:t4)(t)}function Q5(t){let e,n=Bf;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function t4(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>!Object.is(i,r[a])))&&(n=r,e=t(...r)),e)}const e4=zc(t=>new Intl.NumberFormat(t));zc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}}));zc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function n4(t="en-US"){const e=e4(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function r4(t){return F3(t,"Invalid Date")}function i4(t="en-US"){const e=n4(t);return n=>(n instanceof Date?r4:typeof n=="number"?e:Yt)(n)}const Ar=i4(),oe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let a4=0;function o4(){return`plot-clip-${++a4}`}function s4(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:s,fill:f,fillOpacity:c,stroke:u,strokeWidth:l,strokeOpacity:h,strokeLinejoin:d,strokeLinecap:g,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:b,opacity:y,mixBlendMode:_,imageFilter:M,paintOrder:w,pointerEvents:v,shapeRendering:S,channels:k},{ariaLabel:x,fill:E="currentColor",fillOpacity:D,stroke:A="none",strokeOpacity:N,strokeWidth:$,strokeLinecap:R,strokeLinejoin:T,strokeMiterlimit:O,paintOrder:L}){E===null&&(f=null,c=null),A===null&&(u=null,h=null),Qt(E)?!Qt(A)&&(!Qt(f)||k!=null&&k.fill)&&(A="none"):Qt(A)&&(!Qt(u)||k!=null&&k.stroke)&&(E="none");const[q,X]=Hn(f,E),[B,U]=Xt(c,D),[z,H]=Hn(u,A),[I,tt]=Xt(h,N),[nt,j]=Xt(y);hi(H)||(l===void 0&&(l=$),g===void 0&&(g=R),d===void 0&&(d=T),p===void 0&&!gw(d)&&(p=O),!hi(X)&&w===void 0&&(w=L));const[Q,F]=Xt(l);return E!==null&&(t.fill=Bt(X,"currentColor"),t.fillOpacity=qr(U,1)),A!==null&&(t.stroke=Bt(H,"none"),t.strokeWidth=qr(F,1),t.strokeOpacity=qr(tt,1),t.strokeLinejoin=Bt(d,"miter"),t.strokeLinecap=Bt(g,"butt"),t.strokeMiterlimit=qr(p,4),t.strokeDasharray=Bt(m,"none"),t.strokeDashoffset=Bt(b,"0")),t.target=Yt(s),t.ariaLabel=Yt(x),t.ariaDescription=Yt(i),t.ariaHidden=Yt(a),t.opacity=qr(j,1),t.mixBlendMode=Bt(_,"normal"),t.imageFilter=Bt(M,"none"),t.paintOrder=Bt(w,"normal"),t.pointerEvents=Bt(v,"auto"),t.shapeRendering=Bt(S,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:q,scale:"auto",optional:!0},fillOpacity:{value:B,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:I,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:nt,scale:"auto",optional:!0}}}function f4(t,e){e&&t.filter(n=>vc(e[n])).append("title").call(u4,e)}function c4(t,e){e&&t.filter(([n])=>vc(e[n])).append("title").call(l4,e)}function u4(t,e){e&&t.text(n=>Ar(e[n]))}function l4(t,e){e&&t.text(([n])=>Ar(e[n]))}function Ce(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:h}){r&&ft(t,"aria-label",d=>r[d]),a&&ft(t,"fill",d=>a[d]),s&&ft(t,"fill-opacity",d=>s[d]),f&&ft(t,"stroke",d=>f[d]),c&&ft(t,"stroke-opacity",d=>c[d]),u&&ft(t,"stroke-width",d=>u[d]),l&&ft(t,"opacity",d=>l[d]),h&&Tm(t,d=>h[d],e),n||f4(t,i)}function d4(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:h}){r&&ft(t,"aria-label",([d])=>r[d]),a&&ft(t,"fill",([d])=>a[d]),s&&ft(t,"fill-opacity",([d])=>s[d]),f&&ft(t,"stroke",([d])=>f[d]),c&&ft(t,"stroke-opacity",([d])=>c[d]),u&&ft(t,"stroke-width",([d])=>u[d]),l&&ft(t,"opacity",([d])=>l[d]),h&&Tm(t,([d])=>h[d],e),n||c4(t,i)}function h4({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:s,opacity:f,href:c},{tip:u}){return[t,u?void 0:e,n,r,i,a,s,f,c].filter(l=>l!==void 0)}function g4(t,e,n){const r=Qf(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&wn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*m4(t,e,n,r){const{z:i}=n,{z:a}=r,s=h4(r,n),f=[...e,...s];for(const c of a?g4(t,a,i):[t]){let u,l;t:for(const h of c){for(const d of f)if(!Tn(d[h])){l&&l.push(-1);continue t}if(u===void 0){l&&(yield l),u=s.map(d=>sn(d[h])),l=[h];continue}l.push(h);for(let d=0;d<s.length;++d)if(sn(s[d][h])!==u[d]){yield l,u=s.map(p=>sn(p[h])),l=[h];continue t}}l&&(yield l)}}function p4(t,e,n,r){let i;const{clip:a=r.clip}=e;switch(a){case"frame":{t=Ft("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=b4(r,n);break}case"sphere":{i=y4(r);break}}ft(t,"aria-label",e.ariaLabel),ft(t,"aria-description",e.ariaDescription),ft(t,"aria-hidden",e.ariaHidden),ft(t,"clip-path",i)}function xm(t){const e=new WeakMap;return(n,r)=>{let i=e.get(n);if(!i){const a=o4();Ht(n.ownerSVGElement).append("clipPath").attr("id",a).call(t,n,r),e.set(n,i=`url(#${a})`)}return i}}const b4=xm((t,e,n)=>{const{width:r,height:i,marginLeft:a,marginRight:s,marginTop:f,marginBottom:c}=n;t.append("rect").attr("x",a).attr("y",f).attr("width",r-s-a).attr("height",i-f-c)}),y4=xm((t,e)=>{const{projection:n}=e;if(!n)throw new Error('the "sphere" clip option requires a projection');t.append("path").attr("d",yi(n)({type:"Sphere"}))});function De(t,e,n,r){p4(t,e,n,r),ft(t,"class",e.className),ft(t,"fill",e.fill),ft(t,"fill-opacity",e.fillOpacity),ft(t,"stroke",e.stroke),ft(t,"stroke-width",e.strokeWidth),ft(t,"stroke-opacity",e.strokeOpacity),ft(t,"stroke-linejoin",e.strokeLinejoin),ft(t,"stroke-linecap",e.strokeLinecap),ft(t,"stroke-miterlimit",e.strokeMiterlimit),ft(t,"stroke-dasharray",e.strokeDasharray),ft(t,"stroke-dashoffset",e.strokeDashoffset),ft(t,"shape-rendering",e.shapeRendering),ft(t,"filter",e.imageFilter),ft(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;ft(t,"pointer-events",i)}function ce(t,e){_4(t,"mix-blend-mode",e.mixBlendMode),ft(t,"opacity",e.opacity)}function Tm(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const a=this.ownerDocument.createElementNS(ya.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ya.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function ft(t,e,n){n!=null&&t.attr(e,n)}function _4(t,e,n){n!=null&&t.style(e,n)}function Ie(t,e,{x:n,y:r},i=oe,a=oe){i+=e.dx,a+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&t.attr("transform",`translate(${i},${a})`)}function Bt(t,e){if((t=Yt(t))!==e)return t}function qr(t,e){if((t=qt(t))!==e)return t}const w4=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function zo(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!w4.test(t))throw new Error(`invalid class name: ${t}`);return t}function qc(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ri({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:s}){return[/left$/.test(t)?s:/right$/.test(t)?e-i:(s+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-a:(r+n-a)/2]}class ie{constructor(e,n={},r={},i){const{facet:a="auto",facetAnchor:s,fx:f,fy:c,sort:u,dx:l=0,dy:h=0,margin:d=0,marginTop:g=d,marginRight:p=d,marginBottom:m=d,marginLeft:b=d,className:y,clip:_=i==null?void 0:i.clip,channels:M,tip:w,render:v}=r;if(this.data=e,this.sort=Sr(u)?u:null,this.initializer=xr(r).initializer,this.transform=this.initializer?r.transform:Lc(r).transform,a===null||a===!1?this.facet=null:(this.facet=Ne(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=e===ha&&typeof f=="string"?[f]:f,this.fy=e===ha&&typeof c=="string"?[c]:c),this.facetAnchor=B5(s),n=Gg(n),M!==void 0&&(n={...v4(M),...n}),i!==void 0&&(n={...s4(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([S,k])=>{if(Lo(k.value)){const{value:x,label:E=k.label,scale:D=k.scale}=k.value;k={...k,label:E,scale:D,value:x}}if(e===ha&&typeof k.value=="string"){const{value:x}=k;k={...k,value:[x]}}return[S,k]}).filter(([S,{value:k,optional:x}])=>{if(k!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${S}`)})),this.dx=+l,this.dy=+h,this.marginTop=+g,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+b,this.clip=Zg(_),this.tip=M4(w),this.className=y?zo(y):null,this.facet==="super"){if(f||c)throw new Error("super-faceting cannot use fx or fy");for(const S in this.channels){const{scale:k}=n[S];if(!(k!=="x"&&k!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=km(v,this.render))}initialize(e,n,r){let i=Mr(this.data);e===void 0&&i!=null&&(e=[Cn(i)]);const a=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Mr(i)),e!==void 0&&(e.original=a);const s=Rw(this.channels,i);return this.sort!=null&&Uw(i,e,s,n,this.sort),{data:i,facets:e,channels:s}}filter(e,n,r){for(const i in n){const{filter:a=Tn}=n[i];if(a!==null){const s=r[i];e=e.filter(f=>a(s[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in e&&e[a].scale==="y"&&G5(i,a,n,r.projection)}}scale(e,n,r){const i=Bw(e,n);return r.projection&&this.project(e,i,r),i}}function Am(...t){return t.plot=ie.prototype.plot,t}function km(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,a,s,f){return t.call(this,n,r,i,a,s,(c,u,l,h,d)=>e.call(this,c,u,l,h,d,f))}}function v4(t){return Object.fromEntries(Object.entries(Gg(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Oo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function M4(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ne(t,"tip",["x","y","xy"]):t}function jc(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Jn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function S4(t,e,n={}){let r=.5-oe,i=.5+oe,a=.5+oe,s=.5-oe;for(const{marginTop:m,marginRight:b,marginBottom:y,marginLeft:_}of e)m>r&&(r=m),b>i&&(i=b),y>a&&(a=y),_>s&&(s=_);let{margin:f,marginTop:c=f!==void 0?f:r,marginRight:u=f!==void 0?f:i,marginBottom:l=f!==void 0?f:a,marginLeft:h=f!==void 0?f:s}=n;c=+c,u=+u,l=+l,h=+h;let{width:d=640,height:g=x4(t,n,{width:d,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:s})+Math.max(0,c-r+l-a)}=n;d=+d,g=+g;const p={width:d,height:g,marginTop:c,marginRight:u,marginBottom:l,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:c,marginRight:y=m!==void 0?m:u,marginBottom:_=m!==void 0?m:l,marginLeft:M=m!==void 0?m:h}=n.facet??{};b=+b,y=+y,_=+_,M=+M,p.facet={marginTop:b,marginRight:y,marginBottom:_,marginLeft:M}}return p}function x4({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:a},{width:s,marginTopDefault:f,marginRightDefault:c,marginBottomDefault:u,marginLeftDefault:l}){const h=n&&n.scale.domain().length||1,d=J5(i);if(d){const p=r?r.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*d,b=Math.max(.1,Math.min(10,m));return Math.round((s-l-c)*b+f+u)}const g=e?Qn(e)?e.scale.domain().length||1:Math.max(7,17/h):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const p=Kl("y",e)/(Kl("x",t)*a),m=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,y=m*(s-l-c)-t.insetLeft-t.insetRight;return(p*y+e.insetTop+e.insetBottom)/b+f+u}return!!(e||n)*Math.max(1,Math.min(60,g*h))*20+!!r*30+60}function Kl(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=c=>Math.pow(c,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[a,s]=_n(r);return Math.abs(i(s)-i(a))}const Ql=new WeakMap;function Wc(t,e,{x:n,y:r,px:i,py:a,maxRadius:s=40,channels:f,render:c,...u}={}){return s=+s,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),f={...f,py:{value:a,scale:"y"}}),{x:n,y:r,channels:f,...u,render:km(function(l,h,d,g,p,m){p={...p,pointerSticky:!1};const b=p.ownerSVGElement,{data:y}=p.getMarkState(this);let _=Ql.get(b);_||Ql.set(b,_={sticky:!1,roots:[],renders:[]});let M=_.renders.push(H)-1;const{x:w,y:v,fx:S,fy:k}=h;let x=S?S(l.fx)-g.marginLeft:0,E=k?k(l.fy)-g.marginTop:0;w!=null&&w.bandwidth&&(x+=w.bandwidth()/2),v!=null&&v.bandwidth&&(E+=v.bandwidth()/2);const D=l.fi!=null;let A;if(D){let j=_.facetStates;j||(_.facetStates=j=new Map),A=j.get(this),A||j.set(this,A=new Map)}const[N,$]=Ri(this,g),{px:R,py:T}=d,O=R?j=>R[j]:Em(d,N),L=T?j=>T[j]:Cm(d,$);let q,X,B,U;function z(j,Q){if(D)if(U&&(U=cancelAnimationFrame(U)),j==null)A.delete(l.fi);else{A.set(l.fi,Q),U=requestAnimationFrame(()=>{U=null;for(const[F,Y]of A)if(Y<Q||Y===Q&&F<l.fi){j=null;break}H(j)});return}H(j)}function H(j){if(q===j&&B===_.sticky)return;q=j,B=p.pointerSticky=_.sticky;const Q=q==null?[]:[q];D&&(Q.fx=l.fx,Q.fy=l.fy,Q.fi=l.fi);const F=m(Q,h,d,g,p);if(X){if(D){const Y=X.parentNode,G=X.getAttribute("transform"),P=F.getAttribute("transform");G?F.setAttribute("transform",G):F.removeAttribute("transform"),P?Y.setAttribute("transform",P):Y.removeAttribute("transform"),F.removeAttribute("aria-label"),F.removeAttribute("aria-description"),F.removeAttribute("aria-hidden")}X.replaceWith(F)}if(_.roots[M]=X=F,!(q==null&&(A==null?void 0:A.size)>1)){const Y=q==null?null:Zn(y)?y[q]:y.get(q);p.dispatchValue(Y)}return F}function I(j){if(_.sticky||j.pointerType==="mouse"&&j.buttons===1)return;let[Q,F]=tf(j);Q-=x,F-=E;const Y=Q<g.marginLeft||Q>g.width-g.marginRight?1:t,G=F<g.marginTop||F>g.height-g.marginBottom?1:e;let P=null,mt=s*s;for(const rt of l){const yt=Y*(O(rt)-Q),St=G*(L(rt)-F),Z=yt*yt+St*St;Z<=mt&&(P=rt,mt=Z)}if(P!=null&&(t!==1||e!==1)){const rt=O(P)-Q,yt=L(P)-F;mt=rt*rt+yt*yt}z(P,mt)}function tt(j){j.pointerType==="mouse"&&q!=null&&(_.sticky&&_.roots.some(Q=>Q==null?void 0:Q.contains(j.target))||(_.sticky?(_.sticky=!1,_.renders.forEach(Q=>Q(null))):(_.sticky=!0,H(q)),j.stopImmediatePropagation()))}function nt(j){j.pointerType==="mouse"&&(_.sticky||z(null))}return b.addEventListener("pointerenter",I),b.addEventListener("pointermove",I),b.addEventListener("pointerdown",tt),b.addEventListener("pointerleave",nt),H(null)},c)}}function T4(t){return Wc(1,1,t)}function A4(t){return Wc(1,.01,t)}function td(t){return Wc(.01,1,t)}function Em({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Cm({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Nm(t){return Qn(t)&&t.interval===void 0?void 0:"tabular-nums"}function k4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:s=18,marginRight:f=0,marginBottom:c=16+r,marginLeft:u=0,style:l,ticks:h=(i-u-f)/64,tickFormat:d,fontVariant:g=Nm(t),round:p=!0,opacity:m,className:b}=e;const y=Uc(e);b=zo(b),m=Xt(m)[1],d===null&&(d=()=>null);const _=Ft("svg",y).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(N=>N.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(qc,l);let M=N=>N.selectAll(".tick line").attr("y1",s+c-a),w;const v=p?(N,$)=>N.rangeRound($):(N,$)=>N.range($),{type:S,domain:k,range:x,interpolate:E,scale:D,pivot:A}=t;if(E){const N=x===void 0?E:po(E.length===1?$c(E):E,x);w=v(D.copy(),Ae(Mn(u,i-f),Math.min(k.length+(A!==void 0),x===void 0?1/0:x.length)));const $=256,R=y.document.createElement("canvas");R.width=$,R.height=1;const T=R.getContext("2d");for(let O=0,L=$-1;O<$;++O)T.fillStyle=N(O/L),T.fillRect(O,0,1,1);_.append("image").attr("opacity",m).attr("x",u).attr("y",s).attr("width",i-u-f).attr("height",a-s-c).attr("preserveAspectRatio","none").attr("xlink:href",R.toDataURL())}else if(S==="threshold"){const N=k,$=d===void 0?R=>R:typeof d=="string"?Ir(d):d;w=v(dc().domain([-1,x.length-1]),[u,i-f]),_.append("g").attr("fill-opacity",m).selectAll().data(x).enter().append("rect").attr("x",(R,T)=>w(T-1)).attr("y",s).attr("width",(R,T)=>w(T)-w(T-1)).attr("height",a-s-c).attr("fill",R=>R),h=Lt(N,(R,T)=>T),d=R=>$(N[R],R)}else w=v(wo().domain(k),[u,i-f]),_.append("g").attr("fill-opacity",m).selectAll().data(k).enter().append("rect").attr("x",w).attr("y",s).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-s-c).attr("fill",D),M=()=>{};return _.append("g").attr("transform",`translate(0,${a-c})`).call(W2(w).ticks(Array.isArray(h)?null:h,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Bt(g,"normal")).call(M).call(N=>N.select(".domain").remove()),n!==void 0&&_.append("text").attr("x",u).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),_.node()}const Dm=Math.PI/180;function qo(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=Ls(n),t.markerMid=Ls(r),t.markerEnd=Ls(i)}function Ls(t){if(t==null||t===!1)return null;if(t===!0)return nd;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return ed("auto");case"arrow-reverse":return ed("auto-start-reverse");case"dot":return E4;case"circle":case"circle-fill":return nd;case"circle-stroke":return C4;case"tick":return Os("auto");case"tick-x":return Os(90);case"tick-y":return Os(0)}throw new Error(`invalid marker: ${t}`)}function ed(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function E4(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function nd(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function C4(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Os(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let N4=0;function Vc(t,e,{stroke:n},r){return Lm(t,e,n&&(i=>n[i]),null,r)}function D4(t,e,{stroke:n,z:r},i){return Lm(t,e,n&&(([a])=>n[a]),r,i)}const Uf=1,Im=2;function I4(t,e){const n=new Uint8Array(e.length),r=t.data().filter(a=>a.length>1),i=r.length;for(let a=0,s=Bf;a<i;++a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=Uf)}}for(let a=i-1,s=Bf;a>=0;--a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=Im)}}return([a])=>n[a]}function Lm(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},a=()=>i,s,f){if(!e&&!n&&!r)return;const c=new Map,u=s&&I4(t,s);function l(h,d,g){return function(p){if(g&&!g(p))return;const m=a(p);let b=c.get(d);b||c.set(d,b=new Map);let y=b.get(m);if(!y){const _=this.parentNode.insertBefore(d(m,f),this),M=`plot-marker-${++N4}`;_.setAttribute("id",M),b.set(m,y=`url(#${M})`)}this.setAttribute(h,y)}}e&&t.each(l("marker-start",e,u&&(h=>u(h)&Uf))),n&&u&&t.each(l("marker-start",n,h=>!(u(h)&Uf))),n&&t.each(l("marker-mid",n)),r&&t.each(l("marker-end",r,u&&(h=>u(h)&Im)))}function Hc({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Om(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Yc({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Om(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Om(t,e,n){return t===void 0&&e===void 0&&n===void 0?oe?[1,0]:[.5,.5]:[e,n]}function Pm(t,{interval:e}){return t={...Oo(t)},t.interval=Cc(t.interval===void 0?e:t.interval),t}function jo(t,e,n,r){const{[t]:i,[`${t}1`]:a,[`${t}2`]:s}=n,{value:f,interval:c}=Pm(i,n);if(f==null||c==null&&!r)return n;const u=Di(i);if(c==null){let g;const p={transform:m=>g||(g=_e(m,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:a===void 0?p:a,[`${t}2`]:s===void 0&&!(a===s&&r)?p:s}}let l,h;function d(g){return h!==void 0&&g===l?h:h=Lt(_e(l=g,f),p=>c.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:a===void 0?{transform:d,label:u}:a,[`${t}2`]:s===void 0?{transform:g=>d(g).map(p=>c.offset(p)),label:u}:s})}function Fm(t,e,n){const{[t]:r}=n,{value:i,interval:a}=Pm(r,n);return i==null||a==null?n:e({...n,[t]:{label:Di(r),transform:s=>{const f=Lt(_e(s,i),u=>a.floor(u)),c=f.map(u=>a.offset(u));return f.map(ve(f)?(u,l)=>u==null||isNaN(u=+u)||(l=c[l],l==null)||isNaN(l=+l)?void 0:new Date((u+l)/2):(u,l)=>u==null||(l=c[l],l==null)?NaN:(+u+ +l)/2)}}})}function L4(t={}){return jo("x",Hc,t,!0)}function $m(t={}){return jo("y",Yc,t,!0)}function O4(t={}){return jo("x",Hc,t)}function P4(t={}){return jo("y",Yc,t)}function F4(t={}){return Fm("x",Hc,t)}function $4(t={}){return Fm("y",Yc,t)}const Rm={ariaLabel:"rule",fill:null,stroke:"currentColor"};class R4 extends ie{constructor(e,n={}){const{x:r,y1:i,y2:a,inset:s=0,insetTop:f=s,insetBottom:c=s}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},jc(n,"x"),Rm),this.insetTop=qt(f),this.insetBottom=qt(c),qo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y1:u,y2:l}=r,{width:h,height:d,marginTop:g,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetTop:y,insetBottom:_}=this;return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s},oe,0).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",c?w=>c[w]:(m+h-p)/2).attr("x2",c?w=>c[w]:(m+h-p)/2).attr("y1",u&&!Tr(f)?w=>u[w]+y:g+y).attr("y2",l&&!Tr(f)?f.bandwidth?w=>l[w]+f.bandwidth()-_:w=>l[w]-_:d-b-_).call(Ce,this,r).call(Vc,this,r,a)).node()}}class B4 extends ie{constructor(e,n={}){const{x1:r,x2:i,y:a,inset:s=0,insetRight:f=s,insetLeft:c=s}=n;super(e,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},jc(n,"y"),Rm),this.insetRight=qt(f),this.insetLeft=qt(c),qo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{y:c,x1:u,x2:l}=r,{width:h,height:d,marginTop:g,marginRight:p,marginLeft:m,marginBottom:b}=i,{insetLeft:y,insetRight:_}=this;return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,{y:c&&f},0,oe).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",u&&!Tr(s)?w=>u[w]+y:m+y).attr("x2",l&&!Tr(s)?s.bandwidth?w=>l[w]+s.bandwidth()-_:w=>l[w]-_:h-p-_).attr("y1",c?w=>c[w]:(g+d-b)/2).attr("y2",c?w=>c[w]:(g+d-b)/2).call(Ce,this,r).call(Vc,this,r,a)).node()}}function Xc(t,e){let{x:n=Me,y:r,y1:i,y2:a,...s}=P4(e);return[i,a]=Bm(r,i,a),new R4(t,{...s,x:n,y1:i,y2:a})}function Gc(t,e){let{y:n=Me,x:r,x1:i,x2:a,...s}=O4(e);return[i,a]=Bm(r,i,a),new B4(t,{...s,y:n,x1:i,x2:a})}function Bm(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Zc(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let a=0;a<n;++a)i+=e[a](r)+t[a+1];return i}}const U4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Um="­";class Jc extends ie{constructor(e,n={}){const{x:r,y:i,text:a=Kn(e)&&Xg(e)?Me:zg,frameAnchor:s,textAnchor:f=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:c=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:u=1,lineWidth:l=1/0,textOverflow:h,monospace:d,fontFamily:g=d?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:b,fontWeight:y,rotate:_}=n,[M,w]=Xt(_,0),[v,S]=H4(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:fw(M),optional:!0},text:{value:a,filter:vc,optional:!0}},n,U4),this.rotate=w,this.textAnchor=Bt(f,"middle"),this.lineAnchor=Ne(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+l,this.textOverflow=zm(h),this.monospace=!!d,this.fontFamily=Yt(g),this.fontSize=S,this.fontStyle=Yt(m),this.fontVariant=Yt(b),this.fontWeight=Yt(y),this.frameAnchor=Fo(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=jm(this),this.clipLine=Wm(this)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,rotate:l,text:h,title:d,fontSize:g}=r,{rotate:p}=this,[m,b]=Ri(this,i);return Ft("svg:g",a).call(De,this,i,a).call(qm,this,h,i).call(Ie,this,{x:c&&s,y:u&&f}).call(y=>y.selectAll().data(e).enter().append("text").call(ce,this).call(z4,this,h,d).attr("transform",Zc`translate(${c?_=>c[_]:m},${u?_=>u[_]:b})${l?_=>` rotate(${l[_]})`:p?` rotate(${p})`:""}`).call(ft,"font-size",g&&(_=>g[_])).call(Ce,this,r)).node()}}function zm(t){return t==null?null:Ne(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function z4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:s,splitLines:f,clipLine:c}=e;t.each(function(u){const l=f(Ar(n[u])??"").map(c),h=l.length,d=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let g=0;for(let p=0;p<h;++p){if(++g,!l[p])continue;const m=this.ownerDocument.createElementNS(ya.svg,"tspan");m.setAttribute("x",0),p===g-1?m.setAttribute("y",`${(d+p)*a}em`):m.setAttribute("dy",`${g*a}em`),m.textContent=l[p],this.appendChild(m),g=0}}else d&&this.setAttribute("y",`${d*a}em`),this.textContent=l[0];if(s&&!r&&l[0]!==n[u]){const g=this.ownerDocument.createElementNS(ya.svg,"title");g.textContent=n[u],this.appendChild(g)}})}function Wo(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ni(e,n)),new Jc(t,{...r,x:e,y:n})}function q4(t,{x:e=Me,...n}={}){return new Jc(t,$4({...n,x:e}))}function j4(t,{y:e=Me,...n}={}){return new Jc(t,F4({...n,y:e}))}function qm(t,e,n){ft(t,"text-anchor",e.textAnchor),ft(t,"font-family",e.fontFamily),ft(t,"font-size",e.fontSize),ft(t,"font-style",e.fontStyle),ft(t,"font-variant",e.fontVariant===void 0?W4(n):e.fontVariant),ft(t,"font-weight",e.fontWeight)}function W4(t){return t&&(lw(t)||ve(t))?"tabular-nums":void 0}const V4=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function H4(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),V4.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function Y4(t,e,n){const r=[];let i,a=0;for(const[s,f,c]of X4(t)){if(i===void 0&&(i=s),a>i&&n(t,i,f)>e&&(r.push(t.slice(i,a)+(t[a-1]===Um?"-":"")),i=s),c){r.push(t.slice(i,f)),i=void 0;continue}a=f}return r}function*X4(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Um:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const rd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Kc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Or(t,i))r+=rd[t[i]]??(Hm(t,i)?120:rd.e);return r}function Qc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Or(t,i))r+=Hm(t,i)?126:63;return r}function jm({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return a=>a.split(/\r\n?|\n/g);const r=t?Qc:Kc,i=e*100;return a=>Y4(a,i,r)}function Wm({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return a=>a;const r=t?Qc:Kc,i=e*100;switch(n){case"clip-start":return a=>ad(a,i,r,"");case"clip-end":return a=>id(a,i,r,"");case"ellipsis-start":return a=>ad(a,i,r,lr);case"ellipsis-middle":return a=>G4(a,i,r,lr);case"ellipsis-end":return a=>id(a,i,r,lr)}}const lr="…";function kr(t,e,n,r){const i=[];let a=0;for(let s=0,f=0,c=t.length;s<c;s=f){f=Or(t,s);const u=n(t,s,f);if(a+u>e){for(a+=r;a>e&&s>0;)f=s,s=i.pop(),a-=n(t,s,f);return[s,e-a]}a+=u,i.push(s)}return[-1,0]}function id(t,e,n,r){t=t.trim();const i=n(r),[a]=kr(t,e,n,i);return a<0?t:t.slice(0,a).trimEnd()+r}function G4(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r)/2,[s,f]=kr(t,e/2,n,a),[c]=kr(t,i-e/2-f+a,n,-a);return c<0?r:t.slice(0,s).trimEnd()+r+t.slice(Or(t,c)).trimStart()}function ad(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r),[s]=kr(t,i-e+a,n,-a);return s<0?r:r+t.slice(Or(t,s)).trimStart()}const zf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,od=/\p{Extended_Pictographic}/uy;function Or(t,e){return e+=Z4(t,e)?2:1,K4(t,e)&&(e=zf.lastIndex),J4(t,e)?Or(t,e+1):e}function Vm(t,e){return t.charCodeAt(e)<128}function Z4(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function J4(t,e){return t.charCodeAt(e)===8205}function K4(t,e){return Vm(t,e)?!1:(zf.lastIndex=e,zf.test(t))}function Hm(t,e){return Vm(t,e)?!1:(od.lastIndex=e,od.test(t))}const Q4={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Ym=3.5,t8=Ym*5,Xm={draw(t,e,n){const r=e*n/t8;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},e8={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},n8=new Map([["arrow",Xm],["spike",e8]]);function r8(t){return t&&typeof t.draw=="function"}function i8(t){if(r8(t))return t;const e=n8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let Gm=class extends ie{constructor(e,n={}){const{x:r,y:i,r:a=Ym,length:s,rotate:f,shape:c=Xm,anchor:u="middle",frameAnchor:l}=n,[h,d]=Xt(s,12),[g,p]=Xt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:g,optional:!0}},n,Q4),this.r=+a,this.length=d,this.rotate=p,this.shape=i8(c),this.anchor=Ne(u,"anchor",["start","middle","end"]),this.frameAnchor=Fo(l)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,length:l,rotate:h}=r,{length:d,rotate:g,anchor:p,shape:m,r:b}=this,[y,_]=Ri(this,i);return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(M=>M.selectAll().data(e).enter().append("path").call(ce,this).attr("transform",Zc`translate(${c?w=>c[w]:y},${u?w=>u[w]:_})${h?w=>` rotate(${h[w]})`:g?` rotate(${g})`:""}${p==="start"?"":p==="end"?l?w=>` translate(0,${l[w]})`:` translate(0,${d})`:l?w=>` translate(0,${l[w]/2})`:` translate(0,${d/2})`}`).attr("d",l?w=>{const v=mn();return m.draw(v,l[w],b),v}:(()=>{const w=mn();return m.draw(w,d,b),w})()).call(Ce,this,r)).node()}};function a8(t,e={}){const{x:n=Me,...r}=e;return new Gm(t,{...r,x:n})}function o8(t,e={}){const{y:n=Me,...r}=e;return new Gm(t,{...r,y:n})}function Dn(t,e){return arguments.length<2&&!Kn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Vo({anchor:t}={},e){return t===void 0?e[0]:Ne(t,"anchor",e)}function Zm(t){return Vo(t,["left","right"])}function Jm(t){return Vo(t,["right","left"])}function Km(t){return Vo(t,["bottom","top"])}function Qm(t){return Vo(t,["top","bottom"])}function Bi(){const[t,e]=Dn(...arguments);return tp("y",Zm(e),t,e)}function s8(){const[t,e]=Dn(...arguments);return tp("fy",Jm(e),t,e)}function Pr(){const[t,e]=Dn(...arguments);return ep("x",Km(e),t,e)}function f8(){const[t,e]=Dn(...arguments);return ep("fx",Qm(e),t,e)}function tp(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:h,textStrokeOpacity:d,textStrokeWidth:g,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:b,x:y,margin:_,marginTop:M=_===void 0?20:_,marginRight:w=_===void 0?e==="right"?40:0:_,marginBottom:v=_===void 0?20:_,marginLeft:S=_===void 0?e==="left"?40:0:_,label:k,labelAnchor:x,labelArrow:E,labelOffset:D,...A}){return p=qt(p),m=qt(m),b=qt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","top","bottom"])),E=cp(E),Am(p&&!Qt(a)?c8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:b,x:y,...A}):null,Qt(c)?null:l8(t,e,n,{fill:c,fillOpacity:u,stroke:h,strokeOpacity:d,strokeWidth:g,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:b,x:y,marginTop:M,marginRight:w,marginBottom:v,marginLeft:S,...A}),!Qt(c)&&k!==null?Wo([],ap({fill:c,fillOpacity:u,...A},function(N,$,R,T,O){const L=T[t],{marginTop:q,marginRight:X,marginBottom:B,marginLeft:U}=t==="y"&&O.inset||O,z=x??(L.bandwidth?"center":"top"),H=D??(e==="right"?X:U)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${e}`,this.rotate=0),this.dy=z==="top"?3-q:z==="bottom"?B-3:0,this.dx=e==="right"?H:-H,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[fp(t,L,{anchor:e,label:k,labelAnchor:z,labelArrow:E})]}}}})):null)}function ep(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:h,textStrokeOpacity:d,textStrokeWidth:g,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:b,y,margin:_,marginTop:M=_===void 0?e==="top"?30:0:_,marginRight:w=_===void 0?20:_,marginBottom:v=_===void 0?e==="bottom"?30:0:_,marginLeft:S=_===void 0?20:_,label:k,labelAnchor:x,labelArrow:E,labelOffset:D,...A}){return p=qt(p),m=qt(m),b=qt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","left","right"])),E=cp(E),Am(p&&!Qt(a)?u8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:b,y,...A}):null,Qt(c)?null:d8(t,e,n,{fill:c,fillOpacity:u,stroke:h,strokeOpacity:d,strokeWidth:g,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:b,y,marginTop:M,marginRight:w,marginBottom:v,marginLeft:S,...A}),!Qt(c)&&k!==null?Wo([],ap({fill:c,fillOpacity:u,...A},function(N,$,R,T,O){const L=T[t],{marginTop:q,marginRight:X,marginBottom:B,marginLeft:U}=t==="x"&&O.inset||O,z=x??(L.bandwidth?"center":"right"),H=D??(e==="top"?q:B)-3;return z==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-H:H,this.dx=z==="right"?X-3:z==="left"?3-U:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[fp(t,L,{anchor:e,label:k,labelAnchor:z,labelArrow:E})]}}}})):null)}function c8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetLeft:l=u,insetRight:h=u,dx:d=0,y:g=t==="y"?void 0:null,...p}){return Fr(o8,t,n,{ariaLabel:`${t}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:s,frameAnchor:f,y:g,...p,dx:e==="left"?+d-oe+ +l:+d+oe-h,anchor:"start",length:c,shape:e==="left"?w8:v8})}function u8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetTop:l=u,insetBottom:h=u,dy:d=0,x:g=t==="x"?void 0:null,...p}){return Fr(a8,t,n,{ariaLabel:`${t}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:s,frameAnchor:f,x:g,...p,dy:e==="bottom"?+d-oe-h:+d+oe+ +l,anchor:"start",length:c,shape:e==="bottom"?y8:_8})}function l8(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>60?4*Math.cos(s*Dm):0),text:c,textAnchor:u=Math.abs(s)>60?"middle":e==="left"?"end":"start",lineAnchor:l=s>60?"top":s<-60?"bottom":"middle",fontVariant:h,inset:d=0,insetLeft:g=d,insetRight:p=d,dx:m=0,y:b=t==="y"?void 0:null,...y}){return Fr(j4,t,n,{ariaLabel:`${t}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:c,textAnchor:u,lineAnchor:l,fontVariant:h,rotate:s,y:b,...y,dx:e==="left"?+m-a-f+ +g:+m+ +a+ +f-p},function(_,M,w,v,S){h===void 0&&(this.fontVariant=sp(_)),c===void 0&&(S.text=op(_,M,w,v,e))})}function d8(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>=10?4*Math.cos(s*Dm):0),text:c,textAnchor:u=Math.abs(s)>=10?s<0^e==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(s)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:d=0,insetTop:g=d,insetBottom:p=d,dy:m=0,x:b=t==="x"?void 0:null,...y}){return Fr(q4,t,n,{ariaLabel:`${t}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:u,lineAnchor:l,fontVariant:h,rotate:s,x:b,...y,dy:e==="bottom"?+m+ +a+ +f-p:+m-a-f+ +g},function(_,M,w,v,S){h===void 0&&(this.fontVariant=sp(_)),c===void 0&&(S.text=op(_,M,w,v,e))})}function h8(){const[t,e]=Dn(...arguments);return np("y",Zm(e),t,e)}function g8(){const[t,e]=Dn(...arguments);return np("fy",Jm(e),t,e)}function m8(){const[t,e]=Dn(...arguments);return rp("x",Km(e),t,e)}function p8(){const[t,e]=Dn(...arguments);return rp("fx",Qm(e),t,e)}function np(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:a=e==="left"?i:null,x2:s=e==="right"?i:null,...f}){return Fr(Gc,t,n,{ariaLabel:`${t}-grid`,ariaHidden:!0},{y:r,x1:a,x2:s,...ip(f)})}function rp(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:a=e==="top"?i:null,y2:s=e==="bottom"?i:null,...f}){return Fr(Xc,t,n,{ariaLabel:`${t}-grid`,ariaHidden:!0},{x:r,y1:a,y2:s,...ip(f)})}function ip({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function ap({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l=!1},h){return[,t]=Hn(t),[,e]=Xt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l,initializer:h}}function Fr(t,e,n,r,i,a){let s;function f(l,h,d,g,p,m){const b=l==null&&(e==="fx"||e==="fy"),{[e]:y}=g;if(!y)throw new Error(`missing scale: ${e}`);const _=y.domain();let{interval:M,ticks:w,tickFormat:v,tickSpacing:S=e==="x"?80:35}=i;if(typeof w=="string"&&up(y)&&(M=w,w=void 0),w===void 0&&(w=Ii(M,y.type)??b8(y,S)),l==null){if(Kn(w))l=An(w);else if(sw(w))l=Ps(w,..._n(_));else if(y.interval){let x=y.interval;if(y.ticks){const[E,D]=_n(_),A=(D-E)/x[Ci];x=Dl(x,A/w)??x,l=Ps(x,E,D)}else{l=_;const E=l.length;x=Dl(x,E/w)??x,x!==y.interval&&(l=Ps(x,..._n(l)))}if(x===y.interval){const E=Math.round(l.length/w);E>1&&(l=l.filter((D,A)=>A%E===0))}}else y.ticks?l=y.ticks(w):l=_;if(!y.ticks&&l.length&&l!==_){const x=new go(_);l=l.filter(E=>x.has(E)),l.length||wn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Cn(l)]:s[e]={scale:e,value:Me}}a==null||a.call(this,y,l,w,v,s);const k=Object.fromEntries(Object.entries(s).map(([x,E])=>[x,{...E,value:_e(l,E.value)}]));return b&&(h=m.filterFacets(l,k)),{data:l,facets:h,channels:k}}const c=xr(i).initializer,u=t(n,xr({...i,initializer:f},c));return n==null?(s=u.channels,u.channels={}):s={},r!==void 0&&Object.assign(u,r),u.clip===void 0&&(u.clip=!1),u}function b8(t,e){const[n,r]=_n(t.range());return(r-n)/e}function op(t,e,n,r,i){return{value:tu(t,e,n,r,i)}}function tu(t,e,n,r,i){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&ve(e)?q3(t.type,e,i)??Ar:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ar:typeof r=="string"?(ve(t.domain())?Ei:Ir)(r):on(r)}function Ps(t,e,n){return t.range(e,t.offset(t.floor(n)))}const y8={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},_8={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},w8={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},v8={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function sp(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function fp(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&up(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const s=k5(e);s&&(a=/x$/.test(t)||i==="center"?/x$/.test(t)===s<0?"left":"right":s<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function cp(t="auto"){return Qt(t)?!1:typeof t=="boolean"?t:Ne(t,"labelArrow",["auto","up","right","down","left"])}function up(t){return ve(t.domain())}function sd(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function M8(t,{opacity:e,...n}={}){if(!Qn(t)&&!wm(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return lp(t,n,(r,i,a,s)=>r.append("svg").attr("width",a).attr("height",s).attr("fill",i.scale).attr("fill-opacity",Xt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function S8(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=t.hint)==null?void 0:l.stroke)()!==void 0?t.hint.stroke:Qt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:s=4.5,...f}={},c){const[h,d]=Hn(e),[g,p]=Hn(r),m=sd(c,h),b=sd(c,g),y=s*s*Math.PI;return n=Xt(n)[1],i=Xt(i)[1],a=Xt(a)[1],lp(t,f,(_,M,w,v)=>_.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",v).attr("fill",h==="color"?S=>m.scale(S):d).attr("fill-opacity",n).attr("stroke",g==="color"?S=>b.scale(S):p).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",S=>{const k=mn();return t.scale(S).draw(k,y),k}))}function lp(t,e={},n){let{columns:r,tickFormat:i,fontVariant:a=Nm(t),swatchSize:s=15,swatchWidth:f=s,swatchHeight:c=s,marginLeft:u=0,className:l,style:h,width:d}=e;const g=Uc(e);l=zo(l),i=tu(t.scale,t.domain,void 0,i);const p=Ft("div",g).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`:where(.${l}-swatches-columns .${l}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${l}-swatches-columns .${l}-swatch::before) {
  flex-shrink: 0;
}
:where(.${l}-swatches-columns .${l}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,t,f,c).call(b=>b.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(m=`:where(.${l}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${l}-swatches-wrap .${l}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,t,f,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(b=>b.insert("style","*").text(`:where(.${l}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${l}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",d===void 0?null:`${+d}px`).style("font-variant",Bt(a,"normal")).call(qc,h).node()}const qf=new Map([["symbol",S8],["color",hp],["opacity",T8]]);function x8(t,e,n={}){return(r,i)=>{if(!qf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return qf.get(r)(t[r],dp(e,n[r],i),a=>t[a])}}function dp({className:t,...e},{label:n,ticks:r,tickFormat:i}={},a){return mw(a,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function hp(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return M8(t,n);case"ramp":return k4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function T8({type:t,interpolate:e,...n},{legend:r=!0,color:i=ba(0,0,0),...a}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return hp({type:t,...n,interpolate:A8(i)},{legend:r,...a})}function A8(t){const{r:e,g:n,b:r}=ba(t)||ba(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function k8(t,e,n){const r=[];for(const[i,a]of qf){const s=n[i];if(s!=null&&s.legend&&i in t){const f=a(t[i],dp(e,t[i],s),c=>t[c]);f!=null&&r.push(f)}}return r}function E8(t={}){return Vg(t)?t:{...t,x:Me}}function C8(t,e){if(e.length===1)return{data:t,facets:e};const n=di(t),r=new Uint8Array(n);let i=0;for(const f of e)for(const c of f)r[c]&&++i,r[c]=1;if(i===0)return{data:t,facets:e};t=li(t);const a=t[Bg]=new Uint32Array(n+i);e=e.map(f=>li(f,Uint32Array));let s=n;r.fill(0);for(const f of e)for(let c=0,u=f.length;c<u;++c){const l=f[c];r[l]?(f[c]=s,t[s]=t[l],a[s]=l,++s):a[l]=l,r[l]=1}return{data:t,facets:e}}function N8(t={},e={}){arguments.length===1&&([t,e]=I8(t));const{y1:n,y:r=n,x:i,...a}=e,[s,f,c,u]=O8(r,i,"y","x",t,a);return{...s,y1:n,y:f,x1:c,x2:u,x:rw(c,u)}}function D8({x:t,x1:e,x2:n,...r}={}){return r=jc(r,"y"),e===void 0&&n===void 0?N8({x:t,...r}):([e,n]=tw(t,e,n),{...r,x1:e,x2:n})}function I8(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const L8={length:!0};function O8(t,e=Y3,n,r,{offset:i,order:a,reverse:s},f){if(e===null)throw new Error(`stack requires ${r}`);const c=Hg(f),[u,l]=nw(t),[h,d]=Nf(e),[g,p]=Nf(e);return h.hint=g.hint=L8,i=P8(i),a=R8(a,i,r),[Lc(f,(m,b,y)=>{({data:m,facets:b}=C8(m,b));const _=t==null?void 0:l(iw(_e(m,t),y==null?void 0:y[n])),M=_e(m,e,Float64Array),w=_e(m,c),v=a&&a(m,_,M,w),S=di(m),k=d(new Float64Array(S)),x=p(new Float64Array(S)),E=[];for(const D of b){const A=_?Array.from(Qf(D,N=>_[N]).values()):[D];if(v)for(const N of A)N.sort(v);for(const N of A){let $=0,R=0;s&&N.reverse();for(const T of N){const O=M[T];O<0?$=x[T]=(k[T]=$)+O:O>0?R=x[T]=(k[T]=R)+O:x[T]=k[T]=R}}E.push(A)}return i&&i(E,k,x,w),{data:m,facets:b}}),u,h,g]}function P8(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return F8;case"center":case"silhouette":return $8;case"wiggle":return mp}throw new Error(`unknown offset: ${t}`)}}function gp(t,e){let n=0,r=0;for(const i of t){const a=e[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function F8(t,e,n){for(const r of t)for(const i of r){const[a,s]=gp(i,n);for(const f of i){const c=1/(s-a||1);e[f]=c*(e[f]-a),n[f]=c*(n[f]-a)}}}function $8(t,e,n){for(const r of t){for(const i of r){const[a,s]=gp(i,n);for(const f of i){const c=(s+a)/2;e[f]-=c,n[f]-=c}}pp(r,e,n)}bp(t,e,n)}function mp(t,e,n,r){for(const i of t){const a=new zn;let s=0;for(const f of i){let c=-1;const u=f.map(g=>Math.abs(n[g]-e[g])),l=f.map(g=>{c=r?r[g]:++c;const p=n[g]-e[g],m=a.has(c)?p-a.get(c):0;return a.set(c,p),m}),h=[0,...M2(l)];for(const g of f)e[g]+=s,n[g]+=s;const d=qn(u);d&&(s-=qn(u,(g,p)=>(l[p]/2+h[p])*g)/d)}pp(i,e,n)}bp(t,e,n)}function pp(t,e,n){const r=Ue(t,i=>Ue(i,a=>e[a]));for(const i of t)for(const a of i)e[a]-=r,n[a]-=r}function bp(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),a=i.map(f=>(Ue(f,c=>e[c])+se(f,c=>n[c]))/2),s=Ue(a);for(let f=0;f<r;f++){const c=s-a[f];for(const u of i[f])e[u]+=c,n[u]+=c}}function R8(t,e,n){if(t===void 0&&e===mp)return fd(qe);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?Ja:qe;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return B8(i);case"z":return U8(i);case"sum":return z8(i);case"appearance":return q8(i);case"inside-out":return fd(i)}return cd(Ug(t))}if(typeof t=="function")return(t.length===1?cd:j8)(t);if(Zn(t))return W8(t);throw new Error(`invalid order: ${t}`)}}function B8(t){return(e,n,r)=>(i,a)=>t(r[i],r[a])}function U8(t){return(e,n,r,i)=>(a,s)=>t(i[a],i[s])}function z8(t){return Ho(t,(e,n,r,i)=>ec(Cn(e),a=>qn(a,s=>r[s]),a=>i[a]))}function q8(t){return Ho(t,(e,n,r,i)=>ec(Cn(e),a=>n[Th(a,s=>r[s])],a=>i[a]))}function fd(t){return Ho(t,(e,n,r,i)=>{const a=Cn(e),s=ec(a,h=>n[Th(h,d=>r[d])],h=>i[h]),f=Qr(a,h=>qn(h,d=>r[d]),h=>i[h]),c=[],u=[];let l=0;for(const h of s)l<0?(l+=f.get(h),c.push(h)):(l-=f.get(h),u.push(h));return u.reverse().concat(c)})}function cd(t){return e=>{const n=_e(e,t);return(r,i)=>qe(n[r],n[i])}}function j8(t){return e=>Zn(e)?(n,r)=>t(e[n],e[r]):(n,r)=>t(e.get(n),e.get(r))}function W8(t){return Ho(qe,()=>t)}function Ho(t,e){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const s=new zn(e(n,r,i,a).map((f,c)=>[f,c]));return(f,c)=>t(s.get(a[f]),s.get(a[c]))}}const V8={ariaLabel:"rect"};class yp extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s}=n;super(e,{x1:{value:r,scale:"x",type:r!=null&&a==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,V8),eu(this,n),nu(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n;let{x1:c,y1:u,x2:l,y2:h}=r;const{marginTop:d,marginRight:g,marginBottom:p,marginLeft:m,width:b,height:y}=i,{projection:_}=a,{insetTop:M,insetRight:w,insetBottom:v,insetLeft:S}=this,{rx:k,ry:x,rx1y1:E,rx1y2:D,rx2y1:A,rx2y2:N}=this;(c||l)&&!_&&Tr(s)&&(c=l=null),(u||h)&&!_&&Tr(f)&&(u=h=null);const $=s!=null&&s.bandwidth?s.bandwidth():0,R=f!=null&&f.bandwidth?f.bandwidth():0;return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,{},0,0).call(T=>T.selectAll().data(e).enter().call(E||D||A||N?O=>O.append("path").call(ce,this).call(ru,c&&l?L=>c[L]+(l[L]<c[L]?-w:S):c?L=>c[L]+S:m+S,u&&h?L=>u[L]+(h[L]<u[L]?-v:M):u?L=>u[L]+M:d+M,c&&l?L=>l[L]-(l[L]<c[L]?-S:w):c?L=>c[L]+$-w:b-g-w,u&&h?L=>h[L]-(h[L]<u[L]?-M:v):u?L=>u[L]+R-v:y-p-v,this).call(Ce,this,r):O=>O.append("rect").call(ce,this).attr("x",c?l?L=>Math.min(c[L],l[L])+S:L=>c[L]+S:m+S).attr("y",u?h?L=>Math.min(u[L],h[L])+M:L=>u[L]+M:d+M).attr("width",c?l?L=>Math.max(0,Math.abs(l[L]-c[L])+$-S-w):$-S-w:b-g-m-w-S).attr("height",u?h?L=>Math.max(0,Math.abs(u[L]-h[L])+R-M-v):R-M-v:y-d-p-M-v).call(ft,"rx",k).call(ft,"ry",x).call(Ce,this,r))).node()}}function eu(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={}){t.insetTop=qt(n),t.insetRight=qt(r),t.insetBottom=qt(i),t.insetLeft=qt(a)}function nu(t,{r:e,rx:n,ry:r,rx1:i=e,ry1:a=e,rx2:s=e,ry2:f=e,rx1y1:c=i!==void 0?+i:a!==void 0?+a:0,rx1y2:u=i!==void 0?+i:f!==void 0?+f:0,rx2y1:l=s!==void 0?+s:a!==void 0?+a:0,rx2y2:h=s!==void 0?+s:f!==void 0?+f:0}={}){c||u||l||h?(t.rx1y1=c,t.rx1y2=u,t.rx2y1=l,t.rx2y2=h):(t.rx=Bt(n,"auto"),t.ry=Bt(r,"auto"))}function ru(t,e,n,r,i,a){const{rx1y1:s,rx1y2:f,rx2y1:c,rx2y2:u}=a;typeof e!="function"&&(e=on(e)),typeof n!="function"&&(n=on(n)),typeof r!="function"&&(r=on(r)),typeof i!="function"&&(i=on(i));const l=Math.max(Math.abs(s+c),Math.abs(f+u)),h=Math.max(Math.abs(s+f),Math.abs(c+u));t.attr("d",d=>{const g=e(d),p=n(d),m=r(d),b=i(d),y=g>m,_=p>b,M=y?m:g,w=y?g:m,v=_?b:p,S=_?p:b,k=Math.min(1,(w-M)/l,(S-v)/h),x=k*(y?_?u:c:_?f:s),E=k*(y?_?f:s:_?u:c),D=k*(y?_?s:f:_?c:u),A=k*(y?_?c:u:_?s:f);return`M${M},${v+Qi(x,A)}A${x},${x} 0 0 ${x<0?0:1} ${M+Ki(x,A)},${v}H${w-Ki(E,D)}A${E},${E} 0 0 ${E<0?0:1} ${w},${v+Qi(E,D)}V${S-Qi(D,E)}A${D},${D} 0 0 ${D<0?0:1} ${w-Ki(D,E)},${S}H${M+Ki(A,x)}A${A},${A} 0 0 ${A<0?0:1} ${M},${S-Qi(A,x)}Z`})}function Ki(t,e){return e<0?t:Math.abs(t)}function Qi(t,e){return e<0?Math.abs(t):t}function H8(t,e){return new yp(t,L4($m(e)))}function iu(t,e={}){return Q3(e)||(e={...e,y:zg,x2:Me,interval:1}),new yp(t,D8($m(E8(e))))}const Y8={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},X8={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class G8 extends ie{constructor(e={}){const{anchor:n=null}=e;super(ha,void 0,e,n==null?Y8:X8),this.anchor=Wg(n,"anchor",["top","right","bottom","left"]),eu(this,e),n||nu(this,e)}render(e,n,r,i,a){const{marginTop:s,marginRight:f,marginBottom:c,marginLeft:u,width:l,height:h}=i,{anchor:d,insetTop:g,insetRight:p,insetBottom:m,insetLeft:b}=this,{rx:y,ry:_,rx1y1:M,rx1y2:w,rx2y1:v,rx2y2:S}=this,k=u+b,x=l-f-p,E=s+g,D=h-c-m;return Ft(d?"svg:line":M||w||v||S?"svg:path":"svg:rect",a).datum(0).call(De,this,i,a).call(ce,this).call(Ce,this,r).call(Ie,this,{}).call(d==="left"?A=>A.attr("x1",k).attr("x2",k).attr("y1",E).attr("y2",D):d==="right"?A=>A.attr("x1",x).attr("x2",x).attr("y1",E).attr("y2",D):d==="top"?A=>A.attr("x1",k).attr("x2",x).attr("y1",E).attr("y2",E):d==="bottom"?A=>A.attr("x1",k).attr("x2",x).attr("y1",D).attr("y2",D):M||w||v||S?A=>A.call(ru,k,E,x,D,this):A=>A.attr("x",k).attr("y",E).attr("width",x-k).attr("height",D-E).attr("rx",y).attr("ry",_)).node()}}function _p(t){return new G8(t)}const Fs={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Z8=new Set(["geometry","href","src","ariaLabel","scales"]);class J8 extends ie{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Kn(e)&&Xg(e)&&(n={...n,title:Me});const{x:r,y:i,x1:a,x2:s,y1:f,y2:c,anchor:u,preferredAnchor:l="bottom",monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:p,fontVariant:m,fontWeight:b,lineHeight:y=1,lineWidth:_=20,frameAnchor:M,format:w,textAnchor:v="start",textOverflow:S,textPadding:k=8,title:x,pointerSize:E=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:a!=null&&s!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:s==null},y1:{value:f,scale:"y",optional:c==null},x2:{value:s,scale:"x",optional:a==null},y2:{value:c,scale:"y",optional:f==null},title:{value:x,optional:!0}},n,Fs),this.anchor=Df(u,"anchor"),this.preferredAnchor=Df(l,"preferredAnchor"),this.frameAnchor=Fo(M),this.textAnchor=Bt(v,"middle"),this.textPadding=+k,this.pointerSize=+E,this.pathFilter=Yt(D),this.lineHeight=+y,this.lineWidth=+_,this.textOverflow=zm(S),this.monospace=!!h,this.fontFamily=Yt(d),this.fontSize=qt(g),this.fontStyle=Yt(p),this.fontVariant=Yt(m),this.fontWeight=Yt(b);for(const A in Fs)A in this.channels&&(this[A]=Fs[A]);this.splitLines=jm(this),this.clipLine=Wm(this),this.format=typeof w=="string"||typeof w=="function"?{title:w}:{...w}}render(e,n,r,i,a){const s=this,{x:f,y:c,fx:u,fy:l}=n,{ownerSVGElement:h,document:d}=a,{anchor:g,monospace:p,lineHeight:m,lineWidth:b}=this,{textPadding:y,pointerSize:_,pathFilter:M}=this,{marginTop:w,marginLeft:v}=i,{x1:S,y1:k,x2:x,y2:E,x:D=S??x,y:A=k??E}=r,N=u?u(e.fx)-v:0,$=l?l(e.fy)-w:0,[R,T]=Ri(this,i),O=Em(r,R),L=Cm(r,T),q=p?Qc:Kc,X=q(lr);let B,U;"title"in r?(B=ud.call(this,{title:r.channels.title},n),U=n7):(B=ud.call(this,r.channels,n),U=r7);const z=Ft("svg:g",a).call(De,this,i,a).call(qm,this).call(Ie,this,{x:D&&f,y:A&&c}).call(tt=>tt.selectAll().data(e).enter().append("g").attr("transform",nt=>`translate(${Math.round(O(nt))},${Math.round(L(nt))})`).call(ce,this).call(nt=>nt.append("path").attr("filter",M)).call(nt=>nt.append("text").each(function(j){const Q=Ht(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const F=U.call(s,j,e,B,n,r);if(typeof F=="string")for(const Y of s.splitLines(F))H(Q,{value:s.clipLine(Y)});else{const Y=new Set;for(const G of F){const{label:P=""}=G;P&&Y.has(P)||(Y.add(P),H(Q,G))}}})));function H(tt,{label:nt,value:j,color:Q,opacity:F}){nt??(nt=""),j??(j="");const Y=Q!=null||F!=null;let G,P=b*100;const[mt]=kr(nt,P,q,X);if(mt>=0)nt=nt.slice(0,mt).trimEnd()+lr,G=j.trim(),j="";else{(nt||!j&&!Y)&&(j=" "+j);const[yt]=kr(j,P-q(nt),q,X);yt>=0&&(G=j.trim(),j=j.slice(0,yt).trimEnd()+lr)}const rt=tt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");nt&&rt.append("tspan").attr("font-weight","bold").text(nt),j&&rt.append(()=>d.createTextNode(j)),Y&&rt.append("tspan").text(" ■").attr("fill",Q).attr("fill-opacity",F).style("user-select","none"),G&&rt.append("title").text(G)}function I(){const{width:tt,height:nt}=i.facet??i;z.selectChildren().each(function(j){let{x:Q,width:F,height:Y}=this.getBBox();F=Math.round(F),Y=Math.round(Y);let G=g;if(G===void 0){const rt=O(j)+N,yt=L(j)+$,St=rt+F+_+y*2<tt,Z=rt-F-_-y*2>0,wt=yt+Y+_+y*2<nt,ae=yt-Y-_-y*2>0;G=St&&Z?wt&&ae?s.preferredAnchor:ae?"bottom":"top":wt&&ae?St?"left":"right":(St||Z)&&(wt||ae)?`${ae?"bottom":"top"}-${St?"left":"right"}`:s.preferredAnchor}const P=this.firstChild,mt=this.lastChild;if(P.setAttribute("d",e7(G,_,y,F,Y)),Q)for(const rt of mt.childNodes)rt.setAttribute("x",-Q);mt.setAttribute("y",`${+Q8(G,mt.childNodes.length,m).toFixed(6)}em`),mt.setAttribute("transform",`translate(${t7(G,_,y,F,Y)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(I):typeof requestAnimationFrame<"u"&&requestAnimationFrame(I)),z.node()}}function K8(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ni(e,n)),new J8(t,{...r,x:e,y:n})}function Q8(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function t7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function e7(t,e,n,r,i){const a=r+n*2,s=i+n*2;switch(t){case"middle":return`M${-a/2},${-s/2}h${a}v${s}h${-a}z`;case"top-left":return`M0,0l${e},${e}h${a-e}v${s}h${-a}z`;case"top":return`M0,0l${e/2},${e/2}h${(a-e)/2}v${s}h${-a}v${-s}h${(a-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-a}v${s}h${a}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-s/2}h${-a}v${s}h${a}v${e/2-s/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${a-e}v${-s}h${-a}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(a-e)/2}v${-s}h${-a}v${s}h${(a-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-a}v${-s}h${a}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-s/2}h${a}v${s}h${-a}v${e/2-s/2}z`}}function ud(t,e){var i,a;const n={};let r=this.format;r=ld(r,t,"x"),r=ld(r,t,"y"),this.format=r;for(const s in r){const f=r[s];if(!(f===null||f===!1))if(s==="fx"||s==="fy")n[s]=!0;else{const c=Bl(t,s);c&&(n[s]=c)}}for(const s in t){if(s in n||s in r||Z8.has(s)||(s==="x"||s==="y")&&t.geometry)continue;const f=Bl(t,s);if(f){if(f.scale==null&&f.defaultScale==="color")continue;n[s]=f}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const s in n){const f=this.format[s];if(typeof f=="string"){const c=((i=n[s])==null?void 0:i.value)??((a=e[s])==null?void 0:a.domain())??[];this.format[s]=(ve(c)?Ei:Ir)(f)}else if(f===void 0||f===!0){const c=e[s];this.format[s]=c!=null&&c.bandwidth?tu(c,c.domain()):Ar}}return n}function ld(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const a=Object.entries(t),s=t[n];return a.splice(a.findIndex(([f])=>f===n)+1,0,[r,s],[i,s]),Object.fromEntries(a)}function n7(t,e,{title:n}){return this.format.title(n.value[t],t)}function*r7(t,e,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Qa(r,n,a),value:this.format[a](e[a],t)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const s=n[a];if(a==="x2"&&"x1"in n)yield{label:hd(r,n,"x"),value:dd(this.format.x2,n.x1,s,t)};else if(a==="y2"&&"y1"in n)yield{label:hd(r,n,"y"),value:dd(this.format.y2,n.y1,s,t)};else{const f=s.value[t],c=s.scale;if(!Tn(f)&&c==null)continue;yield{label:Qa(r,n,a),value:this.format[a](f,t),color:c==="color"?i[a][t]:null,opacity:c==="opacity"?i[a][t]:null}}}}function dd(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}–${t(n.value[r],r)}`}function hd(t,e,n){const r=Qa(t,e,`${n}1`,n),i=Qa(t,e,`${n}2`,n);return r===i?r:`${r}–${i}`}function Qa(t,e,n,r=n){const i=e[n],a=t[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function wp(t={}){var X;const{facet:e,style:n,title:r,subtitle:i,caption:a,ariaLabel:s,ariaDescription:f}=t,c=zo(t.className),u=t.marks===void 0?[]:md(t.marks);u.push(...u7(u));const l=f7(e,t),h=new Map;for(const B of u){const U=pd(B,l,t);U&&h.set(B,U)}const d=new Map;l&&jr(d,[l],t),jr(d,h,t);const g=md(l7(u,d,t));for(const B of g){const U=pd(B,l,t);U&&h.set(B,U)}u.unshift(...g);let p=O5(d,t);if(p!==void 0){const B=l?Ds(p,l):void 0;for(const z of u){if(z.facet===null||z.facet==="super")continue;const H=h.get(z);H!==void 0&&(H.facetsIndex=z.fx!=null||z.fy!=null?Ds(p,H):B)}const U=new Set;for(const{facetsIndex:z}of h.values())z==null||z.forEach((H,I)=>{(H==null?void 0:H.length)>0&&U.add(I)});p.forEach(0<U.size&&U.size<p.length?(z,H)=>z.empty=!U.has(H):z=>z.empty=!1);for(const z of u)if(z.facet==="exclude"){const H=h.get(z);H!==void 0&&(H.facetsIndex=$5(H.facetsIndex))}}for(const B of kt.keys())Ka(t[B])&&B!=="fx"&&B!=="fy"&&d.set(B,[]);const m=new Map;for(const B of u){if(m.has(B))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:z}=h.get(B)??{},{data:H,facets:I,channels:tt}=B.initialize(U,z,t);au(tt,t),m.set(B,{data:H,facets:I,channels:tt})}const b=Pf(jr(d,m,t),t),y=S4(b,u,t);T5(b,y);const _=Hl(b),{fx:M,fy:w}=_,v=M||w?pm(b,y):y,S=M||w?y7(_,y):y,k=Uc(t),x=k.document,E=dh("svg").call(x.documentElement);let D=E;k.ownerSVGElement=E,k.className=c,k.projection=H5(t,v),k.filterFacets=(B,U)=>Ds(p,{channels:U,groups:Bc(B,U)}),k.getMarkState=B=>{const U=m.get(B),z=h.get(B);return{...U,channels:{...U.channels,...z==null?void 0:z.channels}}},k.dispatchValue=B=>{D.value!==B&&(D.value=B,D.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[B,U]of m)if(B.initializer!=null){const z=B.facet==="super"?S:v,H=B.initializer(U.data,U.facets,U.channels,_,z,k);if(H.data!==void 0&&(U.data=H.data),H.facets!==void 0&&(U.facets=H.facets),H.channels!==void 0){const{fx:I,fy:tt,...nt}=H.channels;s7(nt),Object.assign(U.channels,nt);for(const j of Object.values(nt)){const{scale:Q}=j;Q!=null&&!yw(kt.get(Q))&&(vp(j,t),A.add(Q))}(I!=null||tt!=null)&&h.set(B,!0)}}if(A.size){const B=new Map;jr(B,m,t,I=>A.has(I)),jr(d,m,t,I=>A.has(I));const U=b7(Pf(B,t),b),{scales:z,...H}=Hl(U);Object.assign(b,U),Object.assign(_,H),Object.assign(_.scales,z)}let N,$;p!==void 0&&(N={x:M==null?void 0:M.domain(),y:w==null?void 0:w.domain()},p=P5(p,N),$=F5(M,w,y));for(const[B,U]of m)U.values=B.scale(U.channels,_,k);const{width:R,height:T}=y;Ht(E).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",R).attr("height",T).attr("viewBox",`0 0 ${R} ${T}`).attr("aria-label",s).attr("aria-description",f).call(B=>B.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(qc,n);for(const B of u){const{channels:U,values:z,facets:H}=m.get(B);if(p===void 0||B.facet==="super"){let I=null;if(H&&(I=H[0],I=B.filter(I,U,z),I.length===0))continue;const tt=B.render(I,_,z,S,k);if(tt==null)continue;E.appendChild(tt)}else{let I;for(const tt of p){if(!(((X=B.facetAnchor)==null?void 0:X.call(B,p,N,tt))??!tt.empty))continue;let nt=null;if(H){const Q=h.has(B);if(nt=H[Q?tt.i:0],nt=B.filter(nt,U,z),nt.length===0)continue;!Q&&nt===H[0]&&(nt=ew(nt)),nt.fx=tt.x,nt.fy=tt.y,nt.fi=tt.i}const j=B.render(nt,_,z,v,k);if(j!=null){(I??(I=Ht(E).append("g"))).append(()=>j).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])j.hasAttribute(Q)&&(I.attr(Q,j.getAttribute(Q)),j.removeAttribute(Q))}}I==null||I.selectChildren().attr("transform",$)}}const O=k8(b,k,t),{figure:L=r!=null||i!=null||a!=null||O.length>0}=t;L&&(D=x.createElement("figure"),D.className=`${c}-figure`,D.style.maxWidth="initial",r!=null&&D.append(gd(x,r,"h2")),i!=null&&D.append(gd(x,i,"h3")),D.append(...O,E),a!=null&&D.append(i7(x,a)),"value"in E&&(D.value=E.value,delete E.value)),D.scale=L5(_.scales),D.legend=x8(b,k,t);const q=f5();return q>0&&Ht(E).append("text").attr("x",R).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${q.toLocaleString("en-US")} warning${q===1?"":"s"}. Please check the console.`),D}function gd(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function i7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function md(t){return t.flat(1/0).filter(e=>e!=null).map(a7)}function a7(t){return typeof t.render=="function"?t:new o7(t)}class o7 extends ie{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function au(t,e){for(const n in t)vp(t[n],e);return t}function vp(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:a,interval:s,transform:f=a?c=>c==null?NaN:c*100:Yg(s,i)}=e[n]??{};f!=null&&(t.value=Lt(t.value,f),t.transform=!1)}function s7(t){for(const e in t)nm(e,t[e])}function jr(t,e,n,r=X3){var i,a;for(const{channels:s}of e.values())for(const f in s){const c=s[f],{scale:u}=c;if(u!=null&&r(u))if(u==="projection"){if(!Z5(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,h=((a=n.y)==null?void 0:a.domain)===void 0;if(l||h){const[d,g]=K5(c);l&&$s(t,"x",d),h&&$s(t,"y",g)}}}else $s(t,u,c)}return t}function $s(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function f7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Mr(t.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=gi(i,{value:n,scale:"fx"})),r!=null&&(a.fy=gi(i,{value:r,scale:"fy"})),au(a,e);const s=Bc(i,a);return{channels:a,groups:s,data:t.data}}function pd(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const c=Mr(t.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=gi(c,{value:r,scale:"fx"})),i!=null&&(u.fy=gi(c,{value:i,scale:"fy"})),au(u,n),{channels:u,groups:Bc(c,u)}}if(e===void 0)return;const{channels:a,groups:s,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:a,groups:s};f.length>0&&(s.size>1||s.size===1&&a.fx&&a.fy&&[...s][0][1].size>1)&&di(Mr(t.data))===di(f)&&wn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function c7(t,e={}){return xr({...e,x:null,y:null},(n,r,i,a,s,f)=>f.getMarkState(t))}function u7(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?A4:/^y$/i.test(i)?td:T4,r=i(c7(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===td?"left":"bottom");const s=K8(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,e.push(s)}}return e}function l7(t,e,n){let{projection:r,x:i={},y:a={},fx:s={},fy:f={},axis:c,grid:u,facet:l={},facet:{axis:h=c,grid:d}=l,x:{axis:g=c,grid:p=g===null?null:u}=i,y:{axis:m=c,grid:b=m===null?null:u}=a,fx:{axis:y=h,grid:_=y===null?null:d}=s,fy:{axis:M=h,grid:w=M===null?null:d}=f}=n;(r||!Ka(i)&&!bd("x",t))&&(g=p=null),(r||!Ka(a)&&!bd("y",t))&&(m=b=null),e.has("fx")||(y=_=null),e.has("fy")||(M=w=null),g===void 0&&(g=!na(t,"x")),m===void 0&&(m=!na(t,"y")),y===void 0&&(y=!na(t,"fx")),M===void 0&&(M=!na(t,"fy")),g===!0&&(g="bottom"),m===!0&&(m="left"),y===!0&&(y=g==="top"||g===null?"bottom":"top"),M===!0&&(M=m==="right"||m===null?"left":"right");const v=[];return ea(v,w,g8,f),ta(v,M,s8,"right","left",l,f),ea(v,_,p8,s),ta(v,y,f8,"top","bottom",l,s),ea(v,b,h8,a),ta(v,m,Bi,"left","right",n,a),ea(v,p,m8,i),ta(v,g,Pr,"bottom","top",n,i),v}function ta(t,e,n,r,i,a,s){if(!e)return;const f=d7(e);s=h7(f?r:e,a,s);const{line:c}=s;(n===Bi||n===Pr)&&c&&!hi(c)&&t.push(_p(g7(s))),t.push(n(s)),f&&t.push(n({...s,anchor:i,label:null}))}function ea(t,e,n,r){!e||hi(e)||t.push(n(m7(e,r)))}function d7(t){return/^\s*both\s*$/i.test(t)}function h7(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:h,label:d=e.label,labelAnchor:g,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:h,label:d,labelAnchor:g,labelArrow:p,labelOffset:m}}function g7(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function m7(t,{stroke:e=Po(t)?t:void 0,ticks:n=p7(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function p7(t){switch(typeof t){case"number":return!0;case"string":return!Po(t)}return Kn(t)||typeof(t==null?void 0:t.range)=="function"}function na(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function bd(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function b7(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function y7({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=Rc(n),u=t&&yd(t),l=e&&yd(e);return{marginTop:e?l[0]:r,marginRight:t?f-u[1]:i,marginBottom:e?c-l[1]:a,marginLeft:t?u[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:c}}function yd(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const _7=new Map([["basis",_3],["basis-closed",w3],["basis-open",v3],["bundle",M3],["bump-x",f3],["bump-y",c3],["cardinal",S3],["cardinal-closed",x3],["cardinal-open",T3],["catmull-rom",A3],["catmull-rom-closed",k3],["catmull-rom-open",E3],["linear",Eo],["linear-closed",C3],["monotone-x",N3],["monotone-y",D3],["natural",I3],["step",L3],["step-after",P3],["step-before",O3]]);function w7(t=Eo,e){if(typeof t=="function")return t;const n=_7.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function Mp(t=Er,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Er:w7(t,e)}function Er(t){return Eo(t)}const v7={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class M7 extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s,curve:f,tension:c}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,v7),this.curve=Mp(f,c),qo(this,n)}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x1:s,y1:f,x2:c=s,y2:u=f}=r,{curve:l}=this;return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(ce,this).attr("d",l===Er&&a.projection?S7(a.projection,s,f,c,u):d=>{const g=mn(),p=l(g);return p.lineStart(),p.point(s[d],f[d]),p.point(c[d],u[d]),p.lineEnd(),g}).call(Ce,this,r).call(Vc,this,r,a)).node()}}function S7(t,e,n,r,i){const a=yi(t);return e=yn(e),n=yn(n),r=yn(r),i=yn(i),s=>a({type:"LineString",coordinates:[[e[s],n[s]],[r[s],i[s]]]})}function jf(t,{x:e,x1:n,x2:r,y:i,y1:a,y2:s,...f}={}){return[n,r]=_d(e,n,r),[a,s]=_d(i,a,s),new M7(t,{...f,x1:n,x2:r,y1:a,y2:s})}function _d(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const x7={ariaLabel:"bar"};class T7 extends ie{constructor(e,n,r={},i=x7){super(e,n,r,i),eu(this,r),nu(this,r)}render(e,n,r,i,a){const{rx:s,ry:f,rx1y1:c,rx1y2:u,rx2y1:l,rx2y2:h}=this,d=this._x(n,r,i),g=this._y(n,r,i),p=this._width(n,r,i),m=this._height(n,r,i);return Ft("svg:g",a).call(De,this,i,a).call(this._transform,this,n).call(b=>b.selectAll().data(e).enter().call(c||u||l||h?y=>y.append("path").call(ce,this).call(ru,d,g,wd(d,p),wd(g,m),this).call(Ce,this,r):y=>y.append("rect").call(ce,this).attr("x",d).attr("width",p).attr("y",g).attr("height",m).call(ft,"rx",s).call(ft,"ry",f).call(Ce,this,r))).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:s,insetRight:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:s,insetBottom:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}}function wd(t,e){return typeof t=="function"&&typeof e=="function"?n=>t(n)+e(n):typeof t=="function"?n=>t(n)+e:typeof e=="function"?n=>t+e(n):t+e}const A7={ariaLabel:"cell"};class k7 extends T7{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,A7)}_transform(e,n){e.call(Ie,n,{},0,0)}}function E7(t,{x:e,y:n,...r}={}){return[e,n]=Ni(e,n),new k7(t,{...r,x:e,y:n})}const C7={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function N7(t){return t.sort===void 0&&t.reverse===void 0?Aw({channel:"-r"},t):t}class D7 extends ie{constructor(e,n={}){const{x:r,y:i,r:a,rotate:s,symbol:f=ui,frameAnchor:c}=n,[u,l]=Xt(s,0),[h,d]=xw(f),[g,p]=Xt(a,h==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:g,scale:"r",filter:Do,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},N7(n),C7),this.r=p,this.rotate=l,this.symbol=d,this.frameAnchor=Fo(c);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:y,stroke:_}=m;b.hint={fill:y?y.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:_?_.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,r:l,rotate:h,symbol:d}=r,{r:g,rotate:p,symbol:m}=this,[b,y]=Ri(this,i),_=m===ui,M=l?void 0:g*g*Math.PI;return Mc(g)&&(e=[]),Ft("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(w=>w.selectAll().data(e).enter().append(_?"circle":"path").call(ce,this).call(_?v=>{v.attr("cx",c?S=>c[S]:b).attr("cy",u?S=>u[S]:y).attr("r",l?S=>l[S]:g)}:v=>{v.attr("transform",Zc`translate(${c?S=>c[S]:b},${u?S=>u[S]:y})${h?S=>` rotate(${h[S]})`:p?` rotate(${p})`:""}`).attr("d",l&&d?S=>{const k=mn();return d[S].draw(k,l[S]*l[S]*Math.PI),k}:l?S=>{const k=mn();return m.draw(k,l[S]*l[S]*Math.PI),k}:d?S=>{const k=mn();return d[S].draw(k,M),k}:(()=>{const S=mn();return m.draw(S,M),S})())}).call(Ce,this,r)).node()}}function I7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ni(e,n)),new D7(t,{...r,x:e,y:n})}function L7(t,e){return I7(t,{...e,symbol:"circle"})}const O7={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let P7=class extends ie{constructor(e,n={}){const{x:r,y:i,z:a,curve:s,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:Hg(n),optional:!0}},n,O7),this.z=a,this.curve=Mp(s,f),qo(this,n)}filter(e){return e}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x:s,y:f}=r,{curve:c}=this;return Ft("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(u=>u.selectAll().data(m4(e,[s,f],this,r)).enter().append("path").call(ce,this).call(d4,this,r).call(D4,this,r,a).attr("d",c===Er&&a.projection?F7(a.projection,s,f):s3().curve(c).defined(l=>l>=0).x(l=>s[l]).y(l=>f[l]))).node()}};function F7(t,e,n){const r=yi(t);return e=yn(e),n=yn(n),i=>{let a=[];const s=[a];for(const f of i)f===-1?(a=[],s.push(a)):a.push([e[f],n[f]]);return r({type:"MultiLineString",coordinates:s})}}function $7(t,{x:e,y:n,...r}={}){return[e,n]=Ni(e,n),new P7(t,{...r,x:e,y:n})}ie.prototype.plot=function({marks:t=[],...e}={}){return wp({...e,marks:[...t,this]})};function R7(t,e={}){if(!t||t.length===0)return[];let n=vn(t[0]),r=e.include?e.include:n;r=pa(e.include||n,e.exclude||[]);let i=pa(n,r);return console.log(r,i),ph(a=>r.map(s=>{let f=f2(i,a);return f[e.key||"key"]=s,f[e.value||"value"]=a[s],f}),t)}class B7{add(e,n,r){let i=`${r.view.id}::${r.eventname}`;return Dt(this[i])?this[i]={iact:r,oldVal:e,newVal:n}:this[i].newVal=n,console.log("WriteSet.add",i,this[i]),this}forEach(e){Ln(this).forEach(e)}merge(e){if(Dt(e))return this;e.forEach(({iact:n,oldVal:r,newVal:i})=>{this.add(r,i,n)})}}const gn=Jt(Array),vd=()=>null;function dr(t,e,n){if(Jt(String,e))t[e]=n;else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]={}),Kt(i)?dr(t,r,n):dr(t[r],i,n)}}function to(t,e,n){if(Jt(String,e))Dt(t[e])&&(t[e]=[]),t[e].push(n);else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]=Kt(i)?[]:{}),Kt(i)?to(t,r,n):to(t[r],i,n)}}function dn(t,e,n){if(Jt(String,e))return t[e]||(Jt(Function,n)?n():n);if(gn(e)){let[r,...i]=e;return Dt(t[r])?Jt(Function,n)?n():n:Kt(i)?dn(t,r,n):dn(t[r],i,n)}}class U7{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(e,n,r=vd,i){if(!e.attr)return this;let a=e.view.id,s=e.eventname;return to(this.dependencies,[a,s],{view:n,domainfunction:r}),to(this.view2iacts,n.id,e),this.setDefault(n,i),this}dependentViews(e){let n=e.eventname;return dn(this.dependencies,[e.view.id,n],[])}cmp(e,n){return this.isDependentOn(e.view,n)?1:this.isDependentOn(n.view,e)?-1:0}isDependentOn(e,n){let r=this.getAncestorIacts(e);return mh(i=>(i.store??i)==n,r)}setDefault(e,n){return Dt(n)||(this.defaults[e.id]=n),this}getDefault(e,n){return(dn(this.defaults,e.id)??vd)(n,this.getAncestorIacts(e))}getAncestorIacts(e){let n=[];return dn(this.view2iacts,e.id,[]).forEach(r=>{n.push(r),n=_a(n,this.getAncestorIacts(r.view))}),n}getStatesKey(e){let n=this.getAncestorIacts(e),r=_a([e.id],n.map(i=>[i.id,i.val()]));return console.debug("ancestorStates",r,JSON.stringify(r)),JSON.stringify(r)}saveState(e,n,r){let i=this.getStatesKey(n.view);!Dt(r)&&Dt(r.states[i])&&dr(r.states,[i,n.eventname],{old:dn(this.states,[i,n.eventname]),iact:n}),console.debug("saveState",i,n.eventname,dn(this.states,[i,n.eventname]),e),dr(this.states,[i,n.eventname],e)}restoreStates(e){tn((n,r)=>{tn(({iact:i,old:a},s)=>{console.debug("restoreState",r,i.eventname,a),dr(this.states,[r,i.eventname],a)},n)},e.states)}getState(e,n,r=!0){let i=this.getStatesKey(e);return Dt(n)?this.states[i]:dn(this.states,[i,n],()=>r?this.getDefault(e,n):void 0)}}class Xv{constructor(e){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new U7,this.transactions=[],this._isaborting=!1,this.backends=e,this._iactid=0,this._xid=0;const n=r=>i=>this.backends.createBackend({...i,type:r});this.backend=r=>this.backends.createBackend(r),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(e){if(this.views[e.id]=e,gn(e)){e.forEach(n=>this.view(n));return}this.interactions[e.id]=this.interactions[e.id]??{_attrs:{}},e.magic=this,tn((n,r)=>{if(!Dt(this.interactions[e.id][r]))return;let i=a=>{e.load(o,event)};Object.assign(n,{start:(...a)=>this.start(n,...a),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>Xo(n)??{},load:i,id:this._iactid++,view:e,eventname:r,isActive:!1}),n.get=(a,s=null)=>{if(!Dt(this.interactions[e.id]._attrs[a]))return this.interactions[e.id]._attrs[a];let f={store:n,attr:a,view:e,eventname:r,load:i,default:s,id:this._iactid++,val:()=>{let c=Xo(n);return wa(a)(c)?c[a]:(Kt(c)||console.error("could not find attr:",vn(Xo(n)).length),Jt(Function,s)?s():s)},start:()=>this.start(f),end:()=>this.end(f),abort:()=>this.abort(f)};return this.interactions[e.id]._attrs[a]=f,f},this.interactions[e.id][r]=n},e.interactions)}render(e,n,r,i={}){return e=gn(e)?e:[e],n=gn(n)?n:[n],e.map(s=>{if(Jt(lb,s))return s;let f=this.backend.identity();return this.connect(f,s),f}).forEach(s=>{n.forEach(f=>s.registerView(f,r,i))}),this}saveBackends(e){console.debug("save backends invoked on: ",e),e=gn(e)?e:[e],e.forEach(n=>{n.registerView((r,i)=>{console.debug("saveBackend",this,n,r,i),tn((a,s)=>{tn((f,c)=>{f.forEach(u=>{console.debug("saveBackend.DependencyLeaf.ViewIact",u.view.id,this.i2b[u.view.id]);let l=this.dependencies.getAncestorIacts(u.view),h=_a([n.id],l.map(d=>[d.id,d.val()]));Kt(n2(vn(this.i2b[u.view.id]),n.id))||(console.debug("saveBackend.View",n.id,u.view.id),this.dependencies.viewData[h]=r)})},a)},this.dependencies.dependencies)})})}connect(e,n,r){var s;if(gn(n)){n.forEach(f=>this.connect(e,f,r));return}let i=n,a=i.view;Dt(this.i2b[a.id])&&(i.subscribe(f=>{console.log("iact.subscribe.handleEvent",a.id,i.id),this.handleEvent(f,i)}),i.store?i.store.isActive=!0:i.isActive=!0,(s=a.registerInteraction)==null||s.call(a,i),this.i2b[a.id]={}),Dt(e)||dr(this.i2b,[a.id,e.id],this.processBindings(r))}processBindings(e){if(Dt(e)||Kt(e))return js;if(Jt(Function,e))return e;let n=xu(Hb(Jt(Array),Jt(Object)),Sn(r=>this.processBindings(r)),xu(Jt(Function),js,r=>()=>r))(e);return wa("*",e)?r=>db(r,Su(n)(r)):Su(n)}saveIactState(e,n,r){this.dependencies.saveState(e,n,r),this.dependencies.dependentViews(n).forEach(({view:i,domainfunction:a})=>{if(a){let f=this.dependencies.getAncestorIacts(i);i.render(a(e,f))}let s=this.dependencies.getState(i);tn((f,c)=>{f=f??this.dependencies.getDefault(i,c),f&&(console.debug("saveIactState.load",i.id,c,f),i.load(f,c))},s),(Dt(s)||Kt(s))&&(console.debug("saveIactState.load.default",i.id),i.load(this.dependencies.getDefault(i)))})}handleEvent(e,n){if(!Dt(e))if(console.log("handleEvent",this._isaborting,n.view.id,e),this._isaborting)this.dependencies.saveState(e,n,null),this.sendEventToBackends(e,n);else if(this.transactions.length==0||Jo(this.transactions).iact!=n)n.start(),this.handleEvent(e,n),n.end();else{let r=Jo(this.transactions),i=this.dependencies.getState(n.view,n.eventname,!1);r.writeSet.add(i,e,n),r.visible&&this.sendEventToBackends(e,n)}}sendEventToBackends(e,n){tn((r,i)=>{let a=r(e);this.backends[i].execute(a,n)},this.i2b[n.view.id])}snapshot(){return i2(e=>e.snapshot(),this.backends)}restoreSnapshot(e){tn((n,r)=>{Dt(n)||this.backends[r].restoreSnapshot(n)},e.snapshot)}start(e,n=!0){this.transactions.push({xid:this._xid++,iact:e,visible:n,snapshot:this.snapshot(),states:{},writeSet:new B7}),console.log("magic.start",this.transactions)}end(e){if(!mh(a=>a.iact=e,this.transactions)){console.log("magic.end: can't find interaction",e);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:a,iact:s})=>{this.saveIactState(a,s,n),n.visible||this.sendEventToBackends(a,s)});let r=Ln(n.writeSet).map(({iact:a})=>a.id),i=ph(a=>Ln(a).map(({iact:s})=>s.id),Ln(n.states));if(Kt(d2(r,i))||console.error("writeset != statesids",r,i),this.transactions.length>0){let a=Jo(this.transactions);a.snapshot=vu(a.snapshot,n.snapshot),a.states=vu(a.states,n.states),a.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(e){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",hb(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),u2((i,a)=>this.dependencies.cmp(i.iact,a.iact),Ln(n.writeSet)).forEach(({iact:i})=>{let a=this.dependencies.getState(i.view,i.eventname);a&&i.view.load&&(console.log("magic.abort.load",a,i),i.view.load(a,i.eventname))})}finally{this._isaborting=!1}}importState(e){let n=JSON.parse(e);this.dependencies.states=n,tn((r,i)=>{let a=this.views[i];this.walkViews(a)},this.dependencies.dependencies)}walkViews(e){let n=this.dependencies.getStatesKey(e),r=this.dependencies.states[n],i=Ln(r);if(i.length>1){console.error("unexpected behavior, multiple values for state");return}e.load(i[0])}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const eo="_theplot_",z7={top:30,right:20,bottom:50,left:40};function Yo(t,e){t.className=t.className||eo,Dt(t.width);let n=wp(t),r=null;return n.tagName=="svg"&&n.classList.contains(t.className)?r=n:r=n.querySelector(`svg.${t.className}`),r.classList.add(eo),t.width||r.setAttribute("width","100%"),t.height||r.setAttribute("height","100%"),e.innerHTML="",e.appendChild(n),n}class ou{constructor({iact:e,magic:n,plot:r=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=e,this.magic=n,this.plot=r,r&&this.init(r)}load(e){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!e||Kt(e)){this.el.call(this.brush.clear);return}const{left:n,right:r}=e;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(r)])}}brushed({selection:e}){if(this.iact.isActive)if(!e)this.iact.set(this.defaultSelection);else{const[n,r]=e;this.iact.set({left:this.x.invert(n),right:this.x.invert(r)})}}brushstart({selection:e,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:e,sourceEvent:n}){this.iact.isActive&&(e||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(e){if(!this.iact.isActive)return;if(this.plot=e,this.x=e.scale("x"),this.y=e.scale("y"),this.y.range[0]<this.y.range[1]){let r=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=r}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=e.classList.contains(eo)?Ht(e):Ht(e.querySelector(`.${eo}`));this.brush=my().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",r=>this.brushed(r)).on("start",r=>this.brushstart(r)).on("end",r=>this.brushended(r)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function q7(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(V),i.forEach(V),this.h()},h(){W(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[15](n)},p(r,[i]){i&1&&W(e,"id",r[0])},i:It,o:It,d(r){r&&V(e),t[15](null)}}}function j7(t,e,n){let{id:r,name:i,magic:a,description:s,xAttr:f,yAttr:c,xDomainMin:u=null,xDomainMax:l=null,brushX:h=ee({}),interactions:d={brushX:h}}=e,g,p=null,m={},b=[],y;const _=["#93c1cf","#feb144","#9ee09e","#ff6663"];function M(x,E){return E==="overlay"?(m=x,!0):!1}function w(x,E){!x||x.length===0||typeof E=="object"||(M(x,E)?console.debug("overlays"):b=x,S())}let{load:v=x=>y==null?void 0:y.load(x)}=e;function S(){n(2,u=u??Ue(Sn(Ws(f),b))),n(3,l=l??se(Sn(Ws(f),b)));const x=Math.max(36,Math.min(b.length,20));let E={x:{domain:[+u,+l]},height:200,marginBottom:50,color:{range:_,legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[Pr({ticks:x,fontSize:10}),Bi({fontSize:10}),Xc([u]),Gc([0]),iu(m,{x1:"left",x2:"right",y2:se(Jf(c,b)),fill:"key",color:"key"}),$7(b,{x:f,y:c,marker:!0,strokeWidth:3})]};p=Yo(E,g),h.isActive&&(y=y??new ou({iact:h,magic:a}),y.init(p))}function k(x){Nr[x?"unshift":"push"](()=>{g=x,n(1,g)})}return t.$$set=x=>{"id"in x&&n(4,r=x.id),"name"in x&&n(0,i=x.name),"magic"in x&&n(5,a=x.magic),"description"in x&&n(6,s=x.description),"xAttr"in x&&n(7,f=x.xAttr),"yAttr"in x&&n(8,c=x.yAttr),"xDomainMin"in x&&n(2,u=x.xDomainMin),"xDomainMax"in x&&n(3,l=x.xDomainMax),"brushX"in x&&n(9,h=x.brushX),"interactions"in x&&n(10,d=x.interactions),"load"in x&&n(13,v=x.load)},[i,g,u,l,r,a,s,f,c,h,d,M,w,v,S,k]}class Gv extends We{constructor(e){super(),Ve(this,e,j7,q7,He,{id:4,name:0,magic:5,description:6,xAttr:7,yAttr:8,xDomainMin:2,xDomainMax:3,brushX:9,interactions:10,overlay:11,render:12,load:13,update:14})}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),J()}get description(){return this.$$.ctx[6]}set description(e){this.$$set({description:e}),J()}get xAttr(){return this.$$.ctx[7]}set xAttr(e){this.$$set({xAttr:e}),J()}get yAttr(){return this.$$.ctx[8]}set yAttr(e){this.$$set({yAttr:e}),J()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get brushX(){return this.$$.ctx[9]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[10]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[11]}get render(){return this.$$.ctx[12]}get load(){return this.$$.ctx[13]}set load(e){this.$$set({load:e}),J()}get update(){return this.$$.ctx[14]}}function Md(t){return Object.prototype.toString.call(t)==="[object Date]"}function Wf(t,e,n,r){if(typeof n=="number"||Md(n)){const i=r-n,a=(n-e)/(t.dt||1/60),s=t.opts.stiffness*i,f=t.opts.damping*a,c=(s-f)*t.inv_mass,u=(a+c)*t.dt;return Math.abs(u)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,Md(n)?new Date(n.getTime()+u):n+u)}else{if(Array.isArray(n))return n.map((i,a)=>Wf(t,e[a],n[a],r[a]));if(typeof n=="object"){const i={};for(const a in n)i[a]=Wf(t,e[a],n[a],r[a]);return i}else throw new Error(`Cannot spring ${typeof n} values`)}}function W7(t,e={}){const n=ee(t),{stiffness:r=.15,damping:i=.8,precision:a=.01}=e;let s,f,c,u=t,l=t,h=1,d=0,g=!1;function p(b,y={}){l=b;const _=c={};return t==null||y.hard||m.stiffness>=1&&m.damping>=1?(g=!0,s=uu(),u=b,n.set(t=l),Promise.resolve()):(y.soft&&(d=1/((y.soft===!0?.5:+y.soft)*60),h=0),f||(s=uu(),g=!1,f=Wp(M=>{if(g)return g=!1,f=null,!1;h=Math.min(h+d,1);const w={inv_mass:h,opts:m,settled:!0,dt:(M-s)*60/1e3},v=Wf(w,u,t,l);return s=M,u=t,n.set(t=v),w.settled&&(f=null),!w.settled})),new Promise(M=>{f.promise.then(()=>{_===c&&M()})}))}const m={set:p,update:(b,y)=>p(b(l,t),y),subscribe:n.subscribe,stiffness:r,damping:i,precision:a};return m}function Sd(t,e,n){const r=t.slice();return r[37]=e[n],r[39]=n,r}function xd(t){let e,n,r,i,a=(t[6]==="label"||t[7]==="label")&&Td(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(V),this.h()},h(){W(e,"class","pip first"),W(e,"style",n=t[14]+": 0%;"),at(e,"selected",t[18](t[0])),at(e,"in-range",t[17](t[0]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[30]),vt(e,"pointerup",t[31])],r=!0)},p(s,f){s[6]==="label"||s[7]==="label"?a?a.p(s,f):(a=Td(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 0%;")&&W(e,"style",n),f[0]&262145&&at(e,"selected",s[18](s[0])),f[0]&131073&&at(e,"in-range",s[17](s[0]))},d(s){s&&V(e),a&&a.d(),r=!1,kn(i)}}}function Td(t){let e,n,r,i=t[12](t[16](t[0]),0,0)+"",a,s=t[10]&&Ad(t),f=t[11]&&kd(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(V),this.h()},h(){r.a=a,W(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Ad(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&69633&&i!==(i=c[12](c[16](c[0]),0,0)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=kd(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&V(e),s&&s.d(),f&&f.d()}}}function Ad(t){let e,n;return{c(){e=ot("span"),n=jt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[10]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&V(e)}}}function kd(t){let e,n;return{c(){e=ot("span"),n=jt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[11]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&V(e)}}}function Ed(t){let e,n=Array(t[20]+1),r=[];for(let i=0;i<n.length;i+=1)r[i]=Ld(Sd(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Nt()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);e=Nt()},m(i,a){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,a);pt(i,e,a)},p(i,a){if(a[0]&8314435){n=Array(i[20]+1);let s;for(s=0;s<n.length;s+=1){const f=Sd(i,n,s);r[s]?r[s].p(f,a):(r[s]=Ld(f),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){co(r,i),i&&V(e)}}}function Cd(t){let e,n,r,i,a,s=(t[6]==="label"||t[9]==="label")&&Nd(t);function f(...c){return t[33](t[39],...c)}return{c(){e=ot("span"),s&&s.c(),n=Gt(),this.h()},l(c){e=st(c,"SPAN",{class:!0,style:!0});var u=ct(e);s&&s.l(u),n=Zt(u),u.forEach(V),this.h()},h(){W(e,"class","pip"),W(e,"style",r=t[14]+": "+t[15](t[19](t[39]))+"%;"),at(e,"selected",t[18](t[19](t[39]))),at(e,"in-range",t[17](t[19](t[39])))},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),i||(a=[vt(e,"pointerdown",t[32]),vt(e,"pointerup",f)],i=!0)},p(c,u){t=c,t[6]==="label"||t[9]==="label"?s?s.p(t,u):(s=Nd(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&573440&&r!==(r=t[14]+": "+t[15](t[19](t[39]))+"%;")&&W(e,"style",r),u[0]&786432&&at(e,"selected",t[18](t[19](t[39]))),u[0]&655360&&at(e,"in-range",t[17](t[19](t[39])))},d(c){c&&V(e),s&&s.d(),i=!1,kn(a)}}}function Nd(t){let e,n,r,i=t[12](t[19](t[39]),t[39],t[15](t[19](t[39])))+"",a,s=t[10]&&Dd(t),f=t[11]&&Id(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(V),this.h()},h(){r.a=a,W(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Dd(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&561152&&i!==(i=c[12](c[19](c[39]),c[39],c[15](c[19](c[39])))+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Id(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&V(e),s&&s.d(),f&&f.d()}}}function Dd(t){let e,n;return{c(){e=ot("span"),n=jt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[10]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&V(e)}}}function Id(t){let e,n;return{c(){e=ot("span"),n=jt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[11]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&V(e)}}}function Ld(t){let e=t[19](t[39])!==t[0]&&t[19](t[39])!==t[1],n,r=e&&Cd(t);return{c(){r&&r.c(),n=Nt()},l(i){r&&r.l(i),n=Nt()},m(i,a){r&&r.m(i,a),pt(i,n,a)},p(i,a){a[0]&524291&&(e=i[19](i[39])!==i[0]&&i[19](i[39])!==i[1]),e?r?r.p(i,a):(r=Cd(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&V(n)}}}function Od(t){let e,n,r,i,a=(t[6]==="label"||t[8]==="label")&&Pd(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(V),this.h()},h(){W(e,"class","pip last"),W(e,"style",n=t[14]+": 100%;"),at(e,"selected",t[18](t[1])),at(e,"in-range",t[17](t[1]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[34]),vt(e,"pointerup",t[35])],r=!0)},p(s,f){s[6]==="label"||s[8]==="label"?a?a.p(s,f):(a=Pd(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 100%;")&&W(e,"style",n),f[0]&262146&&at(e,"selected",s[18](s[1])),f[0]&131074&&at(e,"in-range",s[17](s[1]))},d(s){s&&V(e),a&&a.d(),r=!1,kn(i)}}}function Pd(t){let e,n,r,i=t[12](t[16](t[1]),t[20],100)+"",a,s=t[10]&&Fd(t),f=t[11]&&$d(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(V),this.h()},h(){r.a=a,W(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Fd(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&1118210&&i!==(i=c[12](c[16](c[1]),c[20],100)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=$d(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&V(e),s&&s.d(),f&&f.d()}}}function Fd(t){let e,n;return{c(){e=ot("span"),n=jt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[10]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&V(e)}}}function $d(t){let e,n;return{c(){e=ot("span"),n=jt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[11]),i.forEach(V),this.h()},h(){W(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&V(e)}}}function V7(t){let e,n,r,i=(t[6]&&t[7]!==!1||t[7])&&xd(t),a=(t[6]&&t[9]!==!1||t[9])&&Ed(t),s=(t[6]&&t[8]!==!1||t[8])&&Od(t);return{c(){e=ot("div"),i&&i.c(),n=Gt(),a&&a.c(),r=Gt(),s&&s.c(),this.h()},l(f){e=st(f,"DIV",{class:!0});var c=ct(e);i&&i.l(c),n=Zt(c),a&&a.l(c),r=Zt(c),s&&s.l(c),c.forEach(V),this.h()},h(){W(e,"class","rangePips"),at(e,"disabled",t[5]),at(e,"hoverable",t[4]),at(e,"vertical",t[2]),at(e,"reversed",t[3]),at(e,"focus",t[13])},m(f,c){pt(f,e,c),i&&i.m(e,null),et(e,n),a&&a.m(e,null),et(e,r),s&&s.m(e,null)},p(f,c){f[6]&&f[7]!==!1||f[7]?i?i.p(f,c):(i=xd(f),i.c(),i.m(e,n)):i&&(i.d(1),i=null),f[6]&&f[9]!==!1||f[9]?a?a.p(f,c):(a=Ed(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),f[6]&&f[8]!==!1||f[8]?s?s.p(f,c):(s=Od(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null),c[0]&32&&at(e,"disabled",f[5]),c[0]&16&&at(e,"hoverable",f[4]),c[0]&4&&at(e,"vertical",f[2]),c[0]&8&&at(e,"reversed",f[3]),c[0]&8192&&at(e,"focus",f[13])},i:It,o:It,d(f){f&&V(e),i&&i.d(),a&&a.d(),s&&s.d()}}}function H7(t,e,n){let r,i,a,s,f,{range:c=!1}=e,{min:u=0}=e,{max:l=100}=e,{step:h=1}=e,{values:d=[(l+u)/2]}=e,{vertical:g=!1}=e,{reversed:p=!1}=e,{hoverable:m=!0}=e,{disabled:b=!1}=e,{pipstep:y=void 0}=e,{all:_=!0}=e,{first:M=void 0}=e,{last:w=void 0}=e,{rest:v=void 0}=e,{prefix:S=""}=e,{suffix:k=""}=e,{formatter:x=(I,tt,nt)=>I}=e,{focus:E=void 0}=e,{orientationStart:D=void 0}=e,{percentOf:A=void 0}=e,{moveHandle:N=void 0}=e,{fixFloat:$=void 0}=e,{normalisedClient:R=void 0}=e,T;function O(I){I=R(I),T={x:I.clientX,y:I.clientY}}function L(I,tt){if(tt=R(tt),!b){const nt=Math.sqrt(Math.pow(T.x-tt.clientX,2)+Math.pow(T.y-tt.clientY,2));T&&nt<=5&&N(void 0,I)}}const q=I=>{O(I)},X=I=>{L(u,I)},B=I=>{O(I)},U=(I,tt)=>{L(a(I),tt)},z=I=>{O(I)},H=I=>{L(l,I)};return t.$$set=I=>{"range"in I&&n(23,c=I.range),"min"in I&&n(0,u=I.min),"max"in I&&n(1,l=I.max),"step"in I&&n(24,h=I.step),"values"in I&&n(25,d=I.values),"vertical"in I&&n(2,g=I.vertical),"reversed"in I&&n(3,p=I.reversed),"hoverable"in I&&n(4,m=I.hoverable),"disabled"in I&&n(5,b=I.disabled),"pipstep"in I&&n(26,y=I.pipstep),"all"in I&&n(6,_=I.all),"first"in I&&n(7,M=I.first),"last"in I&&n(8,w=I.last),"rest"in I&&n(9,v=I.rest),"prefix"in I&&n(10,S=I.prefix),"suffix"in I&&n(11,k=I.suffix),"formatter"in I&&n(12,x=I.formatter),"focus"in I&&n(13,E=I.focus),"orientationStart"in I&&n(14,D=I.orientationStart),"percentOf"in I&&n(15,A=I.percentOf),"moveHandle"in I&&n(27,N=I.moveHandle),"fixFloat"in I&&n(16,$=I.fixFloat),"normalisedClient"in I&&n(28,R=I.normalisedClient)},t.$$.update=()=>{t.$$.dirty[0]&83886087&&n(29,r=y||((l-u)/h>=(g?50:100)?(l-u)/(g?10:20):1)),t.$$.dirty[0]&553648131&&n(20,i=parseInt((l-u)/(h*r),10)),t.$$.dirty[0]&553713665&&n(19,a=function(I){return $(u+I*h*r)}),t.$$.dirty[0]&33619968&&n(18,s=function(I){return d.some(tt=>$(tt)===$(I))}),t.$$.dirty[0]&41943040&&n(17,f=function(I){if(c==="min")return d[0]>I;if(c==="max")return d[0]<I;if(c)return d[0]<I&&d[1]>I})},[u,l,g,p,m,b,_,M,w,v,S,k,x,E,D,A,$,f,s,a,i,O,L,c,h,d,y,N,R,r,q,X,B,U,z,H]}class Y7 extends We{constructor(e){super(),Ve(this,e,H7,V7,He,{range:23,min:0,max:1,step:24,values:25,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:26,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:27,fixFloat:16,normalisedClient:28},null,[-1,-1])}}function Rd(t,e,n){const r=t.slice();return r[65]=e[n],r[67]=n,r}function Bd(t){let e,n,r,i=t[21](t[65],t[67],t[24](t[65]))+"",a,s=t[18]&&Ud(t),f=t[19]&&zd(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(V),this.h()},h(){r.a=a,W(e,"class","rangeFloat")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[18]?s?s.p(c,u):(s=Ud(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&18874369&&i!==(i=c[21](c[65],c[67],c[24](c[65]))+"")&&r.p(i),c[19]?f?f.p(c,u):(f=zd(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&V(e),s&&s.d(),f&&f.d()}}}function Ud(t){let e,n;return{c(){e=ot("span"),n=jt(t[18]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[18]),i.forEach(V),this.h()},h(){W(e,"class","rangeFloat-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&262144&&ue(n,r[18])},d(r){r&&V(e)}}}function zd(t){let e,n;return{c(){e=ot("span"),n=jt(t[19]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Wt(i,t[19]),i.forEach(V),this.h()},h(){W(e,"class","rangeFloat-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&524288&&ue(n,r[19])},d(r){r&&V(e)}}}function qd(t){let e,n,r,i,a,s,f,c,u,l,h,d,g,p=t[7]&&Bd(t);return{c(){e=ot("span"),n=ot("span"),r=Gt(),p&&p.c(),this.h()},l(m){e=st(m,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var b=ct(e);n=st(b,"SPAN",{class:!0}),ct(n).forEach(V),r=Zt(b),p&&p.l(b),b.forEach(V),this.h()},h(){W(n,"class","rangeNub"),W(e,"role","slider"),W(e,"class","rangeHandle"),W(e,"data-handle",t[67]),W(e,"style",i=t[29]+": "+t[30][t[67]]+"%; z-index: "+(t[27]===t[67]?3:2)+";"),W(e,"aria-label",a=t[22][t[67]]),W(e,"aria-valuemin",s=t[2]===!0&&t[67]===1?t[0][0]:t[3]),W(e,"aria-valuemax",f=t[2]===!0&&t[67]===0?t[0][1]:t[4]),W(e,"aria-valuenow",c=t[65]),W(e,"aria-valuetext",u=""+(t[18]+Hd(t[21](t[65],t[67],t[24](t[65])))+t[19])),W(e,"aria-orientation",l=t[6]?"vertical":"horizontal"),W(e,"aria-disabled",t[10]),W(e,"disabled",t[10]),W(e,"tabindex",h=t[10]?-1:0),at(e,"active",t[25]&&t[27]===t[67]),at(e,"press",t[26]&&t[27]===t[67])},m(m,b){pt(m,e,b),et(e,n),et(e,r),p&&p.m(e,null),d||(g=[vt(e,"blur",t[35]),vt(e,"focus",t[36]),vt(e,"keydown",t[37])],d=!0)},p(m,b){m[7]?p?p.p(m,b):(p=Bd(m),p.c(),p.m(e,null)):p&&(p.d(1),p=null),b[0]&1744830464&&i!==(i=m[29]+": "+m[30][m[67]]+"%; z-index: "+(m[27]===m[67]?3:2)+";")&&W(e,"style",i),b[0]&4194304&&a!==(a=m[22][m[67]])&&W(e,"aria-label",a),b[0]&13&&s!==(s=m[2]===!0&&m[67]===1?m[0][0]:m[3])&&W(e,"aria-valuemin",s),b[0]&21&&f!==(f=m[2]===!0&&m[67]===0?m[0][1]:m[4])&&W(e,"aria-valuemax",f),b[0]&1&&c!==(c=m[65])&&W(e,"aria-valuenow",c),b[0]&19660801&&u!==(u=""+(m[18]+Hd(m[21](m[65],m[67],m[24](m[65])))+m[19]))&&W(e,"aria-valuetext",u),b[0]&64&&l!==(l=m[6]?"vertical":"horizontal")&&W(e,"aria-orientation",l),b[0]&1024&&W(e,"aria-disabled",m[10]),b[0]&1024&&W(e,"disabled",m[10]),b[0]&1024&&h!==(h=m[10]?-1:0)&&W(e,"tabindex",h),b[0]&167772160&&at(e,"active",m[25]&&m[27]===m[67]),b[0]&201326592&&at(e,"press",m[26]&&m[27]===m[67])},d(m){m&&V(e),p&&p.d(),d=!1,kn(g)}}}function jd(t){let e,n;return{c(){e=ot("span"),this.h()},l(r){e=st(r,"SPAN",{class:!0,style:!0}),ct(e).forEach(V),this.h()},h(){W(e,"class","rangeBar"),W(e,"style",n=t[29]+": "+t[33](t[30])+"%; "+t[28]+": "+t[34](t[30])+"%;")},m(r,i){pt(r,e,i)},p(r,i){i[0]&1879048192&&n!==(n=r[29]+": "+r[33](r[30])+"%; "+r[28]+": "+r[34](r[30])+"%;")&&W(e,"style",n)},d(r){r&&V(e)}}}function Wd(t){let e,n;return e=new Y7({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[29],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[25],percentOf:t[24],moveHandle:t[32],fixFloat:t[31],normalisedClient:ga}}),{c(){nh(e.$$.fragment)},l(r){rh(e.$$.fragment,r)},m(r,i){ih(e,r,i),n=!0},p(r,i){const a={};i[0]&1&&(a.values=r[0]),i[0]&8&&(a.min=r[3]),i[0]&16&&(a.max=r[4]),i[0]&32&&(a.step=r[5]),i[0]&4&&(a.range=r[2]),i[0]&64&&(a.vertical=r[6]),i[0]&256&&(a.reversed=r[8]),i[0]&536870912&&(a.orientationStart=r[29]),i[0]&512&&(a.hoverable=r[9]),i[0]&1024&&(a.disabled=r[10]),i[0]&8192&&(a.all=r[13]),i[0]&16384&&(a.first=r[14]),i[0]&32768&&(a.last=r[15]),i[0]&65536&&(a.rest=r[16]),i[0]&4096&&(a.pipstep=r[12]),i[0]&262144&&(a.prefix=r[18]),i[0]&524288&&(a.suffix=r[19]),i[0]&1048576&&(a.formatter=r[20]),i[0]&33554432&&(a.focus=r[25]),i[0]&16777216&&(a.percentOf=r[24]),e.$set(a)},i(r){n||(Kr(e.$$.fragment,r),n=!0)},o(r){ma(e.$$.fragment,r),n=!1},d(r){ah(e,r)}}}function X7(t){let e,n,r,i,a,s,f=t[0],c=[];for(let h=0;h<f.length;h+=1)c[h]=qd(Rd(t,f,h));let u=t[2]&&jd(t),l=t[11]&&Wd(t);return{c(){e=ot("div");for(let h=0;h<c.length;h+=1)c[h].c();n=Gt(),u&&u.c(),r=Gt(),l&&l.c(),this.h()},l(h){e=st(h,"DIV",{id:!0,role:!0,class:!0});var d=ct(e);for(let g=0;g<c.length;g+=1)c[g].l(d);n=Zt(d),u&&u.l(d),r=Zt(d),l&&l.l(d),d.forEach(V),this.h()},h(){W(e,"id",t[17]),W(e,"role","none"),W(e,"class","rangeSlider"),at(e,"range",t[2]),at(e,"disabled",t[10]),at(e,"hoverable",t[9]),at(e,"vertical",t[6]),at(e,"reversed",t[8]),at(e,"focus",t[25]),at(e,"min",t[2]==="min"),at(e,"max",t[2]==="max"),at(e,"pips",t[11]),at(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(h,d){pt(h,e,d);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);et(e,n),u&&u.m(e,null),et(e,r),l&&l.m(e,null),t[51](e),i=!0,a||(s=[vt(window,"mousedown",t[40]),vt(window,"touchstart",t[40]),vt(window,"mousemove",t[41]),vt(window,"touchmove",t[41]),vt(window,"mouseup",t[42]),vt(window,"touchend",t[43]),vt(window,"keydown",t[44]),vt(e,"mousedown",t[38]),vt(e,"mouseup",t[39]),vt(e,"touchstart",lu(t[38])),vt(e,"touchend",lu(t[39]))],a=!0)},p(h,d){if(d[0]&1869350109|d[1]&112){f=h[0];let g;for(g=0;g<f.length;g+=1){const p=Rd(h,f,g);c[g]?c[g].p(p,d):(c[g]=qd(p),c[g].c(),c[g].m(e,n))}for(;g<c.length;g+=1)c[g].d(1);c.length=f.length}h[2]?u?u.p(h,d):(u=jd(h),u.c(),u.m(e,r)):u&&(u.d(1),u=null),h[11]?l?(l.p(h,d),d[0]&2048&&Kr(l,1)):(l=Wd(h),l.c(),Kr(l,1),l.m(e,null)):l&&(Vp(),ma(l,1,1,()=>{l=null}),Hp()),(!i||d[0]&131072)&&W(e,"id",h[17]),(!i||d[0]&4)&&at(e,"range",h[2]),(!i||d[0]&1024)&&at(e,"disabled",h[10]),(!i||d[0]&512)&&at(e,"hoverable",h[9]),(!i||d[0]&64)&&at(e,"vertical",h[6]),(!i||d[0]&256)&&at(e,"reversed",h[8]),(!i||d[0]&33554432)&&at(e,"focus",h[25]),(!i||d[0]&4)&&at(e,"min",h[2]==="min"),(!i||d[0]&4)&&at(e,"max",h[2]==="max"),(!i||d[0]&2048)&&at(e,"pips",h[11]),(!i||d[0]&122880)&&at(e,"pip-labels",h[13]==="label"||h[14]==="label"||h[15]==="label"||h[16]==="label")},i(h){i||(Kr(l),i=!0)},o(h){ma(l),i=!1},d(h){h&&V(e),co(c,h),u&&u.d(),l&&l.d(),t[51](null),a=!1,kn(s)}}}function Vd(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function ga(t){return t.type.includes("touch")?t.touches[0]||t.changedTouches[0]:t}function Hd(t){return`${t}`.replace(/<[^>]*>/g,"")}function G7(t,e,n){let r,i,a,s,f,c,u=It,l=()=>(u(),u=Fn(Y,C=>n(30,c=C)),Y);t.$$.on_destroy.push(()=>u());let{slider:h=void 0}=e,{range:d=!1}=e,{pushy:g=!1}=e,{min:p=0}=e,{max:m=100}=e,{step:b=1}=e,{values:y=[(m+p)/2]}=e,{vertical:_=!1}=e,{float:M=!1}=e,{reversed:w=!1}=e,{hoverable:v=!0}=e,{disabled:S=!1}=e,{pips:k=!1}=e,{pipstep:x=void 0}=e,{all:E=void 0}=e,{first:D=void 0}=e,{last:A=void 0}=e,{rest:N=void 0}=e,{id:$=void 0}=e,{prefix:R=""}=e,{suffix:T=""}=e,{formatter:O=(C,K,xt)=>C}=e,{handleFormatter:L=O}=e,{ariaLabels:q=[]}=e,{precision:X=2}=e,{springValues:B={stiffness:.15,damping:.4}}=e;const U=Yp();let z=0,H=!1,I=!1,tt=!1,nt=!1,j=y.length-1,Q,F,Y;const G=C=>parseFloat((+C).toFixed(X));function P(C){const K=h.querySelectorAll(".handle"),xt=Array.prototype.includes.call(K,C),Tt=Array.prototype.some.call(K,Xe=>Xe.contains(C));return xt||Tt}function mt(C){return d==="min"||d==="max"?C.slice(0,1):d?C.slice(0,2):C}function rt(){return h.getBoundingClientRect()}function yt(C){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=C.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=C.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(m-p)/100*Tt+p;let cu;return d===!0&&y[0]===y[1]?Xe>y[1]?1:0:(cu=y.indexOf([...y].sort((qp,jp)=>Math.abs(Xe-qp)-Math.abs(Xe-jp))[0]),cu)}function St(C){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=C.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=C.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(m-p)/100*Tt+p,Z(j,Xe)}function Z(C,K){return K=a(K),typeof C>"u"&&(C=j),d&&(C===0&&K>y[1]?g?n(0,y[1]=K,y):K=y[1]:C===1&&K<y[0]&&(g?n(0,y[0]=K,y):K=y[0])),y[C]!==K&&n(0,y[C]=K,y),F!==K&&(Up(),F=K),K}function wt(C){return d==="min"?0:C[0]}function ae(C){return d==="max"?0:d==="min"?100-C[0]:100-C[1]}function Le(C){nt&&(n(25,H=!1),I=!1,n(26,tt=!1))}function Np(C){S||(n(27,j=Vd(C.target)),n(25,H=!0))}function Dp(C){if(!S){const K=Vd(C.target);let xt=C.ctrlKey||C.metaKey||C.shiftKey?b*10:b,Tt=!1;switch(C.key){case"PageDown":xt*=10;case"ArrowRight":case"ArrowUp":Z(K,y[K]+xt),Tt=!0;break;case"PageUp":xt*=10;case"ArrowLeft":case"ArrowDown":Z(K,y[K]-xt),Tt=!0;break;case"Home":Z(K,p),Tt=!0;break;case"End":Z(K,m),Tt=!0;break}Tt&&(C.preventDefault(),C.stopPropagation())}}function Ip(C){if(!S){const K=C.target,xt=ga(C);n(25,H=!0),I=!0,n(26,tt=!0),n(27,j=yt(xt)),Q=F=a(y[j]),Bp(),C.type==="touchstart"&&!K.matches(".pipVal")&&St(xt)}}function Lp(C){C.type==="touchend"&&fu(),n(26,tt=!1)}function Op(C){nt=!1,H&&C.target!==h&&!h.contains(C.target)&&n(25,H=!1)}function Pp(C){S||I&&St(ga(C))}function Fp(C){if(!S){const K=C.target;I&&((K===h||h.contains(K))&&(n(25,H=!0),!P(K)&&!K.matches(".pipVal")&&St(ga(C))),fu())}I=!1,n(26,tt=!1)}function $p(C){I=!1,n(26,tt=!1)}function Rp(C){S||(C.target===h||h.contains(C.target))&&(nt=!0)}function Bp(){!S&&U("start",{activeHandle:j,value:Q,values:y.map(C=>a(C))})}function fu(){!S&&U("stop",{activeHandle:j,startValue:Q,value:y[j],values:y.map(C=>a(C))})}function Up(){!S&&U("change",{activeHandle:j,startValue:Q,previousValue:typeof F>"u"?Q:F,value:y[j],values:y.map(C=>a(C))})}function zp(C){Nr[C?"unshift":"push"](()=>{h=C,n(1,h)})}return t.$$set=C=>{"slider"in C&&n(1,h=C.slider),"range"in C&&n(2,d=C.range),"pushy"in C&&n(45,g=C.pushy),"min"in C&&n(3,p=C.min),"max"in C&&n(4,m=C.max),"step"in C&&n(5,b=C.step),"values"in C&&n(0,y=C.values),"vertical"in C&&n(6,_=C.vertical),"float"in C&&n(7,M=C.float),"reversed"in C&&n(8,w=C.reversed),"hoverable"in C&&n(9,v=C.hoverable),"disabled"in C&&n(10,S=C.disabled),"pips"in C&&n(11,k=C.pips),"pipstep"in C&&n(12,x=C.pipstep),"all"in C&&n(13,E=C.all),"first"in C&&n(14,D=C.first),"last"in C&&n(15,A=C.last),"rest"in C&&n(16,N=C.rest),"id"in C&&n(17,$=C.id),"prefix"in C&&n(18,R=C.prefix),"suffix"in C&&n(19,T=C.suffix),"formatter"in C&&n(20,O=C.formatter),"handleFormatter"in C&&n(21,L=C.handleFormatter),"ariaLabels"in C&&n(22,q=C.ariaLabels),"precision"in C&&n(46,X=C.precision),"springValues"in C&&n(47,B=C.springValues)},t.$$.update=()=>{if(t.$$.dirty[0]&24&&n(50,i=function(C){return C<=p?p:C>=m?m:C}),t.$$.dirty[0]&56|t.$$.dirty[1]&524288&&n(49,a=function(C){if(C<=p)return G(p);if(C>=m)return G(m);C=G(C);let K=(C-p)%b,xt=C-K;return Math.abs(K)*2>=b&&(xt+=K>0?b:-b),xt=i(xt),G(xt)}),t.$$.dirty[0]&24&&n(24,r=function(C){let K=(C-p)/(m-p)*100;return isNaN(K)||K<=0?0:K>=100?100:G(K)}),t.$$.dirty[0]&29360153|t.$$.dirty[1]&458752){Array.isArray(y)||(n(0,y=[(m+p)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)"));const C=mt(y.map(K=>a(K)));(y.length!==C.length||!y.every((K,xt)=>G(K)===C[xt]))&&n(0,y=C),z!==y.length?l(n(23,Y=W7(y.map(K=>r(K)),B))):Y.set(y.map(K=>r(K))),n(48,z=y.length),y.length>1&&!Array.isArray(q)&&console.warn("'ariaLabels' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")}t.$$.dirty[0]&320&&n(29,s=_?w?"top":"bottom":w?"right":"left"),t.$$.dirty[0]&320&&n(28,f=_?w?"bottom":"top":w?"left":"right")},[y,h,d,p,m,b,_,M,w,v,S,k,x,E,D,A,N,$,R,T,O,L,q,Y,r,H,tt,j,f,s,c,G,Z,wt,ae,Le,Np,Dp,Ip,Lp,Op,Pp,Fp,$p,Rp,g,X,B,z,a,i,zp]}class Z7 extends We{constructor(e){super(),Ve(this,e,G7,X7,He,{slider:1,range:2,pushy:45,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,ariaLabels:22,precision:46,springValues:47},null,[-1,-1,-1])}}function Yd(t){let e,n,r,i=t[3]&&Xd(t);return{c(){e=ot("div"),n=jt(t[2]),r=Gt(),i&&i.c(),this.h()},l(a){e=st(a,"DIV",{class:!0});var s=ct(e);n=Wt(s,t[2]),r=Zt(s),i&&i.l(s),s.forEach(V),this.h()},h(){W(e,"class","text-sm")},m(a,s){pt(a,e,s),et(e,n),et(e,r),i&&i.m(e,null)},p(a,s){s&4&&ue(n,a[2]),a[3]?i?i.p(a,s):(i=Xd(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(a){a&&V(e),i&&i.d()}}}function Xd(t){let e,n,r,i,a;return{c(){e=ot("div"),n=ot("i"),r=Gt(),i=ot("span"),a=jt(t[3]),this.h()},l(s){e=st(s,"DIV",{class:!0});var f=ct(e);n=st(f,"I",{class:!0}),ct(n).forEach(V),r=Zt(f),i=st(f,"SPAN",{class:!0});var c=ct(i);a=Wt(c,t[3]),c.forEach(V),f.forEach(V),this.h()},h(){W(n,"class","bi bi-info-circle"),W(i,"class","tooltiptext"),W(e,"class","tooltip")},m(s,f){pt(s,e,f),et(e,n),et(e,r),et(e,i),et(i,a)},p(s,f){f&8&&ue(a,s[3])},d(s){s&&V(e)}}}function J7(t){let e,n,r,i,a,s=t[2]&&Yd(t);function f(u){t[15](u)}let c={min:+t[0],max:+t[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return t[7]!==void 0&&(c.values=t[7]),r=new Z7({props:c}),Nr.push(()=>Xp(r,"values",f)),r.$on("start",t[9]),r.$on("change",t[8]),r.$on("stop",t[10]),{c(){e=ot("div"),s&&s.c(),n=Gt(),nh(r.$$.fragment),this.h()},l(u){e=st(u,"DIV",{class:!0,id:!0});var l=ct(e);s&&s.l(l),n=Zt(l),rh(r.$$.fragment,l),l.forEach(V),this.h()},h(){W(e,"class","px-[1%] py-[1%] ml-[2.1%]"),W(e,"id","slider")},m(u,l){pt(u,e,l),s&&s.m(e,null),et(e,n),ih(r,e,null),a=!0},p(u,[l]){u[2]?s?s.p(u,l):(s=Yd(u),s.c(),s.m(e,n)):s&&(s.d(1),s=null);const h={};l&1&&(h.min=+u[0]),l&2&&(h.max=+u[1]),!i&&l&128&&(i=!0,h.values=u[7],Gp(()=>i=!1)),r.$set(h)},i(u){a||(Kr(r.$$.fragment,u),a=!0)},o(u){ma(r.$$.fragment,u),a=!1},d(u){u&&V(e),s&&s.d(),ah(r)}}}function K7(t,e,n){let r,i=It,a=()=>(i(),i=Fn(M,N=>n(16,r=N)),M),s,f=It,c=()=>(f(),f=Fn(y,N=>n(17,s=N)),y),u,l=It,h=()=>(l(),l=Fn(_,N=>n(18,u=N)),_);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>l());let{min:d=0,max:g=100,id:p,description:m,tooltip:b}=e,{change:y=ee({})}=e;c();let{stop:_=ee({})}=e;h();let{drag:M=ee({})}=e;a();let{interactions:w={change:y,stop:_,drag:M}}=e;Zp("dims");let v=[d,g];[...v];function S(N){console.log("Slider.render",N),N&&Jt(Array,N)&&Kt(N.filter($=>$===void 0))&&(n(7,v=[+N[0].min,+N[0].max]),n(0,[d,g]=v,d,n(1,g)),console.log("Slider.render.to",v)),v&&v.length>=2&&x()}function k(N,$){console.log("Slider.load",N,$),!(!wa("left")(N)||!wa("right")(N))&&(N=N??{left:d,right:g},n(7,v=[N.left??d,N.right??g]),x())}function x(){y.isActive&&ge(y,s={left:v[0],right:v[1]},s),M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function E(){M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function D(){_.isActive&&ge(_,u={left:v[0],right:v[1]},u),y.isActive&&ge(y,s={left:v[0],right:v[1]},s),M.isActive&&ge(M,r={left:v[0],right:v[1]},r)}function A(N){v=N,n(7,v)}return t.$$set=N=>{"min"in N&&n(0,d=N.min),"max"in N&&n(1,g=N.max),"id"in N&&n(11,p=N.id),"description"in N&&n(2,m=N.description),"tooltip"in N&&n(3,b=N.tooltip),"change"in N&&c(n(4,y=N.change)),"stop"in N&&h(n(5,_=N.stop)),"drag"in N&&a(n(6,M=N.drag)),"interactions"in N&&n(12,w=N.interactions)},[d,g,m,b,y,_,M,v,x,E,D,p,w,S,k,A]}class Zv extends We{constructor(e){super(),Ve(this,e,K7,J7,He,{min:0,max:1,id:11,description:2,tooltip:3,change:4,stop:5,drag:6,interactions:12,render:13,load:14})}get min(){return this.$$.ctx[0]}set min(e){this.$$set({min:e}),J()}get max(){return this.$$.ctx[1]}set max(e){this.$$set({max:e}),J()}get id(){return this.$$.ctx[11]}set id(e){this.$$set({id:e}),J()}get description(){return this.$$.ctx[2]}set description(e){this.$$set({description:e}),J()}get tooltip(){return this.$$.ctx[3]}set tooltip(e){this.$$set({tooltip:e}),J()}get change(){return this.$$.ctx[4]}set change(e){this.$$set({change:e}),J()}get stop(){return this.$$.ctx[5]}set stop(e){this.$$set({stop:e}),J()}get drag(){return this.$$.ctx[6]}set drag(e){this.$$set({drag:e}),J()}get interactions(){return this.$$.ctx[12]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[13]}get load(){return this.$$.ctx[14]}}function Gd(t,e,n){const r=t.slice();return r[28]=e[n],r[29]=e,r[30]=n,r}function Zd(t){let e,n,r,i=t[28]+"",a,s,f,c;function u(){t[20].call(n,t[28])}return{c(){e=ot("label"),n=ot("input"),r=Gt(),a=jt(i),s=Gt(),this.h()},l(l){e=st(l,"LABEL",{});var h=ct(e);n=st(h,"INPUT",{type:!0}),r=Zt(h),a=Wt(h,i),s=Zt(h),h.forEach(V),this.h()},h(){W(n,"type","checkbox")},m(l,h){pt(l,e,h),et(e,n),n.checked=t[4][t[28]],et(e,r),et(e,a),et(e,s),f||(c=[vt(n,"change",u),vt(n,"change",t[21])],f=!0)},p(l,h){t=l,h&18&&(n.checked=t[4][t[28]]),h&2&&i!==(i=t[28]+"")&&ue(a,i)},d(l){l&&V(e),f=!1,kn(c)}}}function Q7(t){let e,n,r,i,a=t[1],s=[];for(let f=0;f<a.length;f+=1)s[f]=Zd(Gd(t,a,f));return{c(){e=ot("div");for(let f=0;f<s.length;f+=1)s[f].c();n=Gt(),r=ot("div"),i=ot("div"),this.h()},l(f){e=st(f,"DIV",{});var c=ct(e);for(let l=0;l<s.length;l+=1)s[l].l(c);c.forEach(V),n=Zt(f),r=st(f,"DIV",{id:!0});var u=ct(r);i=st(u,"DIV",{}),ct(i).forEach(V),u.forEach(V),this.h()},h(){W(r,"id",t[0])},m(f,c){pt(f,e,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);pt(f,n,c),pt(f,r,c),et(r,i),t[22](i)},p(f,[c]){if(c&22){a=f[1];let u;for(u=0;u<a.length;u+=1){const l=Gd(f,a,u);s[u]?s[u].p(l,c):(s[u]=Zd(l),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c&1&&W(r,"id",f[0])},i:It,o:It,d(f){f&&V(e),co(s,f),f&&V(n),f&&V(r),t[22](null)}}}function tv(t,e,n){let r,{id:i,name:a,groupNames:s=[],title:f="",xAttr:c,yAttr:u="val",yMax:l,magic:h,xDomainMin:d=null,xDomainMax:g=null,theplot:p=null}=e,m={};const b=["#93c1cf","#feb144","#9ee09e","#ff6663"],y=ee(s.reduce((T,O)=>(T[O]=!0,T),{}));oh(t,y,T=>n(4,r=T)),console.log("visibility: ",y);let{brushX:_=ee({}),interactions:M={brushX:_}}=e,w,v=null,S=[],k=[{},{}];function x(T,O){return O!="overlay"?!1:(m=T,!0)}function E(T,O){return O!="badyear"?!1:(T.forEach((L,q)=>{L.rank=q+1,L[c]=Number(L[c])}),k=T,!0)}function D(T,O){!T||T.length===0||typeof O=="object"||(E(T,O)||x(T,O)?console.debug("overlay or badyear"):(S=R7(T,{include:s}),S.forEach(L=>L[c]=Number(L[c]))),A())}function A(){n(6,d=+d),n(7,g=+g);let T=Ff({x:{type:"linear",domain:[d-1,g]}}),O=q=>(k.length-q.rank)*(.3/k.length)+.7,L={x:T,color:{domain:s,range:b,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[Pr({ticks:gb(q=>q+d,g-d),tickRotate:-90,fontSize:10,tickFormat:q=>(q+"").slice(-2)}),Bi({fontSize:10,label:"Severity"}),Gc([0]),Xc([T.domain[0]]),jf(k,{x1:q=>q[c]-.5,x2:q=>q[c]+.5,y:O,stroke:"black",opacity:.8,strokeWidth:1}),H8(k,{x1:q=>q[c]-.5,x2:q=>q[c]+.5,y1:0,y2:O,fill:"gray",opacity:.1}),iu(m,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),L7(S,{filter:q=>q.key==s[3]&&q[c]>=d&&q[c]<=g&&+q[u]==0,x:q=>+q[c],y:0,stroke:"red",strokeWidth:1})]};s.forEach((q,X)=>{let B=(1+X)/s.length*.7;r[q]&&L.marks.push(jf(S,{filter:U=>U.key==q&&U[c]>=d&&U[c]<=g,x:U=>+U[c]+B-.35,y1:0,y2:u,stroke:"key",strokeWidth:4}))}),n(8,p=Yo(L,v)),_.isActive&&(w=w??new ou({iact:_,magic:h}),w.init(p))}function N(T){r[T]=this.checked,y.set(r)}const $=()=>A();function R(T){Nr[T?"unshift":"push"](()=>{v=T,n(3,v)})}return t.$$set=T=>{"id"in T&&n(9,i=T.id),"name"in T&&n(0,a=T.name),"groupNames"in T&&n(1,s=T.groupNames),"title"in T&&n(10,f=T.title),"xAttr"in T&&n(11,c=T.xAttr),"yAttr"in T&&n(12,u=T.yAttr),"yMax"in T&&n(13,l=T.yMax),"magic"in T&&n(14,h=T.magic),"xDomainMin"in T&&n(6,d=T.xDomainMin),"xDomainMax"in T&&n(7,g=T.xDomainMax),"theplot"in T&&n(8,p=T.theplot),"brushX"in T&&n(15,_=T.brushX),"interactions"in T&&n(16,M=T.interactions)},[a,s,A,v,r,y,d,g,p,i,f,c,u,l,h,_,M,x,E,D,N,$,R]}class Jv extends We{constructor(e){super(),Ve(this,e,tv,Q7,He,{id:9,name:0,groupNames:1,title:10,xAttr:11,yAttr:12,yMax:13,magic:14,xDomainMin:6,xDomainMax:7,theplot:8,brushX:15,interactions:16,overlay:17,badyear:18,render:19,update:2})}get id(){return this.$$.ctx[9]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get groupNames(){return this.$$.ctx[1]}set groupNames(e){this.$$set({groupNames:e}),J()}get title(){return this.$$.ctx[10]}set title(e){this.$$set({title:e}),J()}get xAttr(){return this.$$.ctx[11]}set xAttr(e){this.$$set({xAttr:e}),J()}get yAttr(){return this.$$.ctx[12]}set yAttr(e){this.$$set({yAttr:e}),J()}get yMax(){return this.$$.ctx[13]}set yMax(e){this.$$set({yMax:e}),J()}get magic(){return this.$$.ctx[14]}set magic(e){this.$$set({magic:e}),J()}get xDomainMin(){return this.$$.ctx[6]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[7]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get theplot(){return this.$$.ctx[8]}set theplot(e){this.$$set({theplot:e}),J()}get brushX(){return this.$$.ctx[15]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[16]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[17]}get badyear(){return this.$$.ctx[18]}get render(){return this.$$.ctx[19]}get update(){return this.$$.ctx[2]}}function ev(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(V),i.forEach(V),this.h()},h(){W(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[11](n)},p(r,[i]){i&1&&W(e,"id",r[0])},i:It,o:It,d(r){r&&V(e),t[11](null)}}}function nv(t,e,n){let{id:r,name:i,xDomainMin:a,xDomainMax:s,magic:f}=e,{brushX:c=ee({})}=e,{interactions:u={brushX:c}}=e,l,h,d,g={},p=[];const m=["#93c1cf","#feb144","#9ee09e","#ff6663"];function b(w,v){return v!="overlay"?!1:(g=w,!0)}function y(w,v){!w||w.length===0||typeof v=="object"||(b(w,v)?console.debug("overlay"):p=w,_())}function _(){let w={x:{domain:[+a,+s],type:"linear"},y:{axis:null},marginBottom:50,height:300,fy:{label:null,tickRotate:-90,labelAnchor:"center"},color:{style:{"font-size":10,"margin-left":"2rem"},range:m,legend:!0},marks:[Pr({ticks:36,fontSize:10}),_p(),iu(g,{x1:"left",x2:"right",y2:1,fill:"key",color:"key"}),jf(p,{x1:"start_time",x2:"end_time",y:"activity",strokeWidth:3,fy:"crop"}),Wo(p,{x:v=>{let S=(v.end_time-v.start_time)/2+v.start_time;return console.log("yy",v,S),S},y:"activity",dy:3,lineAnchor:"top",fy:"crop",fontSize:10,color:"gray",text:"activity"})]};l=Yo(w,h),c.isActive&&(d=d??new ou({iact:c,magic:f}),d.init(l))}function M(w){Nr[w?"unshift":"push"](()=>{h=w,n(1,h)})}return t.$$set=w=>{"id"in w&&n(2,r=w.id),"name"in w&&n(0,i=w.name),"xDomainMin"in w&&n(3,a=w.xDomainMin),"xDomainMax"in w&&n(4,s=w.xDomainMax),"magic"in w&&n(5,f=w.magic),"brushX"in w&&n(6,c=w.brushX),"interactions"in w&&n(7,u=w.interactions)},[i,h,r,a,s,f,c,u,b,y,_,M]}class Kv extends We{constructor(e){super(),Ve(this,e,nv,ev,He,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,overlay:8,render:9,update:10})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),J()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),J()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),J()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),J()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),J()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),J()}get overlay(){return this.$$.ctx[8]}get render(){return this.$$.ctx[9]}get update(){return this.$$.ctx[10]}}function rv(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(V),i.forEach(V),this.h()},h(){W(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[6](n)},p(r,[i]){i&1&&W(e,"id",r[0])},i:It,o:It,d(r){r&&V(e),t[6](null)}}}function iv(t,e,n){let{name:r,id:i,interactions:a={}}=e,s,f=[];function c(h,d){!h||h.length===0||(f=h,u())}function u(){let h=Ff({color:{type:"linear",scheme:"greens"}}),d=Ff({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),g=f.map(m=>d.apply(ka(h.apply(+m.value)).l)),p={padding:0,marginLeft:150,height:300,color:h,marks:[Pr({fontSize:10,label:null}),Bi({fontSize:10,label:null}),E7(f,{x:"x",y:"y",fill:m=>+m.value,stroke:"white"}),Wo(f,{x:"x",y:"y",text:m=>m.value,fill:g,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};Yo(p,s)}function l(h){Nr[h?"unshift":"push"](()=>{s=h,n(1,s)})}return t.$$set=h=>{"name"in h&&n(0,r=h.name),"id"in h&&n(2,i=h.id),"interactions"in h&&n(3,a=h.interactions)},[r,s,i,a,c,u,l]}class Qv extends We{constructor(e){super(),Ve(this,e,iv,rv,He,{name:0,id:2,interactions:3,render:4,update:5})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),J()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),J()}get interactions(){return this.$$.ctx[3]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[4]}get update(){return this.$$.ctx[5]}}const av=ee({w:window.innerWidth*.8,h:window.innerHeight*.8,margin:z7}),t9=ee([]),e9=ee({});function Jd(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function ov(t){let e,n=t[15][t[2]]+"",r;return{c(){e=ot("option"),r=jt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Wt(a,n),a.forEach(V),this.h()},h(){e.__value=t[17],e.value=e.__value},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[15][i[2]]+"")&&ue(r,n)},d(i){i&&V(e)}}}function sv(t){let e,n=t[15][t[2]]+"",r;return{c(){e=ot("option"),r=jt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Wt(a,n),a.forEach(V),this.h()},h(){e.__value=t[17],e.value=e.__value,e.selected=!0},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[15][i[2]]+"")&&ue(r,n)},d(i){i&&V(e)}}}function Kd(t){let e;function n(a,s){return a[17]===a[1]?sv:ov}let r=n(t),i=r(t);return{c(){i.c(),e=Nt()},l(a){i.l(a),e=Nt()},m(a,s){i.m(a,s),pt(a,e,s)},p(a,s){r===(r=n(a))&&i?i.p(a,s):(i.d(1),i=r(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){i.d(a),a&&V(e)}}}function fv(t){let e,n,r,i,a=t[5],s=[];for(let f=0;f<a.length;f+=1)s[f]=Kd(Jd(t,a,f));return{c(){e=ot("div"),n=ot("select");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=st(f,"DIV",{class:!0,id:!0});var c=ct(e);n=st(c,"SELECT",{class:!0});var u=ct(n);for(let l=0;l<s.length;l+=1)s[l].l(u);u.forEach(V),c.forEach(V),this.h()},h(){W(n,"class","form-select block w-full px-2 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),t[4]===void 0&&Jp(()=>t[10].call(n)),W(e,"class","px-[1%] py-[1%] container svelte-p4yrke"),W(e,"id",t[0])},m(f,c){pt(f,e,c),et(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null);du(n,t[4],!0),r||(i=[vt(n,"change",t[10]),vt(n,"change",t[6])],r=!0)},p(f,[c]){if(c&38){a=f[5];let u;for(u=0;u<a.length;u+=1){const l=Jd(f,a,u);s[u]?s[u].p(l,c):(s[u]=Kd(l),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c&16&&du(n,f[4]),c&1&&W(e,"id",f[0])},i:It,o:It,d(f){f&&V(e),co(s,f),r=!1,kn(i)}}}function cv(t,e,n){let r,i=It,a=()=>(i(),i=Fn(l,_=>n(11,r=_)),l),s;oh(t,av,_=>n(12,s=_)),t.$$.on_destroy.push(()=>i());let{id:f,index:c,dropdown_key:u}=e,{change:l=ee({})}=e;a();let{interactions:h={change:l}}=e,d=null,g=[];s.margin;function p(_,M){n(5,g=_??g),n(4,d=d??c),console.log("Dropdown.render",g,d,M),b()}function m(_){console.log("Dropdown.load",_),n(4,d=_.idx),p()}function b(){l.isActive&&ge(l,r={...g[d],idx:d},r)}function y(){d=Kp(this),n(4,d)}return t.$$set=_=>{"id"in _&&n(0,f=_.id),"index"in _&&n(1,c=_.index),"dropdown_key"in _&&n(2,u=_.dropdown_key),"change"in _&&a(n(3,l=_.change)),"interactions"in _&&n(7,h=_.interactions)},[f,c,u,l,d,g,b,h,p,m,y]}class n9 extends We{constructor(e){super(),Ve(this,e,cv,fv,He,{id:0,index:1,dropdown_key:2,change:3,interactions:7,render:8,load:9})}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),J()}get index(){return this.$$.ctx[1]}set index(e){this.$$set({index:e}),J()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(e){this.$$set({dropdown_key:e}),J()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),J()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),J()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}function uv(t){let e,n,r,i,a,s,f,c,u,l,h,d,g,p;return{c(){e=ot("form"),n=ot("div"),r=ot("input"),i=Gt(),a=ot("button"),s=jt("Login"),f=Gt(),c=ot("button"),u=jt("Save"),l=Gt(),h=ot("button"),d=jt("Logout"),this.h()},l(m){e=st(m,"FORM",{class:!0});var b=ct(e);n=st(b,"DIV",{class:!0});var y=ct(n);r=st(y,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),i=Zt(y),a=st(y,"BUTTON",{class:!0,type:!0});var _=ct(a);s=Wt(_,"Login"),_.forEach(V),f=Zt(y),c=st(y,"BUTTON",{class:!0,type:!0});var M=ct(c);u=Wt(M,"Save"),M.forEach(V),l=Zt(y),h=st(y,"BUTTON",{class:!0,type:!0});var w=ct(h);d=Wt(w,"Logout"),w.forEach(V),y.forEach(V),b.forEach(V),this.h()},h(){W(r,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),W(r,"type","text"),W(r,"placeholder","Login..."),W(r,"aria-label","username"),W(a,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),W(a,"type","button"),W(c,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),W(c,"type","button"),W(h,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),W(h,"type","button"),W(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),W(e,"class","w-full max-w-sm mx-auto")},m(m,b){pt(m,e,b),et(e,n),et(n,r),hu(r,t[1]),et(n,i),et(n,a),et(a,s),et(n,f),et(n,c),et(c,u),et(n,l),et(n,h),et(h,d),g||(p=[vt(r,"input",t[14]),vt(a,"click",t[2]),vt(c,"click",t[3]),vt(h,"click",t[4])],g=!0)},p(m,[b]){b&2&&r.value!==m[1]&&hu(r,m[1])},i:It,o:It,d(m){m&&V(e),g=!1,kn(p)}}}function Sp(t,e){console.debug("login invoked",t,e)}function lv(t,e,n){let r,i=It,a=()=>(i(),i=Fn(s,v=>n(16,r=v)),s);t.$$.on_destroy.push(()=>i());let{status:s=ee({}),interactions:f={status:s}}=e;a();let{id:c,magic:u,client:l,exportFunc:h,importFunc:d,dataTable:g,stateTable:p}=e,m,b;const y=async()=>{console.debug("login user: ",m),b=u.exportState();const v=await l.query(d,{table:p,user:m});if(!v){alert("there is no data for this user"),ge(s,r={user:m,loggedin:!0},r);return}ge(s,r={user:m,loggedin:!0},r),u.importState(v.data)},_=async()=>{let v=u.exportData();await l.mutation(h,{data:v,table:g,user:m}),v=u.exportState(),await l.mutation(h,{data:v,table:p,user:m}),alert("save function executed")},M=async()=>{u.importState(b),n(1,m=null)};function w(){m=this.value,n(1,m)}return t.$$set=v=>{"status"in v&&a(n(0,s=v.status)),"interactions"in v&&n(5,f=v.interactions),"id"in v&&n(6,c=v.id),"magic"in v&&n(7,u=v.magic),"client"in v&&n(8,l=v.client),"exportFunc"in v&&n(9,h=v.exportFunc),"importFunc"in v&&n(10,d=v.importFunc),"dataTable"in v&&n(11,g=v.dataTable),"stateTable"in v&&n(12,p=v.stateTable)},[s,m,y,_,M,f,c,u,l,h,d,g,p,Sp,w]}class r9 extends We{constructor(e){super(),Ve(this,e,lv,uv,He,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,render:13})}get status(){return this.$$.ctx[0]}set status(e){this.$$set({status:e}),J()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),J()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),J()}get magic(){return this.$$.ctx[7]}set magic(e){this.$$set({magic:e}),J()}get client(){return this.$$.ctx[8]}set client(e){this.$$set({client:e}),J()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(e){this.$$set({exportFunc:e}),J()}get importFunc(){return this.$$.ctx[10]}set importFunc(e){this.$$set({importFunc:e}),J()}get dataTable(){return this.$$.ctx[11]}set dataTable(e){this.$$set({dataTable:e}),J()}get stateTable(){return this.$$.ctx[12]}set stateTable(e){this.$$set({stateTable:e}),J()}get render(){return Sp}}function dv(t,e,n){let r,i=It,a=()=>(i(),i=Fn(f,m=>n(8,r=m)),f);t.$$.on_destroy.push(()=>i());let{id:s,valid:f=ee({}),interactions:c={valid:f},key:u,threshold_string:l}=e;a();let h=[],d=Number(l);function g(m,b){if(console.debug("trigger alert render"),h=m??h,Kt(h)||!Jt(Array,h))return;const _=Jf(u)(h);if(Kt(_)){alert("warning, alert tried to find data for a key that returns an empty list, alert will not be used");return}o2(_)<d?(ge(f,r={valid:!1},r),alert("warning, slider selection has too low variance in rainfall,invalid results")):ge(f,r={valid:!0},r)}function p(m,b){Kt(m)||ge(f,r=m,r)}return t.$$set=m=>{"id"in m&&n(1,s=m.id),"valid"in m&&a(n(0,f=m.valid)),"interactions"in m&&n(2,c=m.interactions),"key"in m&&n(3,u=m.key),"threshold_string"in m&&n(4,l=m.threshold_string)},[f,s,c,u,l,g,p]}class i9 extends We{constructor(e){super(),Ve(this,e,dv,null,He,{id:1,valid:0,interactions:2,key:3,threshold_string:4,render:5,load:6})}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),J()}get valid(){return this.$$.ctx[0]}set valid(e){this.$$set({valid:e}),J()}get interactions(){return this.$$.ctx[2]}set interactions(e){this.$$set({interactions:e}),J()}get key(){return this.$$.ctx[3]}set key(e){this.$$set({key:e}),J()}get threshold_string(){return this.$$.ctx[4]}set threshold_string(e){this.$$set({threshold_string:e}),J()}get render(){return this.$$.ctx[5]}get load(){return this.$$.ctx[6]}}class no{constructor(e){this.compPos=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this._array[i]>0&&n[i]>0);r.push(a)}return r},this.isNegative=function(n){return n===0||n===null},this.compZero=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this.isNegative(this._array[i])&&this.isNegative(n[i]));r.push(a)}return r},this.getPos=function(){for(var n=[],r=0;r<this._array.length;r++)+(this._array[r]>0),n.push(+(this._array[r]>0));return n},this.getZero=function(){for(var n=[],r=0;r<this._array.length;r++)+this.isNegative(this._array[r]),n.push(+(this._array[r]===0));return n},this._array=e}get array(){return this._array}}const xp=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compPos(f.array),u=f.getPos(),l=c.filter(g=>g>0).length,h=u.filter(g=>g>0).length;return(l/h).toFixed(2)},Tp=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compZero(f.array),u=f.getZero(),l=c.filter(g=>g>0).length,h=u.filter(g=>g>0).length;return(l/h).toFixed(2)},hv=function(t,e,n,r){return xp(t,e,n,r)},gv=function(t,e,n,r){return Tp(t,e,n,r)},mv=function(t,e,n,r){let i=Number(xp(t,e,n,r)),a=Number(Tp(t,e,n,r));return((i+a)/2).toFixed(2)};let a9=[{"true positive":hv,"true negative":gv,"average matching":mv}];const Wr="1.16.2";var $e=[],he=[],pv=Uint8Array,Rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var or=0,bv=Rs.length;or<bv;++or)$e[or]=Rs[or],he[Rs.charCodeAt(or)]=or;he["-".charCodeAt(0)]=62;he["_".charCodeAt(0)]=63;function yv(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function _v(t,e,n){return(e+n)*3/4-n}function ro(t){var e,n=yv(t),r=n[0],i=n[1],a=new pv(_v(t,r,i)),s=0,f=i>0?r-4:r,c;for(c=0;c<f;c+=4)e=he[t.charCodeAt(c)]<<18|he[t.charCodeAt(c+1)]<<12|he[t.charCodeAt(c+2)]<<6|he[t.charCodeAt(c+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=he[t.charCodeAt(c)]<<2|he[t.charCodeAt(c+1)]>>4,a[s++]=e&255),i===1&&(e=he[t.charCodeAt(c)]<<10|he[t.charCodeAt(c+1)]<<4|he[t.charCodeAt(c+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function wv(t){return $e[t>>18&63]+$e[t>>12&63]+$e[t>>6&63]+$e[t&63]}function vv(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(wv(r));return i.join("")}function io(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,f=n-r;s<f;s+=a)i.push(vv(t,s,s+a>f?f:s+a));return r===1?(e=t[n-1],i.push($e[e>>2]+$e[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push($e[e>>10]+$e[e>>4&63]+$e[e<<2&63]+"=")),i.join("")}function Vr(t){if(t===void 0)return{};if(!Ap(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function Mv(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);try{new URL(t)}catch{throw new Error(`Invalid deployment address: "${t}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(t.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${t}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Ap(t){var i;const e=typeof t=="object",n=Object.getPrototypeOf(t),r=n===null||n===Object.prototype||((i=n==null?void 0:n.constructor)==null?void 0:i.name)==="Object";return e&&r}const kp=!0,Cr=BigInt("-9223372036854775808"),su=BigInt("9223372036854775807"),Vf=BigInt("0"),Sv=BigInt("8"),xv=BigInt("256");function Ep(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function Tv(t){t<Vf&&(t-=Cr+Cr);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())n.set([parseInt(i,16)],r++),t>>=Sv;return io(n)}function Av(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=Vf,r=Vf;for(const i of e)n+=BigInt(i)*xv**r,r++;return n>su&&(n+=Cr+Cr),n}function kv(t){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),io(new Uint8Array(e))}function Ev(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Cv=DataView.prototype.setBigInt64?kv:Tv,Nv=DataView.prototype.getBigInt64?Ev:Av,Qd=1024;function Hf(t){if(t.length>Qd)throw new Error(`Field name ${t} exceeds maximum field name length ${Qd}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function Pn(t){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>Pn(r));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const e=Object.entries(t);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return ro(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return Nv(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const i=ro(t.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const s=new DataView(i.buffer).getFloat64(0,kp);if(!Ep(s))throw new Error(`Float ${s} should be encoded as a number`);return s}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const n={};for(const[r,i]of Object.entries(t))Hf(r),n[r]=Pn(i);return n}function hr(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function ao(t,e,n,r){var s;if(t===void 0){const f=n&&` (present at path ${n} in original object ${hr(e)})`;throw new Error(`undefined is not a valid Convex value${f}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:Cv(t)}}if(typeof t=="number")if(Ep(t)){const f=new ArrayBuffer(8);return new DataView(f).setFloat64(0,t,kp),{$float:io(new Uint8Array(f))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:io(new Uint8Array(t))};if(Array.isArray(t))return t.map((f,c)=>ao(f,e,n+`[${c}]`,!1));if(t instanceof Set)throw new Error(Bs(n,"Set",[...t],e));if(t instanceof Map)throw new Error(Bs(n,"Map",[...t],e));if(!Ap(t)){const f=(s=t==null?void 0:t.constructor)==null?void 0:s.name,c=f?`${f} `:"";throw new Error(Bs(n,c,t,e))}const i={},a=Object.entries(t);a.sort(([f,c],[u,l])=>f===u?0:f<u?-1:1);for(const[f,c]of a)c!==void 0?(Hf(f),i[f]=ao(c,e,n+`.${f}`,!1)):r&&(Hf(f),i[f]=Dv(c,e,n+`.${f}`));return i}function Bs(t,e,n,r){return t?`${e}${hr(n)} is not a supported Convex type (present at path ${t} in original object ${hr(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${hr(n)} is not a supported Convex type.`}function Dv(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${hr(t)} but original value is undefined`);return ao(t,e,n,!1)}function ra(t){return ao(t,t,"",!1)}var Iv=Object.defineProperty,Lv=(t,e,n)=>e in t?Iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Us=(t,e,n)=>Lv(t,typeof e!="symbol"?e+"":e,n),th,eh;const Ov=Symbol.for("ConvexError");class ia extends(eh=Error,th=Ov,eh){constructor(e){super(typeof e=="string"?e:hr(e)),Us(this,"name","ConvexError"),Us(this,"data"),Us(this,th,!0),this.data=e}}const Pv="color:rgb(0, 145, 255)";function Fv(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}function aa(t,e,n,r){const i=Fv(e);if(typeof r=="object"&&(r=`ConvexError ${JSON.stringify(r.errorData,null,2)}`),t==="info"){const a=r.match(/^\[.*?\] /);if(a===null){console.error(`[CONVEX ${i}(${n})] Could not parse console.log`);return}const s=r.slice(1,a[0].length-2),f=r.slice(a[0].length);console.log(`%c[CONVEX ${i}(${n})] [${s}]`,Pv,f)}else console.error(`[CONVEX ${i}(${n})] ${r}`)}const $v=Symbol.for("toReferencePath");function Rv(t){return t[$v]??null}function Bv(t){return t.startsWith("function://")}const oo=Symbol.for("functionName");function Uv(t){let e;if(typeof t=="string")Bv(t)?e={functionHandle:t}:e={name:t};else if(t[oo])e={name:t[oo]};else{const n=Rv(t);if(!n)throw new Error(`${t} is not a functionReference`);e={reference:n}}return e}function oa(t){const e=Uv(t);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof t=="string")return t;const n=t[oo];if(!n)throw new Error(`${t} is not a functionReference`);return n}function Cp(t=[]){const e={get(n,r){if(typeof r=="string"){const i=[...t,r];return Cp(i)}else if(r===oo){if(t.length<2){const s=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${s}\``)}const i=t.slice(0,-1).join("/"),a=t[t.length-1];return a==="default"?i:i+":"+a}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}Cp();var zv=Object.defineProperty,qv=(t,e,n)=>e in t?zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sr=(t,e,n)=>qv(t,typeof e!="symbol"?e+"":e,n);const sa=560;class o9{constructor(e,n){sr(this,"address"),sr(this,"auth"),sr(this,"adminAuth"),sr(this,"encodedTsPromise"),sr(this,"debug"),sr(this,"fetchOptions"),n!==!0&&Mv(e),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,n){if(this.clearAuth(),n!==void 0){const r=new TextEncoder().encode(JSON.stringify(n)),i=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${i}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...n){const r=Vr(n[0]),i=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:i})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,n={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:n,credentials:"include"});if(!r.ok)throw new Error(await r.text());const{ts:i}=await r.json();return i}async query(e,...n){const r=Vr(n[0]);return await this.queryInner(e,r,{})}async queryInner(e,n,r){const i=oa(e),a=[ra(n)],s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const f=fetch,c=r.timestampPromise?await r.timestampPromise:void 0,u=JSON.stringify({path:i,format:"convex_encoded_json",args:a,...c?{ts:c}:{}}),l=c?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,h=await f(l,{...this.fetchOptions,body:u,method:"POST",headers:s,credentials:"include"});if(!h.ok&&h.status!==sa)throw new Error(await h.text());const d=await h.json();if(this.debug)for(const g of d.logLines??[])aa("info","query",i,g);switch(d.status){case"success":return Pn(d.value);case"error":throw d.errorData!==void 0?fa(d.errorData,new ia(d.errorMessage)):new Error(d.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(d)}`)}}async mutation(e,...n){const r=Vr(n[0]),i=oa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[ra(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:a,method:"POST",headers:s,credentials:"include"});if(!c.ok&&c.status!==sa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])aa("info","mutation",i,l);switch(u.status){case"success":return Pn(u.value);case"error":throw u.errorData!==void 0?fa(u.errorData,new ia(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async action(e,...n){const r=Vr(n[0]),i=oa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[ra(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:a,method:"POST",headers:s,credentials:"include"});if(!c.ok&&c.status!==sa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])aa("info","action",i,l);switch(u.status){case"success":return Pn(u.value);case"error":throw u.errorData!==void 0?fa(u.errorData,new ia(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async function(e,n,...r){const i=Vr(r[0]),a=typeof e=="string"?e:oa(e),s=JSON.stringify({componentPath:n,path:a,format:"convex_encoded_json",args:ra(i)}),f={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?f.Authorization=`Convex ${this.adminAuth}`:this.auth&&(f.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:s,method:"POST",headers:f,credentials:"include"});if(!u.ok&&u.status!==sa)throw new Error(await u.text());const l=await u.json();if(this.debug)for(const h of l.logLines??[])aa("info","any",a,h);switch(l.status){case"success":return Pn(l.value);case"error":throw l.errorData!==void 0?fa(l.errorData,new ia(l.errorMessage)):new Error(l.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(l)}`)}}}function fa(t,e){return e.data=Pn(t),e}export{i9 as A,Jv as B,o9 as C,n9 as D,Hb as E,Sn as F,zb as G,_a as H,mh as I,r9 as L,Xv as M,Z7 as R,Zv as S,Gv as a,Kv as b,Qv as c,mr as d,Me as e,a9 as f,yi as g,wa as h,xr as i,ie as j,Xt as k,Ft as l,zc as m,Mc as n,De as o,Do as p,Ie as q,ce as r,Ce as s,vf as t,e9 as u,_e as v,N7 as w,t9 as x,wp as y,xu as z};
